var GameScene=function(t){function e(){t.call(this),this._index=2,this._distance=new egret.Point,this._x=[],this._y=[],this._all_X_Y=[],this._all_Y_X=[],this._touchStatus=!1,this._touchStatus1=!1,this._touchStatus2=!1,this._touchStatus3=!1,this._touchStatus4=!1,this._touchStatus5=!1,this._isTouch1=!1,this._isTouch2=!1,this._isCollide=!1,this._isTouch3=!1,this._carAppearPos=new egret.Point,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onAddToStage=function(t){this.init()},s.init=function(){this._index=2;var t=Const.SWIDTH/2,e=Const.SHEIGHT/2;this._winWidth=t,this._winHeight=e;var i=ResourceUtils.createBitmapByName("page1_4_png");this.addChild(i),i.x=t-i.width/2,i.y=25;var s=ResourceUtils.createBitmapByName("page2_2_png");this.addChild(s),s.x=10,s.y=210-s.height/2,this._head=s;var a=ResourceUtils.createBitmapByName("page2_1_png");this.addChild(a),a.anchorOffsetX=0,a.anchorOffsetY=a.height/2,a.x=120,a.y=230,this._headTitle=a,this._headTitle.scaleX=.01,this._headTitle.scaleY=.01,egret.Tween.get(this._headTitle).to({scaleX:1,scaleY:1},400,egret.Ease.backInOut);var h=ResourceUtils.createBitmapByName("page2_4_png");this.addChild(h),h.x=t-h.width/2,h.y=e-h.height/2+75,h.touchEnabled=!0,this._drawArea=h,this._carAppearPos.x=t-h.width/2,this._carAppearPos.y=e-h.height/2+75,this._car=new egret.Sprite,this.addChildAt(this._car,999),this._car.width=Const.SWIDTH,this._car.height=Const.SHEIGHT;var n=new MyButton("btn2_png","btn2_png");this.addChild(n),n.x=t-n.width/2-120,n.y=Const.SHEIGHT-200,n.setClick(this.confirmClick.bind(this));var o=new MyButton("btn3_png","btn3_png");this.addChild(o),o.x=t-o.width/2+120,o.y=Const.SHEIGHT-200,o.setClick(this.redrawClick.bind(this)),this._confirm_btn=n,this._redraw_btn=o;var r=RES.getRes("round_json"),g=RES.getRes("round_png"),_=new egret.MovieClipDataFactory(r,g),d=new egret.MovieClip(_.generateMovieClipData("round"));this.addChild(d),d.x=t-d.width/2,d.y=e+172,this._round=d;var l=ResourceUtils.createBitmapByName("page2_3_png");this.addChild(l),l.x=t-l.width/2,l.y=e+270,this._tips=l,this._shape=new egret.Shape,this._car.addChild(this._shape),this._shape.graphics.lineStyle(5,7828852),h.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.drawStart,this),h.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.drawMove,this),h.addEventListener(egret.TouchEvent.TOUCH_END,this.drawEnd,this);var c=ResourceUtils.createBitmapByName("page2_5_png");this._car.addChild(c),c.x=t-130,c.y=e-c.height/2+202,c.anchorOffsetX=c.width/2,c.anchorOffsetY=c.height/2,this._leftShoe=c;var u=ResourceUtils.createBitmapByName("page2_6_png");this._car.addChild(u),u.x=t+130,u.y=e-u.height/2+202,u.anchorOffsetX=u.width/2,u.anchorOffsetY=u.height/2,this._rightShoe=u,this._leftShoe.touchEnabled=!0,this._rightShoe.touchEnabled=!0,this._leftShoe.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.leftShoeDown,this),this._leftShoe.addEventListener(egret.TouchEvent.TOUCH_END,this.leftShoeUp,this),this._rightShoe.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.rightShoeDown,this),this._rightShoe.addEventListener(egret.TouchEvent.TOUCH_END,this.rightShoeUp,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchStart,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},s.confirmClick=function(){2===this._index?this._isTouch1&&this.createCar():3===this._index&&this._isTouch2?this.page3End():4===this._index&&this._isCollide?this.page4End():5===this._index&&this._isTouch3?this.page5End():6===this._index&&""!=this._input.text&&(this.page6Hide(),this.page7())},s.redrawClick=function(){2===this._index?(this._shape.graphics.clear(),this._all_X_Y=[],this._all_Y_X=[],this._shape.graphics.lineStyle(2,0)):(3===this._index||5===this._index)&&(this._lineShape.graphics.clear(),this._lineShape.graphics.lineStyle(2,0))},s.drawStart=function(t){this._touchStatus=!0;var e=t.stageX,i=t.stageY;this._shape.graphics.moveTo(e,i),this._shape.graphics.lineTo(e+1,i)},s.drawMove=function(t){if(!this._touchStatus1&&!this._touchStatus2&&this._touchStatus){this._isTouch1=!0;var e=t.stageX,i=t.stageY;this.movePoint(e,i,this._shape)}},s.drawEnd=function(t){this._all_X_Y.push(this._x),this._all_Y_X.push(this._y),this._touchStatus=!1,this._x=[],this._y=[]},s.movePoint=function(t,e,i){var s=i;s.graphics.lineTo(t,e)},s.leftShoeDown=function(t){this._touchStatus||(this._touchStatus1=!0,this._distance.x=t.stageX-this._leftShoe.x)},s.leftShoeUp=function(t){this._touchStatus1=!1},s.rightShoeDown=function(t){this._touchStatus||(this._touchStatus2=!0,this._distance.x=t.stageX-this._rightShoe.x)},s.rightShoeUp=function(t){this._touchStatus2=!1},s.touchStart=function(t){var e=t.stageX,i=t.stageY;3===this._index?(this._touchStatus3=!0,this._lineShape.graphics.moveTo(e,i),this._lineShape.graphics.lineTo(e+1,i)):5===this._index&&(this._touchStatus5=!0,this._lineShape.graphics.moveTo(e,i),this._lineShape.graphics.lineTo(e+1,i))},s.touchMove=function(t){if(2===this._index){var e=Const.SWIDTH/2-this._drawArea.width/2+this._leftShoe.width/2,i=Const.SWIDTH/2+this._drawArea.width/2-this._leftShoe.width/2,s=t.stageX-this._distance.x;e>=s?s=e:s>=i&&(s=i),this._touchStatus1?this._leftShoe.x=s:this._touchStatus2&&(this._rightShoe.x=s)}else if(3===this._index&&this._touchStatus3){var s=t.stageX,a=t.stageY;this.movePoint(s,a,this._lineShape),this._isTouch2=!0}else if(4===this._index&&this._touchStatus4&&!this._isCollide){var s=t.stageX-this._distance.x,a=t.stageY-this._distance.y;this._navigation.x=s,this._navigation.y=a}else if(5===this._index&&this._touchStatus5){var s=t.stageX,a=t.stageY;this.movePoint(s,a,this._lineShape),this._isTouch3=!0}},s.touchEnd=function(t){3===this._index?this._touchStatus3=!1:7===this._index&&(this._share.visible=!1,this._shareShape.graphics.clear())},s.createCar=function(){this._drawArea.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.drawStart,this),this._drawArea.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.drawMove,this),this._drawArea.removeEventListener(egret.TouchEvent.TOUCH_END,this.drawEnd,this),this._leftShoe.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.leftShoeDown,this),this._leftShoe.removeEventListener(egret.TouchEvent.TOUCH_END,this.leftShoeUp,this),this._rightShoe.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.rightShoeDown,this),this._rightShoe.removeEventListener(egret.TouchEvent.TOUCH_END,this.rightShoeUp,this),this._leftShoe.touchEnabled=!1,this._rightShoe.touchEnabled=!1,this.btnHide(),this.titleHide(),this.removeChild(this._drawArea),this.removeChild(this._tips);var t=RES.getRes("dust_json"),e=RES.getRes("dust_png"),i=new egret.MovieClipDataFactory(t,e),s=new egret.MovieClip(i.generateMovieClipData("dust"));this._car.addChild(s),s.x=this._winWidth-390,s.y=this._winHeight/2+420,s.scaleX=2,s.scaleY=2,s.frameRate=12,s.gotoAndPlay(0,-1),this._dust=s,this._car.scaleX=.7,this._car.scaleY=.7;var a=.15*Const.SWIDTH,h=.2*Const.SHEIGHT+5;this._car.x=a,this._car.y=h,egret.Tween.get(this._car).wait(100).call(this.carMove,this),this._round.gotoAndPlay(0,-1)},s.carMove=function(){egret.Tween.get(this._leftShoe,{loop:!0}).to({rotation:360},1500),egret.Tween.get(this._rightShoe,{loop:!0}).to({rotation:360},1500),egret.Tween.get(this._car).wait(1500).call(this.fastMove,this),egret.Tween.get(this._shape,{loop:!0}).to({y:this._shape.y-4},200).to({y:this._shape.y+4},200)},s.fastMove=function(){egret.Tween.get(this._car).to({x:Const.SWIDTH},1500,egret.Ease.sineIn).wait(500).call(this.page3,this),egret.Tween.get(this._leftShoe,{loop:!0}).to({rotation:360},800),egret.Tween.get(this._rightShoe,{loop:!0}).to({rotation:360},800)},s.page3=function(){this.carAppear(),egret.Tween.get(this._car).to({x:-this._carAppearPos.x+50},1500,egret.Ease.sineOut).call(this.page3Start,this);var t=ResourceUtils.createBitmapByName("page3_2_png");this.addChild(t),t.x=Const.SWIDTH,t.y=Const.SHEIGHT/2-150,this._trafficLight=t;var e=Const.SWIDTH-t.width-60;egret.Tween.get(t).to({x:e},1500,egret.Ease.sineOut)},s.page3Start=function(){this._round.stop(),this.carStop(),this._lineShape=new egret.Shape,this.addChild(this._lineShape),this._lineShape.graphics.lineStyle(2,0),this.addLongAnimate()},s.addLongAnimate=function(){this._trafficLight.texture=RES.getRes("page3_3_png");var t=RES.getRes("long_json"),e=RES.getRes("long_png"),i=new egret.MovieClipDataFactory(t,e),s=new egret.MovieClip(i.generateMovieClipData("long"));this.addChild(s),s.x=this._winWidth-s.width/2-10,s.y=this._winHeight-133,s.frameRate=10,s.gotoAndPlay(0),egret.Tween.get(this.stage).wait(900).call(this.addKaAnimate,this),this._longMovie1=s,this._longMovie1.addEventListener(egret.Event.COMPLETE,this.longAnimateEnd,this)},s.longAnimateEnd=function(t){this.removeChild(this._longMovie1);var e=RES.getRes("longnext_json"),i=RES.getRes("longnext_png"),s=new egret.MovieClipDataFactory(e,i),a=new egret.MovieClip(s.generateMovieClipData("longnext"));this.addChild(a),a.x=this._winWidth-30,a.y=this._winHeight-133,a.frameRate=10,a.gotoAndPlay(0,-1),this._longMovie2=a},s.addKaAnimate=function(){this._trafficLight.texture=RES.getRes("page3_4_png");var t=RES.getRes("ka_json"),e=RES.getRes("ka_png"),i=new egret.MovieClipDataFactory(t,e),s=new egret.MovieClip(i.generateMovieClipData("ka"));this.addChild(s),s.x=2*this._winWidth-s.width-145,s.y=this._winHeight-130,s.frameRate=10,s.gotoAndPlay(0),this._kaMovie1=s,this._kaMovie1.addEventListener(egret.Event.COMPLETE,this.kaAnimateEnd,this)},s.kaAnimateEnd=function(t){this.removeChild(this._kaMovie1);var e=RES.getRes("kanext_json"),i=RES.getRes("kanext_png"),s=new egret.MovieClipDataFactory(e,i),a=new egret.MovieClip(s.generateMovieClipData("kanext"));this.addChild(a),a.x=2*this._winWidth-180,a.y=this._winHeight-130,a.frameRate=6,a.gotoAndPlay(0,-1),this._kaMovie2=a,this.page3Animate()},s.page3Animate=function(){this._index=3,this._headTitle.texture=RES.getRes("page3_1_png"),this.titleShow(),this.btnShow()},s.page3End=function(){this.btnHide(),this.titleHide();var t=this._car.y;this._dust.visible=!0,egret.Tween.get(this._leftShoe,{loop:!0}).to({rotation:360},1500),egret.Tween.get(this._rightShoe,{loop:!0}).to({rotation:360},1500),egret.Tween.resumeTweens(this._shape),egret.Tween.get(this._car).to({rotation:6,x:-50,y:t-10},1e3).to({rotation:6,x:Const.SWIDTH,y:t+250},2200,egret.Ease.sineIn).wait(500).call(this.page4,this)},s.page4=function(){this._lineShape.graphics.clear(),this.removeChild(this._longMovie2),this.removeChild(this._kaMovie2),this.removeChild(this._trafficLight),this._car.x=.5*-Const.SWIDTH,this._car.y=.2*Const.SHEIGHT-5,this._car.rotation=0,this._threeRound=ResourceUtils.createBitmapByName("page4_2_png"),this.addChild(this._threeRound),this._threeRound.x=0,this._threeRound.y=Const.SHEIGHT/2-this._threeRound.height+310,egret.Tween.get(this._car).to({x:-this._carAppearPos.x+50},2e3,egret.Ease.sineOut).call(this.page4Start,this)},s.page4Start=function(){this.carStop(),this._index=4,this._headTitle.texture=RES.getRes("page4_1_png"),this.titleShow(),this.btnShow(),this._navigation=ResourceUtils.createBitmapByName("page4_3_png"),this.addChild(this._navigation),this._navigation.anchorOffsetX=this._navigation.width/2,this._navigation.anchorOffsetY=this._navigation.height/2,this._navigation.x=Const.SWIDTH-170,this._navigation.y=230,this._navigation.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.navDown,this),this._navigation.addEventListener(egret.TouchEvent.TOUCH_END,this.navUp,this),this._navigation.touchEnabled=!0,this._navigation.visible=!1,egret.Tween.get(this._navigation).wait(1e3).call(this.showNav,this)},s.showNav=function(){this._navigation.visible=!0,egret.Tween.get(this._navigation,{loop:!0}).to({scaleX:1.2,scaleY:.8},300).to({scaleX:1,scaleY:1},300).wait(100)},s.navDown=function(t){this._touchStatus4=!0,this._distance.x=t.stageX-this._navigation.x,this._distance.y=t.stageY-this._navigation.y},s.navUp=function(t){this._touchStatus4=!1;var e=t.stageX,i=t.stageY,s=100,a=Const.SHEIGHT/2-100,h=Const.SHEIGHT/2+250;if(e>=s&&a>=e&&i>=a&&h>=i){var n=.7*(this._rightShoe.x-this._leftShoe.x/2)+this._car.x+170;egret.Tween.pauseTweens(this._navigation),this.removeChild(this._navigation),this._navigation=ResourceUtils.createBitmapByName("page4_3_png"),this._car.addChild(this._navigation),this._navigation.scaleX=1.428,this._navigation.scaleY=1.428,this._navigation.anchorOffsetX=this._navigation.width/2,this._navigation.anchorOffsetY=this._navigation.height/2,this._navigation.x=n,this._navigation.y=this._rightShoe.y-170,egret.Tween.get(this._navigation,{loop:!0}).to({scaleX:1.6,scaleY:1.3},300).to({scaleX:1.428,scaleY:1.428},300).wait(100),this._isCollide=!0}else this._navigation.x=Const.SWIDTH-170,this._navigation.y=230},s.page4End=function(){this._dust.visible=!0,this._navigation.touchEnabled=!1,this._navigation.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.navDown,this),this._navigation.removeEventListener(egret.TouchEvent.TOUCH_END,this.navUp,this),this.titleHide(),this.btnHide();var t=this._car.y;egret.Tween.get(this._leftShoe,{loop:!0}).to({rotation:360},1500),egret.Tween.get(this._rightShoe,{loop:!0}).to({rotation:360},1500),egret.Tween.get(this._car).to({x:90},500).to({rotation:-45,x:-40,y:t+200},1500).to({rotation:-25,x:500,y:t-240},1e3).call(this.page5,this),egret.Tween.get(this._navigation).to({rotation:-30},300).to({rotation:-28},300).to({rotation:-29},300).to({rotation:-28},300).to({rotation:-30},300),egret.Tween.resumeTweens(this._shape)},s.page5=function(){this.removeChild(this._threeRound),egret.Tween.get(this._navigation).to({rotation:-15},500).wait(1500).to({rotation:0},50).to({rotation:8},50).to({rotation:0},50),this.carAppear(),egret.Tween.get(this._car).to({x:-this._carAppearPos.x+30},2e3,egret.Ease.sineOut).to({x:-this._carAppearPos.x+50},500,egret.Ease.sineOut).to({x:-this._carAppearPos.x+70},500,egret.Ease.sineOut).call(this.page5Start,this),egret.Tween.get(this._leftShoe,{loop:!0}).wait(2e3).to({rotation:360},2e3),egret.Tween.get(this._rightShoe,{loop:!0}).wait(2e3).to({rotation:360},2e3)},s.page5Start=function(){this.carStop(),this._index=5,this._headTitle.texture=RES.getRes("page5_1_png"),this.titleShow(),this.btnShow(),this._lineShape.graphics.lineStyle(2,0)},s.page5End=function(){egret.Tween.get(this._lineShape).to({x:0,y:-50},200).to({x:-30,y:-25},200).to({x:-60,y:0},200).to({x:-30,y:25},200).to({x:0,y:50},200).to({x:30,y:25},200).to({x:60,y:0},200).to({x:30,y:-25},200).to({x:0,y:-50},200).to({x:-30,y:-25},200).to({x:-60,y:0},200).to({x:-30,y:25},200).to({x:0,y:50},200).call(this.page5Animate,this)},s.page5Animate=function(){var t=this;this.titleHide(),this._lineShape.graphics.clear(),this._gas=ResourceUtils.createBitmapByName("page5_3_png"),this.addChild(this._gas),this._gas.x=Const.SWIDTH-this._gas.width,this._gas.y=Const.SHEIGHT/2-this._gas.height/2+50,this._gas.alpha=0,egret.Tween.get(this._gas).to({alpha:1},800),egret.Tween.get(this._car).wait(1500).call(function(){t._dust.visible=!0,egret.Tween.resumeTweens(t._shape),egret.Tween.resumeTweens(t._leftShoe),egret.Tween.resumeTweens(t._rightShoe)},this).to({x:Const.SWIDTH-100},1500,egret.Ease.sineIn).call(this.carStop,this).wait(1e3).call(this.page6,this)},s.page6=function(){this.removeChild(this._gas),this.removeChild(this._lineShape),this._car.x=.5*-Const.SWIDTH,this._car.y=.2*Const.SHEIGHT-5,this._car.rotation=0,egret.Tween.get(this._car).to({x:-this._carAppearPos.x+50},1500,egret.Ease.sineOut),this.page6Start(),egret.Tween.resumeTweens(this._shape),egret.Tween.resumeTweens(this._leftShoe),egret.Tween.resumeTweens(this._rightShoe)},s.page6Start=function(){this._dust.visible=!1,this._index=6,this._milestone=ResourceUtils.createBitmapByName("page6_2_png"),this.addChild(this._milestone),this._milestone.x=Const.SWIDTH,this._milestone.y=Const.SHEIGHT/2-this._milestone.height/2+60,this._page6Title=ResourceUtils.createBitmapByName("page6_3_png"),this.addChild(this._page6Title),this._page6Title.x=Const.SWIDTH-this._milestone.width+90,this._page6Title.y=Const.SHEIGHT/2+30,this._page6Title.visible=!1;var t=new egret.TextField;t.text="",this.addChild(t),t.x=Const.SWIDTH,t.y=Const.SHEIGHT/2,this._input=t,t.width=180,t.height=100,t.size=30,t.textColor=2697513,t.verticalAlign=egret.VerticalAlign.MIDDLE,t.type=egret.TextFieldType.INPUT,t.maxChars=6,t.addEventListener(egret.FocusEvent.FOCUS_IN,function(t){this._page6Title.visible=!1},this),t.addEventListener(egret.FocusEvent.FOCUS_OUT,function(e){""==t.text&&(this._page6Title.visible=!0)},this),egret.Tween.get(this._milestone).to({x:Const.SWIDTH-this._milestone.width-30},1500,egret.Ease.sineOut).call(this.page6Show,this),egret.Tween.get(this._input).to({x:Const.SWIDTH-this._milestone.width+90},1500,egret.Ease.sineOut).call(this.page6Show,this)},s.page6Show=function(){this.carStop(),this._page6Title.visible=!0,this._headTitle.texture=RES.getRes("page6_1_png"),this.titleShow(),this.btnShow()},s.page6Hide=function(){this.btnHide(),this.titleHide(),this.removeChild(this._milestone),this._input.visible=!1,this._navigation.visible=!1},s.page7=function(){this._dust.visible=!0,this._index=7;var t=Const.SWIDTH,e=Const.SHEIGHT,i=t/2;this._car.x=.15*Const.SWIDTH,this.removeChild(this._round),this._car.y=.2*Const.SHEIGHT;var s=ResourceUtils.createBitmapByName("page2_7_png");this._car.addChild(s),s.scaleX=1.4,s.scaleY=1.4,s.x=t/2-s.width/2-130,s.y=e/2+180,egret.Tween.resumeTweens(this._shape),egret.Tween.resumeTweens(this._leftShoe),egret.Tween.resumeTweens(this._rightShoe);var a=ResourceUtils.createBitmapByName("page7_1_png");this.addChild(a),a.x=i-a.width/2,a.y=-a.height,egret.Tween.get(a).to({y:-10},500,egret.Ease.backOut).call(this.page7Title,this)},s.page7Title=function(){var t=this._winWidth,e=ResourceUtils.createBitmapByName("page7_6_png");this.addChild(e),e.x=t-e.width/2,e.y=360;var i=new egret.TextField;this.addChild(i),i.width=120,i.x=Const.SWIDTH-350,i.y=520,i.textColor=15939631,i.size=20,i.verticalAlign=egret.VerticalAlign.MIDDLE,i.text="123456";var s=ResourceUtils.createBitmapByName("page7_4_png");this.addChild(s),s.x=t,s.y=e.height+430,s.scaleX=.01,s.scaleY=.01,s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2;var a=ResourceUtils.createBitmapByName("page7_5_png");this.addChild(a),a.x=t,a.y=Const.SHEIGHT-280,a.scaleX=.01,a.scaleX=.01,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,egret.Tween.get(s).wait(200).to({scaleX:1.1,scaleY:1.1},200).to({scaleX:1,scaleY:1},200),egret.Tween.get(a).wait(600).to({scaleX:1.1,scaleY:1.1},200).to({scaleX:1,scaleY:1},200).call(this.page7Btn,this)},s.page7Btn=function(){var t=this._winWidth,e=new MyButton("page7_2_png","page7_2_png");this.addChild(e),e.x=t-e.width/2,e.y=Const.SHEIGHT-e.height/2-180,e.setClick(this.outlineCallback.bind(this));var i=new MyButton("page7_3_png","page7_3_png");this.addChild(i),i.x=t-i.width/2,i.y=Const.SHEIGHT-i.height/2-70,i.setClick(this.shareCallback.bind(this)),this._shareShape=new egret.Shape,this.addChild(this._shareShape),this._share=ResourceUtils.createBitmapByName("page7_7_png"),this.addChild(this._share),this._share.x=Const.SWIDTH-this._share.width,this._share.y=0,this._share.visible=!1},s.outlineCallback=function(){alert("领取成功！")},s.shareCallback=function(){this._shareShape.graphics.beginFill(0),this._shareShape.graphics.drawRect(0,0,Const.SWIDTH,Const.SHEIGHT),this._shareShape.graphics.endFill(),this._shareShape.x=0,this._shareShape.y=0,this._shareShape.alpha=.6,this._share.visible=!0},s.carStop=function(){this._dust.visible=!1,egret.Tween.pauseTweens(this._leftShoe),egret.Tween.pauseTweens(this._rightShoe),egret.Tween.pauseTweens(this._shape)},s.carStartMove=function(){this._dust.visible=!0,egret.Tween.get(this._leftShoe,{loop:!0}).to({rotation:360},1500),egret.Tween.get(this._rightShoe,{loop:!0}).to({rotation:360},1500),egret.Tween.resumeTweens(this._shape)},s.carAppear=function(){this._car.x=.5*-Const.SWIDTH,this._car.y=.2*Const.SHEIGHT-5,this._car.rotation=0,this._car.scaleX=.7,this._car.scaleY=.7},s.titleHide=function(){this._head.visible=!1,this._headTitle.visible=!1},s.titleShow=function(){this._headTitle.scaleX=.01,this._headTitle.scaleY=.01,this._head.visible=!0,this._headTitle.visible=!0,egret.Tween.get(this._headTitle).wait(100).to({scaleX:1,scaleY:1},400,egret.Ease.backInOut)},s.btnShow=function(){this._confirm_btn.visible=!0,this._redraw_btn.visible=!0},s.btnHide=function(){this._confirm_btn.visible=!1,this._redraw_btn.visible=!1},e}(egret.DisplayObjectContainer);egret.registerClass(GameScene,"GameScene");var GameStart=function(t){function e(){t.call(this),this.init()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.init=function(){var t=Const.SWIDTH/2,e=Const.SHEIGHT,i=ResourceUtils.createBitmapByName("page1_4_png");this.addChild(i),i.x=t-i.width/2,i.y=20;var s=ResourceUtils.createBitmapByName("page1_5_png");this.addChild(s),s.x=t-s.width/2,s.y=100;var a=RES.getRes("car_json"),h=RES.getRes("car_png"),n=new egret.MovieClipDataFactory(a,h),o=new egret.MovieClip(n.generateMovieClipData("car"));this.addChild(o),o.x=t-o.width/2,o.y=e/2-o.height/4,o.frameRate=12,o.gotoAndPlay(0,-1);var r=new MyButton("btn1_png","btn1_png");this.addChild(r),r.x=t,r.y=e-260,r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,r.setClick(this.showPage2View.bind(this)),egret.Tween.get(r,{loop:!0}).to({rotation:-6},300).to({rotation:0},300);var g=ResourceUtils.createBitmapByName("page1_1_png");this.addChild(g),g.x=t-g.width/2,g.y=e-120;var _=ResourceUtils.createBitmapByName("page1_2_png");this.addChild(_),_.x=t-_.width/2,_.y=e-140,egret.Tween.get(_,{loop:!0}).to({y:e-155},200).to({y:e-140},200)},s.showPage2View=function(){this.parent&&this.parent.removeChild(this),MainGame.game.start()},e}(egret.Sprite);egret.registerClass(GameStart,"GameStart");var MainGame=function(t){function e(){t.call(this),e.game=this,this.init()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.init=function(){var t=ResourceUtils.createBitmapByName("bg_jpg");this.addChild(t),t.width=Const.SWIDTH,t.height=Const.SHEIGHT,this.gameContainer=new egret.Sprite,this.addChild(this.gameContainer),this.showStart()},s.start=function(){this.clear(),this._gameScene=new GameScene,this.gameContainer.addChild(this._gameScene)},s.clear=function(){for(;this.gameContainer.numChildren;)this.gameContainer.removeChildAt(0)},s.showStart=function(){this.clear(),this._startScene=new GameStart,this.gameContainer.addChild(this._startScene)},e}(egret.Sprite);egret.registerClass(MainGame,"MainGame");var LoadingUI=function(t){function e(){t.call(this),this.bar1Url="resource/assets/loading_bar1.png",this.bar2Url="resource/assets/loading_bar2.png",this.carPngUrl="resource/assets/car/car.png",this.carJsonUrl="resource/assets/car/car.json",this._count=0,this.createView()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createView=function(){this._count=0;var t=Const.SWIDTH,e=Const.SHEIGHT,i=new egret.URLLoader;i.addEventListener(egret.Event.COMPLETE,this.onComplete,this),i.dataFormat=egret.URLLoaderDataFormat.TEXTURE,i.load(new egret.URLRequest(this.bar1Url));var i=new egret.URLLoader;i.addEventListener(egret.Event.COMPLETE,this.onComplete,this),i.dataFormat=egret.URLLoaderDataFormat.TEXTURE,i.load(new egret.URLRequest(this.bar2Url)),this.load(this.initMovieClip),this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=e/2,this.textField.textColor=15939631,this.textField.width=t,this.textField.height=100,this.textField.textAlign="center",this._loadingBg=new egret.Bitmap,this._loadingBar=new egret.Bitmap,this.addChild(this._loadingBg),this.addChild(this._loadingBar);var s=RES.getRes("car_json"),a=RES.getRes("car_png"),h=new egret.MovieClipDataFactory(s,a),n=new egret.MovieClip(h.generateMovieClipData("car"));this.addChild(n),n.x=t/2-n.width/2,n.y=t/2-n.height/4,n.frameRate=12,n.gotoAndPlay(0,-1)},s.onComplete=function(t){var e=t.target,i=e.data;e._request.url==this.bar1Url?(this._loadingBg.texture=i,this._loadingBg.x=Const.SWIDTH/2-this._loadingBg.width/2,this._loadingBg.y=Const.SHEIGHT/2+50):e._request.url==this.bar2Url&&(this._loadingBar.texture=i,this._loadingBar.x=Const.SWIDTH/2-this._loadingBar.width/2,this._loadingBar.y=Const.SHEIGHT/2+50,this._loadingBar.scaleX=.01)},s.setProgress=function(t,e){var i=Math.floor(t/e*100),s=t/e;this._loadingBar.scaleX=s,this.textField.text=i+"%"},s.initMovieClip=function(){var t=new egret.MovieClipDataFactory(this._mcData,this._mcTexture),e=new egret.MovieClip(t.generateMovieClipData("car"));this.addChild(e),e.x=Const.SWIDTH/2-e.width/2,e.y=Const.SHEIGHT/2-e.height/2-200,e.frameRate=12,e.gotoAndPlay(0,-1)},s.load=function(t){var e=0,i=this,s=function(){e++,2==e&&t.call(i)},a=new egret.URLLoader;a.addEventListener(egret.Event.COMPLETE,function(t){var e=t.currentTarget;this._mcTexture=e.data,s()},this),a.dataFormat=egret.URLLoaderDataFormat.TEXTURE;var h=new egret.URLRequest("resource/assets/car/car.png");a.load(h);var a=new egret.URLLoader;a.addEventListener(egret.Event.COMPLETE,function(t){var e=t.currentTarget;this._mcData=JSON.parse(e.data),s()},this),a.dataFormat=egret.URLLoaderDataFormat.TEXT;var h=new egret.URLRequest("resource/assets/car/car.json");a.load(h)},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this._audioStatus=!0,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onAddToStage=function(t){Const.SWIDTH=this.stage.stageWidth,Const.SHEIGHT=this.stage.stageHeight,this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView);var e=this._sound=new egret.Sound;e.addEventListener(egret.Event.COMPLETE,function(t){this.initSound()},this),e.load("resource/assets/bg.mp3"),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.initLoading=function(){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView);var t=this._sound=new egret.Sound;t.addEventListener(egret.Event.COMPLETE,function(t){this.initSound()},this),t.load("resource/assets/bg.mp3"),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.initSound=function(){},s.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},s.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},s.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},s.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},s.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},s.createGameScene=function(){var t=new MainGame;this.addChild(t),this._audio=new MyButton("page1_3_png","page1_3_png"),this.addChild(this._audio),this._audio.x=Const.SWIDTH-this._audio.width/2-20,this._audio.y=50,this._audio.anchorOffsetX=this._audio.width/2,this._audio.anchorOffsetY=this._audio.height/2,this._audio.setClick(this.audioCallback.bind(this)),egret.Tween.get(this._audio,{loop:!0}).to({rotation:360},800)},s.audioCallback=function(){this._audioStatus?(this._audioStatus=!1,egret.Tween.pauseTweens(this._audio),this._channel.stop(),this._channel=null):(this._audioStatus=!0,egret.Tween.resumeTweens(this._audio),this._channel=this._sound.play(0))},s.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Const=function(){function t(){}var e=(__define,t);e.prototype;return t.ALL_X_Y=[],t.ALL_Y_X=[],t}();egret.registerClass(Const,"Const");var MyButton=function(t){function e(e,i){t.call(this),this.sp=new egret.Sprite,this.addChild(this.sp),this.bg=ResourceUtils.createBitmapByName(e),this.sp.addChild(this.bg),this.title=ResourceUtils.createBitmapByName(i),null==this.title.texture&&(this.title.texture=RES.getRes(i)),this.sp.addChild(this.title)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.setClick=function(t){this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEvent,this),this.onClick=t},s.onClickEvent=function(){(this.sp.width-.8*this.sp.width)/2,(this.sp.height-.8*this.sp.height)/2;this.tw=egret.Tween.get(this.sp),this.tw.call(this.onClickHandler,this)},s.onClickHandler=function(){this.onClick()},e}(egret.Sprite);egret.registerClass(MyButton,"MyButton");var ResourceUtils=function(){function t(){}var e=(__define,t);e.prototype;return t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.createBitmapFromSheet=function(t,e){void 0===e&&(e="gameRes");var i=RES.getRes(e),s=i.getTexture(t),a=new egret.Bitmap;return a.texture=s,a},t.getTextureFromSheet=function(t,e){void 0===e&&(e="gameRes");var i=RES.getRes(e),s=i.getTexture(t);return s},t}();egret.registerClass(ResourceUtils,"ResourceUtils");