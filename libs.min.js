function __extends(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i}var egret;!function(t){function e(){return""}function i(t){throw new Error("#"+t)}function r(){}function n(){}function s(){}t.getString=e,t.$error=i,t.$warn=r,t.$markReadOnly=n,t.$markCannotUse=s}(egret||(egret={}));var egret;!function(t){function e(t,e,i){var r=t.prototype;r.__class__=e;var n=[e];i&&(n=n.concat(i));var s=r.__types__;if(r.__types__)for(var a=s.length,o=0;a>o;o++){var h=s[o];-1==n.indexOf(h)&&n.push(h)}r.__types__=n}t.registerClass=e}(egret||(egret={}));var __define=this.__define||function(t,e,i,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:r})},egret;!function(t){t.$hashCount=1;var e=function(){function e(){this.$hashCode=t.$hashCount++}var i=__define,r=e,n=r.prototype;return i(n,"hashCode",function(){return this.$hashCode}),e}();t.HashObject=e,t.registerClass(e,"egret.HashObject",["egret.IHashObject"])}(egret||(egret={}));var egret;!function(t){var e=[],i=function(i){function r(t){void 0===t&&(t=null),i.call(this),this.$EventDispatcher={0:t?t:this,1:{},2:{},3:0}}__extends(r,i);var n=r,s=n.prototype;return s.$getEventMap=function(t){var e=this.$EventDispatcher,i=t?e[2]:e[1];return i},s.addEventListener=function(t,e,i,r,n){this.$addListener(t,e,i,r,n)},s.once=function(t,e,i,r,n){this.$addListener(t,e,i,r,n,!0)},s.$addListener=function(t,e,i,r,n,s){var a=this.$EventDispatcher,o=r?a[2]:a[1],h=o[t];h?0!==a[3]&&(o[t]=h=h.concat()):h=o[t]=[],this.$insertEventBin(h,t,e,i,r,n,s)},s.$insertEventBin=function(t,e,i,r,n,s,a){s=0|+s;for(var o=-1,h=t.length,l=0;h>l;l++){var u=t[l];if(u.listener==i&&u.thisObject==r&&u.target==this)return!1;-1==o&&u.priority<s&&(o=l)}var c={type:e,listener:i,thisObject:r,priority:s,target:this,useCapture:n,dispatchOnce:!!a};return-1!==o?t.splice(o,0,c):t.push(c),!0},s.removeEventListener=function(t,e,i,r){var n=this.$EventDispatcher,s=r?n[2]:n[1],a=s[t];a&&(0!==n[3]&&(s[t]=a=a.concat()),this.$removeEventBin(a,e,i),0==a.length&&(s[t]=null))},s.$removeEventBin=function(t,e,i){for(var r=t.length,n=0;r>n;n++){var s=t[n];if(s.listener==e&&s.thisObject==i&&s.target==this)return t.splice(n,1),!0}return!1},s.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},s.willTrigger=function(t){return this.hasEventListener(t)},s.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},s.$notifyListener=function(t,i){var r=this.$EventDispatcher,n=i?r[2]:r[1],s=n[t.$type];if(!s)return!0;var a=s.length;if(0==a)return!0;var o=e;r[3]++;for(var h=0;a>h;h++){var l=s[h];if(l.listener.call(l.thisObject,t),l.dispatchOnce&&o.push(l),t.$isPropagationImmediateStopped)break}for(r[3]--;o.length;)l=o.pop(),l.target.removeEventListener(l.type,l.listener,l.thisObject,l.useCapture);return!t.$isDefaultPrevented},s.dispatchEventWith=function(e,i,r){if(i||this.hasEventListener(e)){var n=t.Event.create(t.Event,e,i);n.data=r;var s=this.dispatchEvent(n);return t.Event.release(n),s}return!0},r}(t.HashObject);t.EventDispatcher=i,t.registerClass(i,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret||(egret={}));var egret;!function(t){var e=[],i=function(i){function r(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),i.call(this),this.x=t,this.y=e,this.width=r,this.height=n}__extends(r,i);var n=__define,s=r,a=s.prototype;return r.release=function(t){t&&e.push(t)},r.create=function(){var t=e.pop();return t||(t=new r),t},n(a,"right",function(){return this.x+this.width},function(t){this.width=t-this.x}),n(a,"bottom",function(){return this.y+this.height},function(t){this.height=t-this.y}),n(a,"left",function(){return this.x},function(t){this.width+=this.x-t,this.x=t}),n(a,"top",function(){return this.y},function(t){this.height+=this.y-t,this.y=t}),n(a,"topLeft",function(){return new t.Point(this.left,this.top)},function(t){this.top=t.y,this.left=t.x}),n(a,"bottomRight",function(){return new t.Point(this.right,this.bottom)},function(t){this.bottom=t.y,this.right=t.x}),a.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},a.setTo=function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},a.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},a.intersection=function(t){return this.clone().$intersectInPlace(t)},a.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},a.$intersectInPlace=function(t){var e=this.x,i=this.y,r=t.x,n=t.y,s=Math.max(e,r),a=Math.min(e+this.width,r+t.width);if(a>=s){var o=Math.max(i,n),h=Math.min(i+this.height,n+t.height);if(h>=o)return this.setTo(s,o,a-s,h-o),this}return this.setEmpty(),this},a.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},a.isEmpty=function(){return this.width<=0||this.height<=0},a.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},a.clone=function(){return new r(this.x,this.y,this.width,this.height)},a.containsPoint=function(t){return this.x<t.x&&this.x+this.width>t.x&&this.y<t.y&&this.y+this.height>t.y},a.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,r=this.x+this.width,n=this.y+this.height;return t.x>=this.x&&t.x<r&&t.y>=this.y&&t.y<n&&e>this.x&&r>=e&&i>this.y&&n>=i},a.equals=function(t){return this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},a.inflatePoint=function(t){this.inflate(t.x,t.y)},a.offset=function(t,e){this.x+=t,this.y+=e},a.offsetPoint=function(t){this.offset(t.x,t.y)},a.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},a.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return e.setTo(i,r,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-r),e},a.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height},a.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return i*this.width+e*this.height},r}(t.HashObject);t.Rectangle=i,t.registerClass(i,"egret.Rectangle"),t.$TempRectangle=new i}(egret||(egret={}));var egret;!function(t){function e(t){return t%=360,t>180?t-=360:-180>t&&(t+=360),t}var i=function(i){function r(){i.call(this),this.$children=null,this.$parent=null,this.$stage=null,this.$nestLevel=0,this.$visible=!0,this.$displayList=null,this.$alpha=1,this.$touchEnabled=r.defaultTouchEnabled,this.$scrollRect=null,this.$blendMode=0,this.$maskedObject=null,this.$mask=null,this.$maskRect=null,this.$parentDisplayList=null,this.$renderNode=null,this.$displayFlags=2032,this.$DisplayObject={0:1,1:1,2:0,3:0,4:0,5:"",6:new t.Matrix,7:new t.Matrix,8:new t.Matrix,9:new t.Rectangle,10:new t.Rectangle,11:!1,12:0,13:0,14:NaN,15:NaN,16:0,17:0,18:0,19:null}}__extends(r,i);var n=__define,s=r,a=s.prototype;return a.$setFlags=function(t){this.$displayFlags|=t},a.$removeFlags=function(t){this.$displayFlags&=~t},a.$removeFlagsUp=function(t){if(this.$hasAnyFlags(t)){this.$removeFlags(t);var e=this.$parent;e&&e.$removeFlagsUp(t)}},a.$hasFlags=function(t){return(this.$displayFlags&t)==t},a.$propagateFlagsUp=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);var e=this.$parent;e&&e.$propagateFlagsUp(t)}},a.$propagateFlagsDown=function(t){this.$setFlags(t)},a.$hasAnyFlags=function(t){return!!(this.$displayFlags&t)},a.invalidateMatrix=function(){this.$setFlags(8),this.invalidatePosition()},a.invalidatePosition=function(){this.$invalidateTransform(),this.$propagateFlagsDown(48),this.$parent&&this.$parent.$propagateFlagsUp(4)},n(a,"name",function(){return this.$DisplayObject[5]},function(t){this.$DisplayObject[5]=t}),n(a,"parent",function(){return this.$parent}),a.$setParent=function(t){return this.$parent!=t&&(this.$parent=t,!0)},a.$onAddToStage=function(e,i){this.$stage=e,this.$nestLevel=i,this.$hasAddToStage=!0,t.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},a.$onRemoveFromStage=function(){this.$nestLevel=0,t.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},n(a,"stage",function(){return this.$stage}),n(a,"matrix",function(){return this.$getMatrix().clone()},function(t){this.$setMatrix(t)}),a.$getMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(8)&&(t[6].$updateScaleAndRotation(t[0],t[1],t[2],t[3]),this.$removeFlags(8)),t[6]},a.$setMatrix=function(t,i){void 0===i&&(i=!0);var r=this.$DisplayObject,n=r[6];return!n.equals(t)&&(n.copyFrom(t),i&&(r[0]=n.$getScaleX(),r[1]=n.$getScaleY(),r[2]=t.$getSkewX(),r[3]=t.$getSkewY(),r[16]=e(180*r[2]/Math.PI),r[17]=e(180*r[3]/Math.PI),r[4]=e(180*r[3]/Math.PI)),this.$removeFlags(8),this.invalidatePosition(),!0)},a.$getConcatenatedMatrix=function(){var e=this.$DisplayObject[7];if(this.$hasFlags(16)){this.$parent?this.$parent.$getConcatenatedMatrix().$preMultiplyInto(this.$getMatrix(),e):e.copyFrom(this.$getMatrix());var i=this.$DisplayObject,r=i[12],n=i[13],s=this.$scrollRect;s?e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-s.x-r,-s.y-n),e):(0!=r||0!=n)&&e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-r,-n),e),this.$displayList&&(this.$displayList.$renderNode.moved=!0),this.$renderNode&&(this.$renderNode.moved=!0),this.$removeFlags(16)}return e},a.$getInvertedConcatenatedMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(32)&&(this.$getConcatenatedMatrix().$invertInto(t[8]),this.$removeFlags(32)),t[8]},n(a,"x",function(){return this.$getX()},function(t){this.$setX(t)}),a.$getX=function(){return this.$DisplayObject[6].tx},a.$setX=function(t){t=+t||0;var e=this.$DisplayObject[6];return t!=e.tx&&(e.tx=t,this.invalidatePosition(),!0)},n(a,"y",function(){return this.$getY()},function(t){this.$setY(t)}),a.$getY=function(){return this.$DisplayObject[6].ty},a.$setY=function(t){t=+t||0;var e=this.$DisplayObject[6];return t!=e.ty&&(e.ty=t,this.invalidatePosition(),!0)},n(a,"scaleX",function(){return this.$getScaleX()},function(t){this.$setScaleX(t)}),a.$getScaleX=function(){return this.$DisplayObject[0]},a.$setScaleX=function(t){t=+t||0;var e=this.$DisplayObject;return t!=e[0]&&(e[0]=t,this.invalidateMatrix(),!0)},n(a,"scaleY",function(){return this.$getScaleY()},function(t){this.$setScaleY(t)}),a.$getScaleY=function(){return this.$DisplayObject[1]},a.$setScaleY=function(t){return t=+t||0,t!=this.$DisplayObject[1]&&(this.$DisplayObject[1]=t,this.invalidateMatrix(),!0)},n(a,"rotation",function(){return this.$getRotation()},function(t){this.$setRotation(t)}),a.$getRotation=function(){return this.$DisplayObject[4]},a.$setRotation=function(t){t=+t||0,t=e(t);var i=this.$DisplayObject;if(t==i[4])return!1;var r=t-i[4],n=r/180*Math.PI;return i[2]+=n,i[3]+=n,i[4]=t,this.invalidateMatrix(),!0},n(a,"skewX",function(){return this.$DisplayObject[16]},function(t){this.$setSkewX(t)}),a.$setSkewX=function(t){t=+t||0;var i=this.$DisplayObject;return t!=i[16]&&(i[16]=t,t=e(t),t=t/180*Math.PI,i[2]=t,this.invalidateMatrix(),!0)},n(a,"skewY",function(){return this.$DisplayObject[17]},function(t){this.$setSkewY(t)}),a.$setSkewY=function(t){t=+t||0;var i=this.$DisplayObject;return t!=i[17]&&(i[17]=t,t=e(t),t=t/180*Math.PI,i[3]=t,this.invalidateMatrix(),!0)},n(a,"width",function(){return this.$getWidth()},function(t){this.$setWidth(t)}),a.$getWidth=function(){return isNaN(this.$getExplicitWidth())?this.$getOriginalBounds().width:this.$getExplicitWidth()},a.$getExplicitWidth=function(){return this.$DisplayObject[14]},a.$setWidth=function(t){return this.$DisplayObject[14]=isNaN(t)?NaN:t,t=+t,!(0>t)&&(this.invalidateMatrix(),!0)},n(a,"height",function(){return this.$getHeight()},function(t){this.$setHeight(t)}),a.$getHeight=function(){return isNaN(this.$getExplicitHeight())?this.$getOriginalBounds().height:this.$getExplicitHeight()},a.$getExplicitHeight=function(){return this.$DisplayObject[15]},a.$setHeight=function(t){return this.$DisplayObject[15]=isNaN(t)?NaN:t,t=+t,!(0>t)&&(this.invalidateMatrix(),!0)},n(a,"measuredWidth",function(){return this.$getOriginalBounds().width}),n(a,"measuredHeight",function(){return this.$getOriginalBounds().height}),n(a,"anchorOffsetX",function(){return this.$DisplayObject[12]},function(t){this.$setAnchorOffsetX(t)}),a.$getAnchorOffsetX=function(){return this.$DisplayObject[12]},a.$setAnchorOffsetX=function(t){return t=+t||0,t!=this.$DisplayObject[12]&&(this.$DisplayObject[12]=t,this.invalidatePosition(),!0)},n(a,"anchorOffsetY",function(){return this.$DisplayObject[13]},function(t){this.$setAnchorOffsetY(t)}),a.$getAnchorOffsetY=function(){return this.$DisplayObject[13]},a.$setAnchorOffsetY=function(t){return t=+t||0,t!=this.$DisplayObject[13]&&(this.$DisplayObject[13]=t,this.invalidatePosition(),!0)},n(a,"visible",function(){return this.$visible},function(t){this.$setVisible(t)}),a.$setVisible=function(t){return t=!!t,t!=this.$visible&&(this.$visible=t,this.$propagateFlagsDown(1024),this.$invalidateTransform(),!0)},a.$getConcatenatedVisible=function(){var t=this.$DisplayObject;if(this.$hasFlags(1024)){if(this.$parent){var e=this.$parent.$getConcatenatedVisible();t[19]=e&&this.$visible}else t[19]=this.$visible;this.$removeFlags(1024)}return t[19]},n(a,"cacheAsBitmap",function(){return this.$DisplayObject[11]},function(t){t=!!t,this.$DisplayObject[11]=t,this.$setHasDisplayList(t)}),a.$setHasDisplayList=function(e){var i=!!this.$displayList;if(i!=e)if(e){var r=t.sys.DisplayList.create(this);r&&(this.$displayList=r,this.$parentDisplayList&&this.$parentDisplayList.markDirty(r),this.$cacheAsBitmapChanged())}else this.$displayList=null,this.$cacheAsBitmapChanged()},a.$cacheAsBitmapChanged=function(){var t=this.$displayList||this.$parentDisplayList;this.$renderNode&&t&&t.markDirty(this),this.$propagateFlagsDown(48)},n(a,"alpha",function(){return this.$alpha},function(t){this.$setAlpha(t)}),a.$setAlpha=function(t){return t=+t||0,t!=this.$alpha&&(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(),!0)},a.$getConcatenatedAlpha=function(){var t=this.$DisplayObject;if(this.$hasFlags(64)){if(this.$parent){var e=this.$parent.$getConcatenatedAlpha();t[18]=e*this.$alpha}else t[18]=this.$alpha;this.$removeFlags(64)}return t[18]},n(a,"touchEnabled",function(){return this.$getTouchEnabled()},function(t){this.$setTouchEnabled(t)}),a.$getTouchEnabled=function(){return this.$touchEnabled},a.$setTouchEnabled=function(t){return this.$touchEnabled!=t&&(this.$touchEnabled=t,!0)},n(a,"scrollRect",function(){return this.$scrollRect},function(t){this.$setScrollRect(t)}),a.$setScrollRect=function(e){return!(!e&&!this.$scrollRect)&&(e?(this.$scrollRect||(this.$scrollRect=new t.Rectangle),this.$scrollRect.copyFrom(e)):this.$scrollRect=null,this.invalidatePosition(),!0)},n(a,"blendMode",function(){return t.sys.numberToBlendMode(this.$blendMode)},function(e){var i=t.sys.blendModeToNumber(e);i!=this.$blendMode&&(this.$blendMode=i,this.$invalidateTransform())}),n(a,"mask",function(){return this.$mask?this.$mask:this.$maskRect},function(t){if(t!==this){if(t)if(t instanceof r){if(t==this.$mask)return;t.$maskedObject&&(t.$maskedObject.mask=null),t.$maskedObject=this,t.$invalidateTransform(),this.$mask=t,this.$maskRect=null}else this.$setMaskRect(t),this.$mask&&(this.$mask.$maskedObject=null,this.$mask.$invalidateTransform()),this.$mask=null;else this.$mask&&(this.$mask.$maskedObject=null,this.$mask.$invalidateTransform()),this.$mask=null,this.$maskRect=null;this.$invalidateTransform()}}),a.$setMaskRect=function(e){return!(!e&&!this.$maskRect)&&(e?(this.$maskRect||(this.$maskRect=new t.Rectangle),this.$maskRect.copyFrom(e)):this.$maskRect=null,this.invalidatePosition(),!0)},n(a,"filters",function(){return this.$DisplayObject[20]},function(t){var e=this.$DisplayObject[20];if(!e&&!t)return void(this.$DisplayObject[20]=t);if(this.$invalidateContentBounds(),this.$invalidate(!0),e&&e.length)for(var i=e.length,r=0;i>r;r++)e[r].$removeTarget(this);if(this.$DisplayObject[20]=t,t&&t.length)for(i=t.length,r=0;i>r;r++)t[r].$addTarget(this)}),a.$getFilters=function(){return this.$DisplayObject[20]},a.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},a.getBounds=function(t,e){if(void 0===e&&(e=!0),t=this.$getTransformedBounds(this,t),e){var i=this.$DisplayObject;(0!=i[12]||0!=i[13])&&(t.x-=i[12],t.y-=i[13])}return t},a.$getTransformedBounds=function(e,i){var r=this.$getOriginalBounds();if(i||(i=new t.Rectangle),i.copyFrom(r),e==this||i.isEmpty())return i;var n;if(e){n=t.$TempMatrix;var s=e.$getInvertedConcatenatedMatrix();s.$preMultiplyInto(this.$getConcatenatedMatrix(),n)}else n=this.$getConcatenatedMatrix();return n.$transformBounds(i),i},a.globalToLocal=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var r=this.$getInvertedConcatenatedMatrix();return r.transformPoint(t,e,i)},a.localToGlobal=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var r=this.$getConcatenatedMatrix();return r.transformPoint(t,e,i)},a.$invalidateContentBounds=function(){this.$invalidate(),this.$setFlags(2),this.$propagateFlagsUp(4)},a.$getOriginalBounds=function(){var t=this.$DisplayObject[9];if(this.$hasFlags(4)){t.copyFrom(this.$getContentBounds()),this.$measureChildBounds(t),this.$removeFlags(4),this.$displayList&&(this.$displayList.$renderNode.moved=!0);var e=this.$measureFiltersBounds(t);t.copyFrom(e)}return t},a.$measureChildBounds=function(t){},a.$getContentBounds=function(){var t=this.$DisplayObject[10];return this.$hasFlags(2)&&(this.$measureContentBounds(t),this.$renderNode&&(this.$renderNode.moved=!0),this.$removeFlags(2)),t},a.$measureContentBounds=function(t){},a.$invalidate=function(t){if(this.$renderNode&&!this.$hasFlags(256)){this.$setFlags(384);var e=this.$displayList?this.$displayList:this.$parentDisplayList;e&&e.markDirty(this)}},a.$invalidateTransform=function(){if(!this.$hasFlags(512)){this.$setFlags(512);var t=this.$displayList;(t||this.$renderNode)&&this.$parentDisplayList&&this.$parentDisplayList.markDirty(t||this)}},a.$getRenderNode=function(){var t=this.$renderNode;return t?(128&this.$displayFlags&&(t.cleanBeforeRender(),this.$render(),this.$removeFlags(128),t=this.$renderNode),t):null},a.$update=function(e,i){this.$removeFlagsUp(768);var r=this.$renderNode;r.renderAlpha=this.$getConcatenatedAlpha();var n=this.$getConcatenatedMatrix();if(e==t.DirtyRegionPolicy.OFF){var s=this.$displayList||this.$parentDisplayList;if(!s)return!1;var a=r.renderMatrix;a.copyFrom(n);var o=s.root;o!==this.$stage&&this.$getConcatenatedMatrixAt(o,a)}else{var h=i||this.$getContentBounds();r.renderVisible=this.$getConcatenatedVisible();var s=this.$displayList||this.$parentDisplayList,l=r.renderRegion;if(!s)return l.setTo(0,0,0,0),r.moved=!1,!1;if(!r.moved)return!1;r.moved=!1;var a=r.renderMatrix;a.copyFrom(n);var o=s.root;o!==this.$stage&&this.$getConcatenatedMatrixAt(o,a),h=this.$measureFiltersBounds(h),l.updateRegion(h,a)}return!0},a.$measureFiltersBounds=function(e){var i=this.$DisplayObject[20];if(i&&i.length){var n=i.length;r.boundsForUpdate.copyFrom(e),e=r.boundsForUpdate;for(var s=e.x,a=e.y,o=e.width,h=e.height,l=0;n>l;l++){var u=i[l];if("blur"==u.type){var c=u.blurX,d=u.blurY;s-=c,a-=d,o+=2*c,h+=2*d}else if("glow"==u.type){var c=u.blurX,d=u.blurY;s-=c,a-=d,o+=2*c,h+=2*d;var f=u.distance||0,g=u.angle||0,p=0,v=0;0!=f&&(p=Math.ceil(f*t.NumberUtils.cos(g)),v=Math.ceil(f*t.NumberUtils.sin(g)),p>0?o+=p:0>p&&(s+=p,o-=p),v>0?h+=v:0>v&&(a+=v,h-=v))}}e.x=s,e.y=a,e.width=o,e.height=h}return e},a.$getConcatenatedMatrixAt=function(e,i){var r=e.$getInvertedConcatenatedMatrix();if(0===r.a||0===r.d){var n=this,s=e.$nestLevel;for(i.identity();n.$nestLevel>s;){var a=n.$scrollRect;a&&i.concat(t.$TempMatrix.setTo(1,0,0,1,-a.x,-a.y)),i.concat(n.$getMatrix()),n=n.$parent}}else r.$preMultiplyInto(i,i)},a.$getConcatenatedAlphaAt=function(t,e){var i=t.$getConcatenatedAlpha();if(0===i){e=1;for(var r=this,n=t.$nestLevel;r.$nestLevel>n;)e*=r.$alpha,r=r.$parent}else e/=i;return e},a.$render=function(){},a.$hitTest=function(t,e){var i=this.$DisplayObject;if(!this.$renderNode||!this.$visible||0==i[0]||0==i[1])return null;var r=this.$getInvertedConcatenatedMatrix();if(0==r.a&&0==r.b&&0==r.c&&0==r.d)return null;var n=this.$getContentBounds(),s=r.a*t+r.c*e+r.tx,a=r.b*t+r.d*e+r.ty;if(n.contains(s,a)){if(!this.$children){var o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(s,a))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null}return this}return null},a.hitTestPoint=function(e,i,r){if(r){var n,s=this.$getInvertedConcatenatedMatrix(),a=s.a*e+s.c*i+s.tx,o=s.b*e+s.d*i+s.ty,h=this.$displayList;if(h){var l=h.renderBuffer;try{n=l.getPixel(a-h.offsetX,o-h.offsetY)}catch(e){throw new Error(t.sys.tr(1039))}}else{var l=t.sys.hitTestBuffer;l.resize(3,3);var u=t.Matrix.create();u.identity(),u.translate(1-a,1-o),t.sys.systemRenderer.render(this,l,u,null,!0),t.Matrix.release(u);try{n=l.getPixel(1,1)}catch(e){throw new Error(t.sys.tr(1039))}}return 0!==n[3]}var c=this.$DisplayObject;if(0==c[0]||0==c[1])return!1;var s=this.$getInvertedConcatenatedMatrix(),d=this.getBounds(null,!1),a=s.a*e+s.c*i+s.tx,o=s.b*e+s.d*i+s.ty;if(d.contains(a,o)){var f=this.$scrollRect?this.$scrollRect:this.$maskRect;return!(f&&!f.contains(a,o))}return!1},a.$addListener=function(e,n,s,a,o,h){i.prototype.$addListener.call(this,e,n,s,a,o,h);var l=e==t.Event.ENTER_FRAME;if(l||e==t.Event.RENDER){var u=l?r.$enterFrameCallBackList:r.$renderCallBackList;-1==u.indexOf(this)&&u.push(this)}},a.removeEventListener=function(e,n,s,a){i.prototype.removeEventListener.call(this,e,n,s,a);var o=e==t.Event.ENTER_FRAME;if((o||e==t.Event.RENDER)&&!this.hasEventListener(e)){var h=o?r.$enterFrameCallBackList:r.$renderCallBackList,l=h.indexOf(this);-1!==l&&h.splice(l,1)}},a.dispatchEvent=function(t){if(!t.$bubbles)return i.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),r=.5*e.length;return t.$setTarget(this),this.$dispatchPropagationEvent(t,e,r),!t.$isDefaultPrevented},a.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var i=e.concat();return i.reverse(),e=i.concat(e)},a.$dispatchPropagationEvent=function(t,e,i){for(var r=e.length,n=i-1,s=0;r>s;s++){var a=e[s];if(t.$currentTarget=a,n>s?t.$eventPhase=1:s==i||s==n?t.$eventPhase=2:t.$eventPhase=3,a.$notifyListener(t,i>s),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},a.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},r.defaultTouchEnabled=!1,r.boundsForUpdate=new t.Rectangle,r.$enterFrameCallBackList=[],r.$renderCallBackList=[],r}(t.EventDispatcher);t.DisplayObject=i,t.registerClass(i,"egret.DisplayObject",["egret.sys.Renderable"])}(egret||(egret={}));var egret;!function(t){function e(t,e,i,r,n,s,a,o,h,l,u,c){void 0===u&&(u=0),void 0===c&&(c=0);var d=a+n-h;d>0&&(n-=d),d=o+s-l,d>0&&(s-=d),t.drawImage(i,r,n/e,s/e,u+a,c+o,n,s)}var i=function(i){function r(e){i.call(this),this.$scale9Grid=null,this.$fillMode="scale",this._pixelHitTest=!1,this.$renderNode=new t.sys.BitmapNode,this.$Bitmap={0:null,1:null,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:r.defaultSmoothing,11:NaN,12:NaN},this.$setBitmapData(e)}__extends(r,i);var n=__define,s=r,a=s.prototype;return a.$onAddToStage=function(e,r){i.prototype.$onAddToStage.call(this,e,r);var n=this.$Bitmap[0];n&&t.Texture.$addDisplayObject(this,n)},a.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this);var e=this.$Bitmap[0];e&&t.Texture.$removeDisplayObject(this,e)},n(a,"bitmapData",function(){var e=this.$Bitmap[0];return e instanceof t.Texture?null:e},function(t){this.$setBitmapData(t)}),n(a,"texture",function(){var e=this.$Bitmap[0];return e instanceof t.Texture?e:null},function(t){this.$setBitmapData(t)}),a.$setBitmapData=function(e){var i=this.$Bitmap,r=i[0];if(e==r)return!1;if(i[0]=e,!e)return t.Texture.$removeDisplayObject(this,r),this.setImageData(null,0,0,0,0,0,0,0,0,0,0),this.$invalidateContentBounds(),!0;if(this.$refreshImageData(),this.$stage){if(r){var n;n=r._bitmapData&&r._bitmapData.hashCode?r._bitmapData.hashCode:r.hashCode;var s;if(s=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,n==s)return this.$invalidateContentBounds(),!0;t.Texture.$removeDisplayObject(this,r)}t.Texture.$addDisplayObject(this,e)}return this.$invalidateContentBounds(),!0},a.$refreshImageData=function(){var e=this.$Bitmap,i=e[0];if(i)if(i instanceof t.Texture){var r=i;this.setImageData(r._bitmapData,r._bitmapX,r._bitmapY,r._bitmapWidth,r._bitmapHeight,r._offsetX,r._offsetY,r.$getTextureWidth(),r.$getTextureHeight(),r._sourceWidth,r._sourceHeight)}else{var n=i.width,s=i.height;this.setImageData(i,0,0,n,s,0,0,n,s,n,s)}},a.setImageData=function(t,e,i,r,n,s,a,o,h,l,u){var c=this.$Bitmap;c[1]=t,c[2]=e,c[3]=i,c[4]=r,c[5]=n,c[6]=s,c[7]=a,c[8]=o,c[9]=h,c[13]=l,c[14]=u},n(a,"scale9Grid",function(){return this.$scale9Grid},function(t){this.$scale9Grid=t,this.$invalidateContentBounds()}),n(a,"fillMode",function(){return this.$fillMode},function(t){this.$setFillMode(t)}),a.$setFillMode=function(t){return t!=this.$fillMode&&(this.$fillMode=t,!0)},n(a,"smoothing",function(){var t=this.$Bitmap;return t[10]},function(t){t=!!t;var e=this.$Bitmap;t!=e[10]&&(e[10]=t,this.$invalidate())}),a.$setWidth=function(t){var e=this.$Bitmap;return!(0>t||t==e[11])&&(e[11]=t,this.$invalidateContentBounds(),!0)},a.$setHeight=function(t){var e=this.$Bitmap;return!(0>t||t==e[12])&&(e[12]=t,this.$invalidateContentBounds(),!0)},a.$getWidth=function(){var t=this.$Bitmap;return isNaN(t[11])?this.$getContentBounds().width:t[11]},a.$getHeight=function(){var t=this.$Bitmap;return isNaN(t[12])?this.$getContentBounds().height:t[12]},a.$measureContentBounds=function(t){var e=this.$Bitmap;if(e[1]){var e=this.$Bitmap,i=isNaN(e[11])?e[8]:e[11],r=isNaN(e[12])?e[9]:e[12];t.setTo(0,0,i,r)}else i=isNaN(e[11])?0:e[11],r=isNaN(e[12])?0:e[12],t.setTo(0,0,i,r)},a.$render=function(){var t=this.$Bitmap;if(t[1]){var e=isNaN(t[11])?t[8]:t[11],i=isNaN(t[12])?t[9]:t[12];r.$drawImage(this.$renderNode,t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],e,i,t[13],t[14],this.scale9Grid||t[0].scale9Grid,this.fillMode,t[10])}},n(a,"pixelHitTest",function(){return this._pixelHitTest},function(t){this._pixelHitTest=!!t}),a.$hitTest=function(t,e){var r=i.prototype.$hitTest.call(this,t,e);return r&&this._pixelHitTest&&(r=this.hitTestPixel(t,e)),r},a.hitTestPixel=function(e,i){var r,n=this.$getInvertedConcatenatedMatrix(),s=n.a*e+n.c*i+n.tx,a=n.b*e+n.d*i+n.ty,o=this.$displayList;if(o){var h=o.renderBuffer;try{r=h.getPixel(s-o.offsetX,a-o.offsetY)}catch(e){throw console.log(this.$Bitmap[0]),new Error(t.sys.tr(1039))}}else{var h=t.sys.hitTestBuffer;h.resize(3,3);var l=this.$getRenderNode(),u=t.Matrix.create();u.identity(),u.translate(1-s,1-a),t.sys.systemRenderer.drawNodeToBuffer(l,h,u,!0),t.Matrix.release(u);try{r=h.getPixel(1,1)}catch(e){throw console.log(this.$Bitmap[0]),new Error(t.sys.tr(1039))}}return 0===r[3]?null:this},r.$drawImage=function(i,n,s,a,o,h,l,u,c,d,f,g,p,v,m,y,T){if(n){var x=t.$TextureScaleFactor;if(i.smoothing=T,i.image=n,i.imageWidth=p,i.imageHeight=v,m)r.drawScale9GridImage(i,m,s,a,o,h,l,u,c,d,f,g);else if(y==t.BitmapFillMode.SCALE){var _=f/c,$=g/d;i.drawImage(s,a,o,h,l*_,u*$,_*o,$*h)}else if(y==t.BitmapFillMode.CLIP){var E=Math.min(c,f),b=Math.min(d,g),w=o*x,S=h*x;e(i,x,s,a,w,S,l,u,E,b)}else for(var w=o*x,S=h*x,C=0;f>C;C+=c)for(var R=0;g>R;R+=d){var E=Math.min(f-C,c),b=Math.min(g-R,d);e(i,x,s,a,w,S,l,u,E,b,C,R)}}},r.drawScale9GridImage=function(e,i,r,n,s,a,o,h,l,u,c,d){var f=s,g=a;c-=l-s*t.$TextureScaleFactor,d-=u-a*t.$TextureScaleFactor;var p=i.x-o,v=i.y-h,m=p/t.$TextureScaleFactor,y=v/t.$TextureScaleFactor,T=i.width/t.$TextureScaleFactor,x=i.height/t.$TextureScaleFactor;0==x&&(x=1,y>=g&&y--),0==T&&(T=1,m>=f&&m--);var _=r,$=_+m,E=$+T,b=f-m-T,w=n,S=w+y,C=S+x,R=g-y-x,L=b*t.$TextureScaleFactor,D=R*t.$TextureScaleFactor;if((m+b)*t.$TextureScaleFactor>c||(y+R)*t.$TextureScaleFactor>d)return void e.drawImage(r,n,s,a,o,h,c,d);var O=o,F=O+p,P=O+(c-L),I=c-p-L,M=h,A=M+v,B=M+d-D,N=d-v-D;y>0&&(m>0&&e.drawImage(_,w,m,y,O,M,p,v),T>0&&e.drawImage($,w,T,y,F,M,I,v),b>0&&e.drawImage(E,w,b,y,P,M,L,v)),x>0&&(m>0&&e.drawImage(_,S,m,x,O,A,p,N),T>0&&e.drawImage($,S,T,x,F,A,I,N),b>0&&e.drawImage(E,S,b,x,P,A,L,N)),R>0&&(m>0&&e.drawImage(_,C,m,R,O,B,p,D),T>0&&e.drawImage($,C,T,R,F,B,I,D),b>0&&e.drawImage(E,C,b,R,P,B,L,D))},r.defaultSmoothing=!0,r}(t.DisplayObject);t.Bitmap=i,t.registerClass(i,"egret.Bitmap")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.REPEAT="repeat",t.SCALE="scale",t.CLIP="clip",t}();t.BitmapFillMode=e,t.registerClass(e,"egret.BitmapFillMode")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.NORMAL="normal",t.ADD="add",t.ERASE="erase",t}();t.BlendMode=e,t.registerClass(e,"egret.BlendMode")}(egret||(egret={}));var egret;!function(t){var e;!function(t){function e(t){var e=n[t];return void 0===e?0:e}function i(t){var e=r[t];return void 0===e?"normal":e}for(var r=["normal","add","erase"],n={},s=r.length,a=0;s>a;a++){var o=r[a];n[o]=a}t.blendModeToNumber=e,t.numberToBlendMode=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.NONE="none",t.ROUND="round",t.SQUARE="square",t}();t.CapsStyle=e,t.registerClass(e,"egret.CapsStyle")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.OFF="off",t.ON="on",t}();t.DirtyRegionPolicy=e,t.registerClass(e,"egret.DirtyRegionPolicy")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$touchChildren=!0,this.$children=[]}__extends(i,e);var r=__define,n=i,s=n.prototype;return s.$propagateFlagsDown=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);for(var e=this.$children,i=0;i<e.length;i++)e[i].$propagateFlagsDown(t)}},r(s,"numChildren",function(){return this.$children.length}),s.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},s.addChildAt=function(t,e){return e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},s.$doAddChild=function(e,r,n){void 0===n&&(n=!0);var s=e.$parent;if(s==this)return this.doSetChildIndex(e,r),e;s&&s.removeChild(e),this.$children.splice(r,0,e),e.$setParent(this);var a=this.$stage;if(a&&e.$onAddToStage(a,this.$nestLevel+1),n&&e.dispatchEventWith(t.Event.ADDED,!0),a)for(var o=i.$EVENT_ADD_TO_STAGE_LIST;o.length;){var h=o.shift();h.$stage&&n&&h.dispatchEventWith(t.Event.ADDED_TO_STAGE)}var l=this.$displayList||this.$parentDisplayList;return this.assignParentDisplayList(e,l,l),e.$propagateFlagsDown(1648),this.$propagateFlagsUp(4),this.$childAdded(e,r),e},s.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},s.getChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$children[t]:null},s.getChildIndex=function(t){return this.$children.indexOf(t)},s.getChildByName=function(t){for(var e,i=this.$children,r=i.length,n=0;r>n;n++)if(e=i[n],e.name==t)return e;return null},s.removeChild=function(t){var e=this.$children.indexOf(t);return e>=0?this.$doRemoveChild(e):null},s.removeChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$doRemoveChild(t):null},s.$doRemoveChild=function(e,r){void 0===r&&(r=!0),e=0|+e;var n=this.$children,s=n[e];if(this.$childRemoved(s,e),r&&s.dispatchEventWith(t.Event.REMOVED,!0),this.$stage){s.$onRemoveFromStage();for(var a=i.$EVENT_REMOVE_FROM_STAGE_LIST;a.length>0;){var o=a.shift();r&&o.$hasAddToStage&&(o.$hasAddToStage=!1,o.dispatchEventWith(t.Event.REMOVED_FROM_STAGE)),o.$hasAddToStage=!1,o.$stage=null}}var h=this.$displayList||this.$parentDisplayList;this.assignParentDisplayList(s,h,null),s.$propagateFlagsDown(1648),s.$setParent(null);var l=n.indexOf(s);return n.splice(l,1),this.$propagateFlagsUp(4),s},s.setChildIndex=function(t,e){
e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},s.doSetChildIndex=function(t,e){var i=this.$children.indexOf(t);i!=e&&(this.$childRemoved(t,i),this.$children.splice(i,1),this.$children.splice(e,0,t),this.$childAdded(t,e),t.$invalidateTransform(),this.$propagateFlagsUp(4))},s.swapChildrenAt=function(t,e){t=0|+t,e=0|+e,t>=0&&t<this.$children.length&&e>=0&&e<this.$children.length&&this.doSwapChildrenAt(t,e)},s.swapChildren=function(t,e){var i=this.$children.indexOf(t),r=this.$children.indexOf(e);-1==i||-1==r||this.doSwapChildrenAt(i,r)},s.doSwapChildrenAt=function(t,e){if(t>e){var i=e;e=t,t=i}else if(t==e)return;var r=this.$children,n=r[t],s=r[e];this.$childRemoved(n,t),this.$childRemoved(s,e),r[t]=s,r[e]=n,this.$childAdded(s,t),this.$childAdded(n,e),n.$invalidateTransform(),s.$invalidateTransform(),this.$propagateFlagsUp(4)},s.removeChildren=function(){for(var t=this.$children,e=t.length-1;e>=0;e--)this.$doRemoveChild(e)},s.$childAdded=function(t,e){},s.$childRemoved=function(t,e){},s.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i);var r=this.$children,n=r.length;i++;for(var s=0;n>s;s++){var a=this.$children[s];a.$onAddToStage(t,i)}},s.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,i=t.length,r=0;i>r;r++){var n=t[r];n.$onRemoveFromStage()}},s.$measureChildBounds=function(e){var i=this.$children,r=i.length;if(0!=r){for(var n=0,s=0,a=0,o=0,h=!1,l=-1;r>l;l++){var u=-1==l?e:i[l].$getTransformedBounds(this,t.$TempRectangle);u.isEmpty()||(h?(n=Math.min(n,u.x),s=Math.max(s,u.x+u.width),a=Math.min(a,u.y),o=Math.max(o,u.y+u.height)):(h=!0,n=u.x,s=n+u.width,a=u.y,o=a+u.height))}e.setTo(n,a,s-n,o-a)}},r(s,"touchChildren",function(){return this.$getTouchChildren()},function(t){this.$setTouchChildren(!!t)}),s.$getTouchChildren=function(){return this.$touchChildren},s.$setTouchChildren=function(t){return this.$touchChildren!=t&&(this.$touchChildren=t,!0)},s.$invalidate=function(t){if(e.prototype.$invalidate.call(this,t),t){var i=this.$displayList||this.$parentDisplayList,r=this.$children;if(r)for(var n=r.length-1;n>=0;n--)this.markChildDirty(r[n],i)}},s.$invalidateTransform=function(){this.markChildDirty(this,this.$parentDisplayList)},s.markChildDirty=function(t,e){if(!t.$hasFlags(512)){t.$setFlags(512);var i=t.$displayList;if((i||t.$renderNode)&&e&&e.markDirty(i||t),!i){var r=t.$children;if(r)for(var n=r.length-1;n>=0;n--)this.markChildDirty(r[n],e)}}},s.$cacheAsBitmapChanged=function(){e.prototype.$cacheAsBitmapChanged.call(this);for(var t=this.$displayList||this.$parentDisplayList,i=this.$children,r=i.length-1;r>=0;r--)this.assignParentDisplayList(i[r],t,t)},s.assignParentDisplayList=function(t,e,i){t.$parentDisplayList=i,t.$setFlags(512);var r=t.$displayList;if((t.$renderNode||r)&&e&&e.markDirty(r||t),!r){var n=t.$children;if(n)for(var s=n.length-1;s>=0;s--)this.assignParentDisplayList(n[s],e,i)}},s.$hitTest=function(t,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*t+r.c*i+r.tx,s=r.b*t+r.d*i+r.ty,a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(n,s))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var o=this.$children,h=!1,l=o.length-1;l>=0;l--){var u=o[l];if(!u.$maskedObject){var c=u.$hitTest(t,i);if(c){if(h=!0,c.$touchEnabled)break;c=null}}}return c?this.$touchChildren?c:this:h?this:e.prototype.$hitTest.call(this,t,i)},s.$setAlpha=function(t){return t=+t||0,t!=this.$alpha&&(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(),this.$invalidateAllChildren(),!0)},s.$invalidateAllChildren=function(){var t=this.$children;if(t)for(var e=t.length-1;e>=0;e--){var i=t[e];i.$invalidate(),i.$children&&i.$invalidateAllChildren()}},i.$EVENT_ADD_TO_STAGE_LIST=[],i.$EVENT_REMOVE_FROM_STAGE_LIST=[],i}(t.DisplayObject);t.DisplayObjectContainer=e,t.registerClass(e,"egret.DisplayObjectContainer")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.LINEAR="linear",t.RADIAL="radial",t}();t.GradientType=e,t.registerClass(e,"egret.GradientType")}(egret||(egret={}));var egret;!function(t){function e(t){return t%=2*Math.PI,0>t&&(t+=2*Math.PI),t}var i=function(i){function r(){i.call(this),this.lastX=0,this.lastY=0,this.fillPath=null,this.strokePath=null,this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=0,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.includeLastPosition=!0,this.$renderNode=new t.sys.GraphicsNode}__extends(r,i);var n=r,s=n.prototype;return s.$setTarget=function(t){this.targetDisplay&&(this.targetDisplay.$renderNode=null),t.$renderNode=this.$renderNode,this.targetDisplay=t},s.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},s.beginFill=function(t,e){void 0===e&&(e=1),t=+t||0,e=+e||0,this.fillPath=this.$renderNode.beginFill(t,e,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},s.beginGradientFill=function(t,e,i,r,n){void 0===n&&(n=null),this.fillPath=this.$renderNode.beginGradientFill(t,e,i,r,n,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},s.endFill=function(){this.fillPath=null},s.lineStyle=function(t,e,i,r,n,s,a,o){void 0===t&&(t=NaN),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=!1),void 0===n&&(n="normal"),void 0===s&&(s=null),void 0===a&&(a=null),void 0===o&&(o=3),t=+t||0,0>=t?(this.strokePath=null,this.setStrokeWidth(0)):(e=+e||0,i=+i||0,o=+o||0,this.setStrokeWidth(t),this.strokePath=this.$renderNode.lineStyle(t,e,i,s,a,o),this.$renderNode.drawData.length>1&&this.strokePath.moveTo(this.lastX,this.lastY))},s.drawRect=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0;var n=this.fillPath,s=this.strokePath;n&&n.drawRect(t,e,i,r),s&&s.drawRect(t,e,i,r),this.extendBoundsByPoint(t+i,e+r),this.updatePosition(t,e),this.$renderNode.dirtyRender=!0},s.drawRoundRect=function(t,e,i,r,n,s){t=+t||0,e=+e||0,i=+i||0,r=+r||0,n=+n||0,s=+s||0;var a=this.fillPath,o=this.strokePath;a&&a.drawRoundRect(t,e,i,r,n,s),o&&o.drawRoundRect(t,e,i,r,n,s);var h=.5*n|0,l=s?.5*s|0:h,u=t+i,c=e+r,d=c-l;this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(u,c),this.updatePosition(u,d),this.$renderNode.dirtyRender=!0},s.drawCircle=function(t,e,i){t=+t||0,e=+e||0,i=+i||0;var r=this.fillPath,n=this.strokePath;r&&r.drawCircle(t,e,i),n&&n.drawCircle(t,e,i),this.extendBoundsByPoint(t-i,e-i),this.extendBoundsByPoint(t+i,e+i),this.updatePosition(t+i,e),this.$renderNode.dirtyRender=!0},s.drawEllipse=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0;var n=this.fillPath,s=this.strokePath;n&&n.drawEllipse(t,e,i,r),s&&s.drawEllipse(t,e,i,r),this.extendBoundsByPoint(t+i,e+r),this.updatePosition(t,e),this.$renderNode.dirtyRender=!0},s.moveTo=function(t,e){t=+t||0,e=+e||0;var i=this.fillPath,r=this.strokePath;i&&i.moveTo(t,e),r&&r.moveTo(t,e),this.includeLastPosition=!1,this.lastX=t,this.lastY=e,this.$renderNode.dirtyRender=!0},s.lineTo=function(t,e){t=+t||0,e=+e||0;var i=this.fillPath,r=this.strokePath;i&&i.lineTo(t,e),r&&r.lineTo(t,e),this.updatePosition(t,e),this.$renderNode.dirtyRender=!0},s.curveTo=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0;var n=this.fillPath,s=this.strokePath;n&&n.curveTo(t,e,i,r),s&&s.curveTo(t,e,i,r),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,r),this.updatePosition(i,r),this.$renderNode.dirtyRender=!0},s.cubicCurveTo=function(t,e,i,r,n,s){t=+t||0,e=+e||0,i=+i||0,r=+r||0,n=+n||0,s=+s||0;var a=this.fillPath,o=this.strokePath;a&&a.cubicCurveTo(t,e,i,r,n,s),o&&o.cubicCurveTo(t,e,i,r,n,s),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,r),this.extendBoundsByPoint(n,s),this.updatePosition(n,s),this.$renderNode.dirtyRender=!0},s.drawArc=function(t,i,r,n,s,a){if(!(0>r||n===s)){t=+t||0,i=+i||0,r=+r||0,n=+n||0,s=+s||0,a=!!a,n=e(n),s=e(s);var o=this.fillPath,h=this.strokePath;o&&o.drawArc(t,i,r,n,s,a),h&&h.drawArc(t,i,r,n,s,a),a?this.arcBounds(t,i,r,s,n):this.arcBounds(t,i,r,n,s);var l=t+Math.cos(s)*r,u=i+Math.sin(s)*r;this.updatePosition(l,u),this.$renderNode.dirtyRender=!0}},s.arcBounds=function(t,e,i,r,n){var s=Math.PI;if(Math.abs(r-n)<.01)return this.extendBoundsByPoint(t-i,e-i),void this.extendBoundsByPoint(t+i,e+i);r>n&&(n+=2*s);for(var a=Math.cos(r)*i,o=Math.cos(n)*i,h=Math.min(a,o),l=Math.max(a,o),u=Math.sin(r)*i,c=Math.sin(n)*i,d=Math.min(u,c),f=Math.max(u,c),g=r/(.5*s),p=n/(.5*s),v=Math.ceil(g);p>=v;v++)switch(v%4){case 0:l=i;break;case 1:f=i;break;case 2:h=-i;break;case 3:d=-i}h=Math.floor(h),d=Math.floor(d),l=Math.ceil(l),f=Math.ceil(f),this.extendBoundsByPoint(h+t,d+e),this.extendBoundsByPoint(l+t,f+e)},s.clear=function(){this.$renderNode.clear(),this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.$renderNode.dirtyRender=!0},s.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},s.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},s.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},s.updateNodeBounds=function(){var t=this.$renderNode;t.x=this.minX,t.y=this.minY,t.width=Math.ceil(this.maxX-this.minX),t.height=Math.ceil(this.maxY-this.minY)},s.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e),this.targetDisplay.$invalidateContentBounds()},s.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},s.$hitTest=function(e,i){var r=this.targetDisplay,n=r.$getInvertedConcatenatedMatrix(),s=n.a*e+n.c*i+n.tx,a=n.b*e+n.d*i+n.ty,o=t.sys.hitTestBuffer;o.resize(3,3);var h=this.$renderNode,l=t.Matrix.create();l.identity(),l.translate(1-s,1-a),t.sys.systemRenderer.drawNodeToBuffer(h,o,l,!0),t.Matrix.release(l);try{var u=o.getPixel(1,1)}catch(e){throw new Error(t.sys.tr(1039))}return 0===u[3]?null:r},r}(t.HashObject);t.Graphics=i,t.registerClass(i,"egret.Graphics")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.BEVEL="bevel",t.MITER="miter",t.ROUND="round",t}();t.JointStyle=e,t.registerClass(e,"egret.JointStyle")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){e.call(this,i),this._verticesDirty=!0,this._bounds=new t.Rectangle,this.$renderNode=new t.sys.MeshNode}__extends(i,e);var r=i,n=r.prototype;return n.$render=function(){var e=this.$Bitmap,i=e[1];if(i){var r=(t.$TextureScaleFactor,this.$renderNode);r.smoothing=e[10],r.image=i,r.imageWidth=e[13],r.imageHeight=e[14];var n=isNaN(e[11])?e[8]:e[11],s=isNaN(e[12])?e[9]:e[12],a=n/e[8],o=s/e[9],h=e[4],l=e[5];r.drawMesh(e[2],e[3],h,l,e[6]*a,e[7]*o,a*h,o*l)}},n.$updateVertices=function(){this._verticesDirty=!0,this.$invalidateContentBounds()},n.$measureContentBounds=function(t){if(this._verticesDirty){this._verticesDirty=!1;var e=this.$renderNode,i=e.vertices;if(i.length){this._bounds.setTo(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE);for(var r=0,n=i.length;n>r;r+=2){var s=i[r],a=i[r+1];this._bounds.x>s&&(this._bounds.x=s),this._bounds.width<s&&(this._bounds.width=s),this._bounds.y>a&&(this._bounds.y=a),this._bounds.height<a&&(this._bounds.height=a)}this._bounds.width-=this._bounds.x,this._bounds.height-=this._bounds.y}else this._bounds.setTo(0,0,0,0);e.bounds.copyFrom(this._bounds)}t.copyFrom(this._bounds)},i}(t.Bitmap);t.Mesh=e,t.registerClass(e,"egret.Mesh")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.AUTO="auto",t.PORTRAIT="portrait",t.LANDSCAPE="landscape",t.LANDSCAPE_FLIPPED="landscapeFlipped",t}();t.OrientationMode=e,t.registerClass(e,"egret.OrientationMode")}(egret||(egret={}));var egret;!function(t){t.$TextureScaleFactor=1;var e=function(e){function i(){e.call(this),this._bitmapX=0,this._bitmapY=0,this._bitmapWidth=0,this._bitmapHeight=0,this._offsetX=0,this._offsetY=0,this._textureWidth=0,this._textureHeight=0,this._sourceWidth=0,this._sourceHeight=0,this._bitmapData=null}__extends(i,e);var r=__define,n=i,s=n.prototype;return r(s,"textureWidth",function(){return this.$getTextureWidth()}),s.$getTextureWidth=function(){return this._textureWidth},r(s,"textureHeight",function(){return this.$getTextureHeight()}),s.$getTextureHeight=function(){return this._textureHeight},s.$getScaleBitmapWidth=function(){return this._bitmapWidth*t.$TextureScaleFactor},s.$getScaleBitmapHeight=function(){return this._bitmapHeight*t.$TextureScaleFactor},r(s,"bitmapData",function(){return this._bitmapData}),s._setBitmapData=function(e){this._bitmapData=e;var i=e.width*t.$TextureScaleFactor,r=e.height*t.$TextureScaleFactor;this.$initData(0,0,i,r,0,0,i,r,i,r)},s.$initData=function(e,r,n,s,a,o,h,l,u,c){var d=t.$TextureScaleFactor;this._bitmapX=e/d,this._bitmapY=r/d,this._bitmapWidth=n/d,this._bitmapHeight=s/d,this._offsetX=a,this._offsetY=o,this._textureWidth=h,this._textureHeight=l,this._sourceWidth=u,this._sourceHeight=c,i.$invalidate(this)},s.getPixel32=function(t,e){throw new Error},s.toDataURL=function(t,e){throw new Error},s.saveToFile=function(t,e,i){throw new Error},s.dispose=function(){this._bitmapData&&(t.Capabilities.runtimeType==t.RuntimeType.WEB&&"webgl"==t.Capabilities.renderMode&&t.WebGLUtils.deleteWebGLTexture(this._bitmapData),this._bitmapData.dispose&&this._bitmapData.dispose(),i.$dispose(this),this._bitmapData=null)},i.$addDisplayObject=function(t,e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode){if(!i._displayList[r])return void(i._displayList[r]=[t]);var n=i._displayList[r];n.indexOf(t)<0&&n.push(t)}},i.$removeDisplayObject=function(t,e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,r&&i._displayList[r]){var n=i._displayList[r],s=n.indexOf(t);s>=0&&n.splice(s)}},i.$invalidate=function(e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,r&&i._displayList[r])for(var n=i._displayList[r],s=0;s<n.length;s++)n[s]instanceof t.Bitmap&&n[s].$refreshImageData(),n[s].$invalidateContentBounds()},i.$dispose=function(e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,r&&i._displayList[r]){for(var n=i._displayList[r],s=0;s<n.length;s++)n[s]instanceof t.Bitmap&&(n[s].$Bitmap[1]=null),n[s].$invalidateContentBounds();delete i._displayList[r]}},i._displayList={},i}(t.HashObject);t.Texture=e,t.registerClass(e,"egret.Texture")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.renderBuffer=new t.sys.RenderBuffer,this._setBitmapData(this.renderBuffer.surface)}__extends(i,e);var r=i,n=r.prototype;return n.drawToTexture=function(e,i,r){if(void 0===r&&(r=1),i&&(0==i.width||0==i.height))return!1;var n=i||e.$getOriginalBounds();if(0==n.width||0==n.height)return!1;r/=t.$TextureScaleFactor;var s=(n.x+n.width)*r,a=(n.y+n.height)*r;i&&(s=n.width*r,a=n.height*r);var o=this.renderBuffer;if(!o)return!1;o.resize(s,a);var h=t.Matrix.create();return h.identity(),i&&h.translate(-i.x,-i.y),h.scale(r,r),t.sys.systemRenderer.render(e,o,h,null,!0),t.Matrix.release(h),this.$initData(0,0,s,a,0,0,s,a,s,a),e.$propagateFlagsDown(128),!0},n.getPixel32=function(e,i){var r;if(this.renderBuffer){var n=t.$TextureScaleFactor;e=Math.round(e/n),i=Math.round(i/n),r=this.renderBuffer.getPixel(e,i)}return r},n.dispose=function(){e.prototype.dispose.call(this),this.renderBuffer=null},i}(t.Texture);t.RenderTexture=e,t.registerClass(e,"egret.RenderTexture")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$graphics=new t.Graphics,this.$graphics.$setTarget(this)}__extends(i,e);var r=__define,n=i,s=n.prototype;return r(s,"graphics",function(){return this.$graphics}),s.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},s.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);return r==this&&(r=this.$graphics.$hitTest(t,i)),r},i}(t.DisplayObject);t.Shape=e,t.registerClass(e,"egret.Shape")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$graphics=new t.Graphics,this.$graphics.$setTarget(this)}__extends(i,e);var r=__define,n=i,s=n.prototype;return r(s,"graphics",function(){return this.$graphics}),s.$hitTest=function(e,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*e+r.c*i+r.tx,s=r.b*e+r.d*i+r.ty,a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(n,s))return null;if(this.$mask&&!this.$mask.$hitTest(e,i))return null;for(var o=this.$children,h=!1,l=o.length-1;l>=0;l--){var u=o[l];if(!u.$maskedObject){var c=u.$hitTest(e,i);if(c){if(h=!0,c.$touchEnabled)break;c=null}}}return c?this.$touchChildren?c:this:h?this:(c=t.DisplayObject.prototype.$hitTest.call(this,e,i),c&&(c=this.$graphics.$hitTest(e,i)),c)},s.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i}(t.DisplayObjectContainer);t.Sprite=e,t.registerClass(e,"egret.Sprite")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t){e.call(this),this._bitmapX=0,this._bitmapY=0,this._textureMap={},this.$texture=t,this._bitmapX=t._bitmapX-t._offsetX,this._bitmapY=t._bitmapY-t._offsetY}__extends(i,e);var r=i,n=r.prototype;return n.getTexture=function(t){return this._textureMap[t]},n.createTexture=function(e,i,r,n,s,a,o,h,l){void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=a+n),void 0===l&&(l=o+s);var u=new t.Texture;return u._bitmapData=this.$texture._bitmapData,u.$initData(this._bitmapX+i,this._bitmapY+r,n,s,a,o,h,l,this.$texture._sourceWidth,this.$texture._sourceHeight),this._textureMap[e]=u,u},n.dispose=function(){this.$texture&&this.$texture.dispose()},i}(t.HashObject);t.SpriteSheet=e,t.registerClass(e,"egret.SpriteSheet")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$stageWidth=0,this.$stageHeight=0,this.implMap={},this.$scaleMode=t.StageScaleMode.SHOW_ALL,this.$orientation=t.OrientationMode.AUTO,this.$maxTouches=99,this.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,this.$stage=this,this.$nestLevel=1}__extends(i,e);var r=__define,n=i,s=n.prototype;return r(s,"frameRate",function(){return t.sys.$ticker.$frameRate},function(e){t.sys.$ticker.$setFrameRate(e)}),r(s,"stageWidth",function(){return this.$stageWidth}),r(s,"stageHeight",function(){return this.$stageHeight}),s.invalidate=function(){t.sys.$invalidateRenderFlag=!0},s.registerImplementation=function(t,e){this.implMap[t]=e},s.getImplementation=function(t){return this.implMap[t]},r(s,"scaleMode",function(){return this.$scaleMode},function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())}),r(s,"orientation",function(){return this.$orientation},function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())}),r(s,"textureScaleFactor",function(){return t.$TextureScaleFactor},function(e){t.$TextureScaleFactor=e}),r(s,"maxTouches",function(){return this.$maxTouches},function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())}),r(s,"dirtyRegionPolicy",function(){return this.$dirtyRegionPolicy},function(t){this.$dirtyRegionPolicy!=t&&(this.$dirtyRegionPolicy=t,this.$displayList.setDirtyRegionPolicy(t))}),s.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i}(t.DisplayObjectContainer);t.Stage=e,t.registerClass(e,"egret.Stage")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r,n){t.call(this),this.$eventPhase=2,this.$currentTarget=null,this.$target=null,this.$isDefaultPrevented=!1,this.$isPropagationStopped=!1,this.$isPropagationImmediateStopped=!1,this.$type=e,this.$bubbles=!!i,this.$cancelable=!!r,this.data=n}__extends(e,t);var i=__define,r=e,n=r.prototype;return i(n,"type",function(){return this.$type}),i(n,"bubbles",function(){return this.$bubbles}),i(n,"cancelable",function(){return this.$cancelable}),i(n,"eventPhase",function(){return this.$eventPhase}),i(n,"currentTarget",function(){return this.$currentTarget}),i(n,"target",function(){return this.$target}),n.$setTarget=function(t){return this.$target=t,!0},n.isDefaultPrevented=function(){return this.$isDefaultPrevented},n.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},n.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},n.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},n.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},e.dispatchEvent=function(t,i,r,n){void 0===r&&(r=!1);var s=e.create(e,i,r),a=e._getPropertyData(e);void 0!=n&&(a.data=n);var o=t.dispatchEvent(s);return e.release(s),o},e._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},e.create=function(t,e,i,r){var n=t.eventPool;if(n||(n=t.eventPool=[]),n.length){var s=n.pop();return s.$type=e,s.$bubbles=!!i,s.$cancelable=!!r,s.$isDefaultPrevented=!1,s.$isPropagationStopped=!1,s.$isPropagationImmediateStopped=!1,s.$eventPhase=2,s}return new t(e,i,r)},e.release=function(t){t.clean();var e=Object.getPrototypeOf(t).constructor;e.eventPool.push(t)},e.ADDED_TO_STAGE="addedToStage",e.REMOVED_FROM_STAGE="removedFromStage",e.ADDED="added",e.REMOVED="removed",e.ENTER_FRAME="enterFrame",e.RENDER="render",e.RESIZE="resize",e.CHANGE="change",e.CHANGING="changing",e.COMPLETE="complete",e.LOOP_COMPLETE="loopComplete",e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e.ENDED="ended",e.ACTIVATE="activate",e.DEACTIVATE="deactivate",e.CLOSE="close",e.CONNECT="connect",e.LEAVE_STAGE="leaveStage",e.SOUND_COMPLETE="soundComplete",e}(t.HashObject);t.Event=e,t.registerClass(e,"egret.Event")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1),t.call(this,e,i,r)}__extends(e,t);var i=e;return i.prototype,e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e}(t.Event);t.FocusEvent=e,t.registerClass(e,"egret.FocusEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=e;return i.prototype,e.PERMISSION_DENIED="permissionDenied",e.UNAVAILABLE="unavailable",e}(t.Event);t.GeolocationEvent=e,t.registerClass(e,"egret.GeolocationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1),e.call(this,t,i,r),this._status=0}__extends(i,e);var r=__define,n=i,s=n.prototype;return r(s,"status",function(){return this._status}),i.dispatchHTTPStatusEvent=function(e,r){var n=t.Event.create(i,i.HTTP_STATUS);n._status=r;var s=e.dispatchEvent(n);return t.Event.release(n),s},i.HTTP_STATUS="httpStatus",i}(t.Event);t.HTTPStatusEvent=e,t.registerClass(e,"egret.HTTPStatusEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1),e.call(this,t,i,r)}__extends(i,e);var r=i;return r.prototype,i.dispatchIOErrorEvent=function(e){var r=t.Event.create(i,i.IO_ERROR),n=e.dispatchEvent(r);return t.Event.release(r),n},i.IO_ERROR="ioError",i}(t.Event);t.IOErrorEvent=e,t.registerClass(e,"egret.IOErrorEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=e;return i.prototype,e}(t.Event);t.MotionEvent=e,t.registerClass(e,"egret.MotionEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=e;return i.prototype,e}(t.Event);t.OrientationEvent=e,t.registerClass(e,"egret.OrientationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r,n,s){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===n&&(n=0),void 0===s&&(s=0),e.call(this,t,i,r),this.bytesLoaded=0,this.bytesTotal=0,this.bytesLoaded=n,this.bytesTotal=s}__extends(i,e);var r=i;return r.prototype,i.dispatchProgressEvent=function(e,r,n,s){void 0===n&&(n=0),void 0===s&&(s=0);var a=t.Event.create(i,r);a.bytesLoaded=n,a.bytesTotal=s;var o=e.dispatchEvent(a);return t.Event.release(a),o},i.PROGRESS="progress",i.SOCKET_DATA="socketData",i}(t.Event);t.ProgressEvent=e,t.registerClass(e,"egret.ProgressEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1),e.call(this,t,i,r)}__extends(i,e);var r=i;return r.prototype,i.dispatchStageOrientationEvent=function(e,r){var n=t.Event.create(i,r),s=e.dispatchEvent(n);return t.Event.release(n),s},i.ORIENTATION_CHANGE="orientationChange",i}(t.Event);t.StageOrientationEvent=e,t.registerClass(e,"egret.StageOrientationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r,n){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===n&&(n=""),e.call(this,t,i,r),this.text=n}__extends(i,e);var r=i;return r.prototype,i.dispatchTextEvent=function(e,r,n){var s=t.Event.create(i,r);s.text=n;var a=e.dispatchEvent(s);return t.Event.release(s),a},i.LINK="link",i}(t.Event);t.TextEvent=e,t.registerClass(e,"egret.TextEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){e.call(this,t,i,r)}__extends(i,e);var r=i,n=r.prototype;return n.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},i.dispatchTimerEvent=function(e,r,n,s){var a=t.Event.create(i,r,n,s),o=e.dispatchEvent(a);return t.Event.release(a),o},i.TIMER="timer",i.TIMER_COMPLETE="timerComplete",i}(t.Event);t.TimerEvent=e,t.registerClass(e,"egret.TimerEvent")}(egret||(egret={}));var egret;!function(t){var e=[],i=Math.PI/180,r=function(r){function n(t,e){void 0===t&&(t=0),void 0===e&&(e=0),r.call(this),this.x=t,this.y=e}__extends(n,r);var s=__define,a=n,o=a.prototype;return n.release=function(t){t&&e.push(t)},n.create=function(t,i){var r=e.pop();return r||(r=new n),r.setTo(t,i)},s(o,"length",function(){return Math.sqrt(this.x*this.x+this.y*this.y)}),o.setTo=function(t,e){return this.x=t,this.y=e,this},o.clone=function(){return new n(this.x,this.y)},o.equals=function(t){return this.x==t.x&&this.y==t.y},n.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},o.copyFrom=function(t){this.x=t.x,this.y=t.y},o.add=function(t){return new n(this.x+t.x,this.y+t.y)},n.interpolate=function(t,e,i){var r=1-i;return new n(t.x*i+e.x*r,t.y*i+e.y*r)},o.normalize=function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}},o.offset=function(t,e){this.x+=t,this.y+=e},n.polar=function(e,r){return new n(e*t.NumberUtils.cos(r/i),e*t.NumberUtils.sin(r/i))},o.subtract=function(t){return new n(this.x-t.x,this.y-t.y)},o.toString=function(){return"(x="+this.x+", y="+this.y+")"},n}(t.HashObject);t.Point=r,t.registerClass(r,"egret.Point"),t.$TempPoint=new r}(egret||(egret={}));var egret;!function(t){var e=new t.Point,i=function(i){function r(t,e,r,n,s,a){i.call(this,t,e,r),this.targetChanged=!0,this.touchDown=!1,this.$initTo(n,s,a)}__extends(r,i);var n=__define,s=r,a=s.prototype;return a.$initTo=function(t,e,i){this.touchPointID=+i||0,this.$stageX=+t||0,this.$stageY=+e||0},n(a,"stageX",function(){return this.$stageX}),n(a,"stageY",function(){return this.$stageY}),n(a,"localX",function(){return this.targetChanged&&this.getLocalXY(),this._localX}),n(a,"localY",function(){return this.targetChanged&&this.getLocalXY(),this._localY}),a.getLocalXY=function(){this.targetChanged=!1;var t=this.$target.$getInvertedConcatenatedMatrix();t.transformPoint(this.$stageX,this.$stageY,e),this._localX=e.x,this._localY=e.y},a.$setTarget=function(t){return this.$target=t,this.targetChanged=!!t,!0},a.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},r.dispatchTouchEvent=function(e,i,n,s,a,o,h,l){if(void 0===l&&(l=!1),!n&&!e.hasEventListener(i))return!0;var u=t.Event.create(r,i,n,s);u.$initTo(a,o,h),u.touchDown=l;var c=e.dispatchEvent(u);return t.Event.release(u),c},r.TOUCH_MOVE="touchMove",r.TOUCH_BEGIN="touchBegin",r.TOUCH_END="touchEnd",r.TOUCH_CANCEL="touchcancel",r.TOUCH_TAP="touchTap",r.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",r.TOUCH_ROLL_OUT="touchRollOut",r.TOUCH_ROLL_OVER="touchRollOver",r}(t.Event);t.TouchEvent=i,t.registerClass(i,"egret.TouchEvent")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){t.apply(this,arguments),this.type=null,this.$targets=[]}__extends(e,t);var i=e,r=i.prototype;return r.$addTarget=function(t){for(var e=this.$targets.length,i=0;e>i;i++)if(this.$targets[i].$hashCode==t.$hashCode)return;this.$targets.push(t)},r.$removeTarget=function(t){for(var e=this.$targets.length,i=0;e>i;i++)if(this.$targets[i].$hashCode==t.$hashCode)return void this.$targets.splice(i,1)},r.invalidate=function(){for(var t=this.$targets.length,e=0;t>e;e++)this.$targets[e].$invalidateContentBounds()},e}(t.HashObject);t.Filter=e,t.registerClass(e,"egret.Filter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r){void 0===e&&(e=4),void 0===i&&(i=4),void 0===r&&(r=1),t.call(this),this.type="blur",this.$blurX=e,this.$blurY=i,this.$quality=r}__extends(e,t);var i=__define,r=e,n=r.prototype;return i(n,"blurX",function(){return this.$blurX},function(t){this.$blurX!=t&&(this.$blurX=t,this.invalidate())}),i(n,"blurY",function(){return this.$blurY},function(t){this.$blurY!=t&&(this.$blurY=t,this.invalidate())}),e}(t.Filter);t.BlurFilter=e,t.registerClass(e,"egret.BlurFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.$matrix=[],this.matrix2=[],this.type="colorTransform",this.setMatrix(e)}__extends(e,t);var i=__define,r=e,n=r.prototype;return i(n,"matrix",function(){for(var t=0;20>t;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},function(t){this.setMatrix(t),this.invalidate()}),n.setMatrix=function(t){if(t)for(var e=0;20>e;e++)this.$matrix[e]=t[e];else for(var e=0;20>e;e++)this.$matrix[e]=0==e||6==e||12==e||18==e?1:0},e}(t.Filter);t.ColorMatrixFilter=e,t.registerClass(e,"egret.ColorMatrixFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r,n,s,a,o,h){void 0===e&&(e=16711680),void 0===i&&(i=1),void 0===r&&(r=6),void 0===n&&(n=6),void 0===s&&(s=2),void 0===a&&(a=1),void 0===o&&(o=!1),void 0===h&&(h=!1),t.call(this),this.type="glow",this.$color=e,this.$blue=255&e,this.$green=(65280&e)>>8,this.$red=e>>16,this.$alpha=i,this.$blurX=r,this.$blurY=n,this.$strength=s,this.$quality=a,this.$inner=o,this.$knockout=h}__extends(e,t);var i=__define,r=e,n=r.prototype;return i(n,"color",function(){return this.$color},function(t){this.$color!=t&&(this.$color=t,this.$blue=255&t,this.$green=(65280&t)>>8,this.$red=t>>16,this.invalidate())}),i(n,"alpha",function(){return this.$alpha},function(t){this.$alpha!=t&&(this.$alpha=t,this.invalidate())}),i(n,"blurX",function(){return this.$blurX},function(t){this.$blurX!=t&&(this.$blurX=t,this.invalidate())}),i(n,"blurY",function(){return this.$blurY},function(t){this.$blurY!=t&&(this.$blurY=t,this.invalidate())}),i(n,"strength",function(){return this.$strength},function(t){this.$strength!=t&&(this.$strength=t,this.invalidate())}),i(n,"quality",function(){return this.$quality},function(t){this.$quality!=t&&(this.$quality=t,this.invalidate())}),i(n,"inner",function(){return this.$inner},function(t){this.$inner!=t&&(this.$inner=t,this.invalidate())}),i(n,"knockout",function(){return this.$knockout},function(t){this.$knockout!=t&&(this.$knockout=t,this.invalidate())}),e}(t.Filter);t.GlowFilter=e,t.registerClass(e,"egret.GlowFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r,n,s,a,o,h,l,u,c){void 0===e&&(e=4),void 0===i&&(i=45),
void 0===r&&(r=0),void 0===n&&(n=1),void 0===s&&(s=4),void 0===a&&(a=4),void 0===o&&(o=1),void 0===h&&(h=1),void 0===l&&(l=!1),void 0===u&&(u=!1),void 0===c&&(c=!1),t.call(this,r,n,s,a,o,h,l,u),this.$distance=e,this.$angle=i,this.$hideObject=c}__extends(e,t);var i=__define,r=e,n=r.prototype;return i(n,"distance",function(){return this.$distance},function(t){this.$distance!=t&&(this.$distance=t,this.invalidate())}),i(n,"angle",function(){return this.$angle},function(t){this.$angle!=t&&(this.$angle=t,this.invalidate())}),i(n,"hideObject",function(){return this.$hideObject},function(t){this.$hideObject!=t&&(this.$hideObject=t,this.invalidate())}),e}(t.GlowFilter);t.DropShadowFilter=e,t.registerClass(e,"egret.DropShadowFilter")}(egret||(egret={}));var egret;!function(t){var e=Math.PI,i=2*e,r=e/180,n=[],s=function(s){function a(t,e,i,r,n,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===a&&(a=0),s.call(this),this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=a}__extends(a,s);var o=a,h=o.prototype;return a.release=function(t){t&&n.push(t)},a.create=function(){var t=n.pop();return t||(t=new a),t},h.clone=function(){return new a(this.a,this.b,this.c,this.d,this.tx,this.ty)},h.concat=function(t){var e=this.a*t.a,i=0,r=0,n=this.d*t.d,s=this.tx*t.a+t.tx,a=this.ty*t.d+t.ty;(0!==this.b||0!==this.c||0!==t.b||0!==t.c)&&(e+=this.b*t.c,n+=this.c*t.b,i+=this.a*t.b+this.b*t.d,r+=this.c*t.a+this.d*t.c,s+=this.ty*t.c,a+=this.tx*t.b),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=s,this.ty=a},h.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},h.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},h.invert=function(){this.$invertInto(this)},h.$invertInto=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,s=this.tx,a=this.ty;if(0==i&&0==r)return t.b=t.c=0,void(0==e||0==n?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,n=t.d=1/n,t.tx=-e*s,t.ty=-n*a));var o=e*n-i*r;if(0==o)return void t.identity();o=1/o;var h=t.a=n*o;i=t.b=-i*o,r=t.c=-r*o,n=t.d=e*o,t.tx=-(h*s+r*a),t.ty=-(i*s+n*a)},h.rotate=function(e){if(e=+e,0!==e){e/=r;var i=t.NumberUtils.cos(e),n=t.NumberUtils.sin(e),s=this.a,a=this.b,o=this.c,h=this.d,l=this.tx,u=this.ty;this.a=s*i-a*n,this.b=s*n+a*i,this.c=o*i-h*n,this.d=o*n+h*i,this.tx=l*i-u*n,this.ty=l*n+u*i}},h.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},h.setTo=function(t,e,i,r,n,s){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s,this},h.transformPoint=function(e,i,r){var n=this.a*e+this.c*i+this.tx,s=this.b*e+this.d*i+this.ty;return r?(r.setTo(n,s),r):new t.Point(n,s)},h.translate=function(t,e){this.tx+=t,this.ty+=e},h.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},h.prepend=function(t,e,i,r,n,s){var a=this.tx;if(1!=t||0!=e||0!=i||1!=r){var o=this.a,h=this.c;this.a=o*t+this.b*i,this.b=o*e+this.b*r,this.c=h*t+this.d*i,this.d=h*e+this.d*r}return this.tx=a*t+this.ty*i+n,this.ty=a*e+this.ty*r+s,this},h.append=function(t,e,i,r,n,s){var a=this.a,o=this.b,h=this.c,l=this.d;return(1!=t||0!=e||0!=i||1!=r)&&(this.a=t*a+e*h,this.b=t*o+e*l,this.c=i*a+r*h,this.d=i*o+r*l),this.tx=n*a+s*h+this.tx,this.ty=n*o+s*l+this.ty,this},h.deltaTransformPoint=function(e){var i=this,r=i.a*e.x+i.c*e.y,n=i.b*e.x+i.d*e.y;return new t.Point(r,n)},h.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},h.createBox=function(e,i,n,s,a){void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=0);var o=this;if(0!==n){n/=r;var h=t.NumberUtils.cos(n),l=t.NumberUtils.sin(n);o.a=h*e,o.b=l*i,o.c=-l*e,o.d=h*i}else o.a=e,o.b=0,o.c=0,o.d=i;o.tx=s,o.ty=a},h.createGradientBox=function(t,e,i,r,n){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.createBox(t/1638.4,e/1638.4,i,r+t/2,n+e/2)},h.$transformBounds=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,s=this.tx,a=this.ty,o=t.x,h=t.y,l=o+t.width,u=h+t.height,c=e*o+r*h+s,d=i*o+n*h+a,f=e*l+r*h+s,g=i*l+n*h+a,p=e*l+r*u+s,v=i*l+n*u+a,m=e*o+r*u+s,y=i*o+n*u+a,T=0;c>f&&(T=c,c=f,f=T),p>m&&(T=p,p=m,m=T),t.x=Math.floor(p>c?c:p),t.width=Math.ceil((f>m?f:m)-t.x),d>g&&(T=d,d=g,g=T),v>y&&(T=v,v=y,y=T),t.y=Math.floor(v>d?d:v),t.height=Math.ceil((g>y?g:y)-t.y)},h.getDeterminant=function(){return this.a*this.d-this.b*this.c},h.$getScaleX=function(){var t=this;if(1==t.a&&0==t.b)return 1;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},h.$getScaleY=function(){var t=this;if(0==t.c&&1==t.d)return 1;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},h.$getSkewX=function(){return Math.atan2(this.d,this.c)-e/2},h.$getSkewY=function(){return Math.atan2(this.b,this.a)},h.$updateScaleAndRotation=function(e,n,s,a){if(!(0!=s&&s!=i||0!=a&&a!=i))return this.a=e,this.b=this.c=0,void(this.d=n);s/=r,a/=r;var o=t.NumberUtils.cos(s),h=t.NumberUtils.sin(s);s==a?(this.a=o*e,this.b=h*e):(this.a=t.NumberUtils.cos(a)*e,this.b=t.NumberUtils.sin(a)*e),this.c=-h*n,this.d=o*n},h.$preMultiplyInto=function(t,e){var i=t.a*this.a,r=0,n=0,s=t.d*this.d,a=t.tx*this.a+this.tx,o=t.ty*this.d+this.ty;(0!==t.b||0!==t.c||0!==this.b||0!==this.c)&&(i+=t.b*this.c,s+=t.c*this.b,r+=t.a*this.b+t.b*this.d,n+=t.c*this.a+t.d*this.c,a+=t.ty*this.c,o+=t.tx*this.b),e.a=i,e.b=r,e.c=n,e.d=s,e.tx=a,e.ty=o},a}(t.HashObject);t.Matrix=s,t.registerClass(s,"egret.Matrix"),t.$TempMatrix=new s}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton errorsingleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1015]="xml not found!",e[1016]="{0}has been obsoleted",e[1017]="The format of JSON file is incorrect: {0}\ndata: {1}",e[1018]="the scale9Grid is not correct",e[1019]="Network ab:{0}",e[1020]="Cannot initialize Shader",e[1021]="Current browser does not support webgl",e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[1036]="Sound has stopped, please recall Sound.play () to play the sound!",e[1037]="Non-load the correct blob!",e[1038]="XML format error!",e[1039]="crossOrigin images can not set pixelHitTest  property!",e[1040]="hitTestPoint can not detect crossOrigin images! Please check if the display object has crossOrigin elements.",e[1041]="egret.MainContext.runtimeType is deprecated, please use egret.Capabilities.runtimeType replace",e[1042]="The parameters passed in the region needs is an integer in drawToTexture method. Otherwise, some browsers will draw abnormal.",e[1043]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[1044]="The current version of the Runtime does not support video playback, please use the latest version",e[1045]="The resource url is not found",e[1046]="BitmapText no corresponding characters: {0}, please check the configuration file",e[1047]="egret.localStorage.setItem save failed,key={0}&value={1}",e[1048]="Video loading failed",e[1049]="In the absence of sound is not allowed to play after loading",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list",e[3014]="set fullscreen error",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var n=t.$locale_strings[t.$language][e];if(!n)return"{"+e+"}";for(var s=i.length,a=0;s>a;a++)n=n.replace("{"+a+"}",i[a]);return n}e.tr=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="Egret: {0}",e[1002]="Egret {0} egret.DisplayObject",e[1003]=" {0}  null",e[1004]="",e[1005]="",e[1006]=" DisplayObject ",e[1007]="",e[1008]=" {0} ",e[1009]=" {0}  {1}",e[1010]=" {0}  {1} ",e[1011]="URL: {0}",e[1012]=" {0}  Class",e[1013]="NaN",e[1014]=" {0}  {1} ",e[1015]="xml not found!",e[1016]="{0}",e[1017]="JSON: {0}\ndata: {1}",e[1018]="9",e[1019]=":{0}",e[1020]="",e[1021]="webgl",e[1022]="{0} ArgumentError",e[1023]="ScrollView!",e[1025]="",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=":{0} ",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="toDataURLbase64",e[1034]='"{0}"mp3',e[1035]="Native ",e[1036]=" Sound.play() ",e[1037]="blob",e[1038]="XML !",e[1039]=" pixelHitTest !",e[1040]="hitTestPoint ! ",e[1041]="egret.MainContext.runtimeType ,egret.Capabilities.runtimeType ",e[1042]="drawToTexture,",e[1043]="{0}  : {1} : {2}",e[1044]=" runtime ,",e[1045]="",e[1046]="BitmapText :{0}",e[1047]="egret.localStorage.setItem,key={0}&value={1}",e[1048]="",e[1049]="",e[3e3]=": {0}",e[3001]=": {0}",e[3002]=':"{0}"',e[3003]="",e[3004]="addChild(){0}addElement()",e[3005]="addChildAt(){0}addElementAt()",e[3006]="removeChild(){0}removeElement()",e[3007]="removeChildAt(){0}removeElementAt()",e[3008]="setChildIndex(){0}setElementIndex()",e[3009]="swapChildren(){0}swapElements()",e[3010]="swapChildrenAt(){0}swapElementsAt()",e[3011]=':"{0}"',e[3012]="Scroller!",e[3013]="UIStageGUI",e[3014]="",e[3100]="WebSocket",e[3101]="WebSocket",e[3102]="type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.localStorage||(t.localStorage={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){function e(t){r.indexOf(t)<0&&r.push(t)}function i(t){var e=r.indexOf(t);return e>=0&&(r.splice(e,1),!0)}var r=[];t.$pushSoundChannel=e,t.$popSoundChannel=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this.onSuccessFunc=null,this.onSuccessThisObject=null,this.onErrorFunc=null,this.onErrorThisObject=null,this.downloadingSizeFunc=null,this.downloadingSizeThisObject=null,this.onResponseHeaderFunc=null,this.onResponseHeaderThisObject=null}var i=e,r=i.prototype;return e.create=function(){return e.promiseObjectList.length?e.promiseObjectList.pop():new t.PromiseObject},r.onSuccess=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,t),this.destroy()},r.onError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,t),this.destroy()},r.downloadingSize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,t)},r.onResponseHeader=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onResponseHeaderFunc&&this.onResponseHeaderFunc.apply(this.onResponseHeaderThisObject,t)},r.destroy=function(){this.onSuccessFunc=void 0,this.onSuccessThisObject=void 0,this.onErrorFunc=void 0,this.onErrorThisObject=void 0,this.downloadingSizeFunc=void 0,this.downloadingSizeThisObject=void 0,this.onResponseHeaderFunc=void 0,this.onResponseHeaderThisObject=void 0,e.promiseObjectList.push(this)},e.promiseObjectList=[],e}();t.PromiseObject=e,t.registerClass(e,"egret.PromiseObject")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.GET="GET",t.POST="POST",t}();t.HttpMethod=e,t.registerClass(e,"egret.HttpMethod")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.TEXT="text",t.ARRAY_BUFFER="arraybuffer",t}();t.HttpResponseType=e,t.registerClass(e,"egret.HttpResponseType")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t,e){var i=t.minX<e.minX?t.minX:e.minX,r=t.minY<e.minY?t.minY:e.minY,n=t.maxX>e.maxX?t.maxX:e.maxX,s=t.maxY>e.maxY?t.maxY:e.maxY;return(n-i)*(s-r)}var r=function(){function r(e){this.dirtyList=[],this.hasClipRect=!1,this.clipWidth=0,this.clipHeight=0,this.clipArea=0,this.clipRectChanged=!1,this.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,this.root=e}var n=r,s=n.prototype;return s.setClipRect=function(t,e){this.hasClipRect=!0,this.clipRectChanged=!0,this.clipWidth=Math.ceil(t),this.clipHeight=Math.ceil(e),this.clipArea=this.clipWidth*this.clipHeight},s.addRegion=function(i){var r=i.minX,n=i.minY,s=i.maxX,a=i.maxY;if(this.hasClipRect&&(0>r&&(r=0),0>n&&(n=0),s>this.clipWidth&&(s=this.clipWidth),a>this.clipHeight&&(a=this.clipHeight)),r>=s||n>=a)return!1;if(this.clipRectChanged)return!0;var o=this.dirtyList,h=e.Region.create();return o.push(h.setTo(r,n,s,a)),this.$dirtyRegionPolicy!=t.DirtyRegionPolicy.OFF&&this.mergeDirtyList(o),!0},s.clear=function(){for(var t=this.dirtyList,i=t.length,r=0;i>r;r++)e.Region.release(t[r]);t.length=0},s.getDirtyRegions=function(){var i=this.dirtyList;if(this.$dirtyRegionPolicy==t.DirtyRegionPolicy.OFF||t.Capabilities.runtimeType==t.RuntimeType.NATIVE&&!t.native.$supportCanvas){this.clipRectChanged=!0,this.clear();var r=e.Region.create();if(this.hasClipRect)i.push(r.setTo(0,0,this.clipWidth,this.clipHeight));else{var n=this.root.$getOriginalBounds();i.push(r.setTo(n.x,n.y,n.width,n.height))}}else if(this.clipRectChanged){this.clipRectChanged=!1,this.clear();var r=e.Region.create();i.push(r.setTo(0,0,this.clipWidth,this.clipHeight))}else for(;this.mergeDirtyList(i););var s=this.dirtyList.length;if(s>0)for(var a=0;s>a;a++)this.dirtyList[a].intValues();return this.dirtyList},s.mergeDirtyList=function(t){var r=t.length;if(2>r)return!1;for(var n=this.hasClipRect,s=r>3?Number.POSITIVE_INFINITY:0,a=0,o=0,h=0,l=0;r-1>l;l++){var u=t[l];n&&(h+=u.area);for(var c=l+1;r>c;c++){var d=t[c],f=i(u,d)-u.area-d.area;s>f&&(a=l,o=c,s=f)}}if(n&&h/this.clipArea>.95&&(this.clipRectChanged=!0),a!=o){var g=t[o];return t[a].union(g),e.Region.release(g),t.splice(o,1),!0}return!1},s.setDirtyRegionPolicy=function(t){this.$dirtyRegionPolicy=t},r}();e.DirtyRegion=r,t.registerClass(r,"egret.sys.DirtyRegion")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function r(r){i.call(this),this.isStage=!1,this.$renderNode=new e.BitmapNode,this.renderBuffer=null,this.offsetX=0,this.offsetY=0,this.offsetMatrix=new t.Matrix,this.isDirty=!1,this.needUpdateRegions=!1,this.dirtyNodes={},this.dirtyNodeList=[],this.dirtyList=null,this.sizeChanged=!1,this.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,this.root=r,this.dirtyRegion=new e.DirtyRegion(r),this.isStage=r instanceof t.Stage}__extends(r,i);var n=r,s=n.prototype;return r.create=function(i){var r=new t.sys.DisplayList(i);try{var n=new e.RenderBuffer}catch(t){return null}return r.renderBuffer=n,r.root=i,r},s.$getRenderNode=function(){return this.$renderNode},s.$update=function(e){var i=this.root;if(null==i)return!1;i.$removeFlagsUp(768);var r=this.$renderNode,n=i.$getConcatenatedMatrix();if(e==t.DirtyRegionPolicy.OFF){var s=i.$parentDisplayList;if(this.needUpdateRegions&&this.updateDirtyRegions(),!s)return!1;var a=r.renderMatrix;a.copyFrom(n);var o=s.root;o!==i.$stage&&i.$getConcatenatedMatrixAt(o,a)}else{var h=i.$getOriginalBounds(),s=i.$parentDisplayList,l=r.renderRegion;if(this.needUpdateRegions&&this.updateDirtyRegions(),!s)return l.setTo(0,0,0,0),r.moved=!1,!1;if(!r.moved)return!1;r.moved=!1;var a=r.renderMatrix;a.copyFrom(n);var o=s.root;o!==i.$stage&&i.$getConcatenatedMatrixAt(o,a),l.updateRegion(h,a)}return!0},s.setClipRect=function(t,e){this.dirtyRegion.setClipRect(t,e),this.renderBuffer.resize(t,e)},s.markDirty=function(t){var e=t.$hashCode;if(!this.dirtyNodes[e]&&(this.dirtyNodes[e]=!0,this.dirtyNodeList.push(t),!this.needUpdateRegions)){this.needUpdateRegions=!0,this.isDirty=!0;var i=this.root.$parentDisplayList;i&&i.markDirty(this)}},s.updateDirtyRegions=function(){var t=this.dirtyNodeList;this.dirtyNodeList=[],this.dirtyNodes={},this.needUpdateRegions=!1;for(var e=this.dirtyRegion,i=t.length,r=0;i>r;r++){var n=t[r],s=n.$getRenderNode();if(s.needRedraw=!1,this.isStage){s.renderAlpha>0&&s.renderVisible&&e.addRegion(s.renderRegion)&&(s.needRedraw=!0);var a=n.$update(this.$dirtyRegionPolicy);s.renderAlpha>0&&s.renderVisible&&(a||!s.needRedraw)&&e.addRegion(s.renderRegion)&&(s.needRedraw=!0)}else{e.addRegion(s.renderRegion)&&(s.needRedraw=!0);var a=n.$update(this.$dirtyRegionPolicy);(a||!s.needRedraw)&&e.addRegion(s.renderRegion)&&(s.needRedraw=!0)}}return this.dirtyList=e.getDirtyRegions(),this.dirtyList},s.drawToSurface=function(){var i=0,r=this.dirtyList;if(r&&r.length>0){this.isStage||this.changeSurfaceSize();var n=this.renderBuffer;n.beginClip(this.dirtyList,this.offsetX,this.offsetY);var r=this.$dirtyRegionPolicy==t.DirtyRegionPolicy.OFF?null:this.dirtyList,i=e.systemRenderer.render(this.root,n,this.offsetMatrix,r);n.endClip();var s=n.surface,a=this.$renderNode;a.drawData.length=0,a.image=s;var o=s.width,h=s.height;a.imageWidth=o,a.imageHeight=h,a.drawImage(0,0,o,h,-this.offsetX,-this.offsetY,o,h)}return this.dirtyList=null,this.dirtyRegion.clear(),this.isDirty=!1,i},s.changeSurfaceSize=function(){var t=(this.root,this.offsetX),e=this.offsetY,i=this.root.$getOriginalBounds();this.offsetX=-i.x,this.offsetY=-i.y,this.offsetMatrix.setTo(1,0,0,1,this.offsetX,this.offsetY);var r=this.renderBuffer,n=Math.max(257,i.width),s=Math.max(257,i.height);(this.offsetX!=t||this.offsetY!=e||r.surface.width!=n||r.surface.height!=s)&&(this.sizeChanged?r.resizeTo(n,s,this.offsetX-t,this.offsetY-e):(this.sizeChanged=!0,r.resize(n,s)))},s.setDirtyRegionPolicy=function(t){this.$dirtyRegionPolicy=t,this.dirtyRegion.setDirtyRegionPolicy(t),this.renderBuffer.setDirtyRegionPolicy(t)},r}(t.HashObject);e.DisplayList=i,t.registerClass(i,"egret.sys.DisplayList",["egret.sys.Renderable"])}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(i,r,n,s){if(r&&(t.log=function(){for(var t=arguments.length,i="",r=0;t>r;r++)i+=arguments[r]+" ";e.$logToFPS(i),console.log.apply(console,a(arguments))}),l=s?{}:s,r=!!r,this.showFPS=!!i,this.showLog=r,!this.fpsDisplay){var o=void 0===s.x?0:s.x,c=void 0===s.y?0:s.y;h=this.fpsDisplay=new FPS(this.stage,i,r,n,s),h.x=o,h.y=c;for(var d=u.length,f=0;d>f;f++)h.updateInfo(u[f]);u=null}}function r(t){t=!!t,this._showPaintRect!=t&&(this._showPaintRect=t,t?(this.stageDisplayList||(this.stageDisplayList=e.DisplayList.create(this.stage)),this.stage.$displayList=this.stageDisplayList):this.stage.$displayList=this.screenDisplayList)}function n(t){for(var e=t.length,i=[],r=0;e>r;r++){var n=t[r];i[r]=[n.minX,n.minY,n.width,n.height],n.width-=1,n.height-=1}var s=this.paintList;s.push(i),s.length>1&&s.shift();var a=this.screenDisplayList.renderBuffer,o=a.context;for(o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,a.surface.width,a.surface.height),o.drawImage(this.stageDisplayList.renderBuffer.surface,0,0),e=s.length,r=0;e>r;r++){i=s[r];for(var h=i.length-1;h>=0;h--){var l=i[h];this.drawDirtyRect(l[0],l[1],l[2],l[3],o)}}o.save(),o.beginPath();for(var e=t.length,r=0;e>r;r++){var n=t[r];o.clearRect(n.minX,n.minY,n.width,n.height),o.rect(n.minX,n.minY,n.width,n.height)}o.clip(),o.drawImage(this.stageDisplayList.renderBuffer.surface,0,0),o.restore()}function s(t,e,i,r,n){n.strokeStyle="rgb(255,0,0)",n.lineWidth=5,n.strokeRect(t-.5,e-.5,i,r)}function a(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}var o=function(a){function o(t,e,o){a.call(this),this.isPlaying=!1,this.entryClassName=o,this.stage=e,this.screenDisplayList=this.createDisplayList(e,t),this.showFPS=!1,this.showLog=!1,this._showPaintRect=!1,this.stageDisplayList=null,this.paintList=[],this.displayFPS=i,this.showPaintRect=r,this.drawPaintRect=n,this.drawDirtyRect=s}__extends(o,a);var h=o,l=h.prototype;return l.createDisplayList=function(t,i){var r=new e.DisplayList(t);return r.renderBuffer=i,t.$displayList=r,r},l.start=function(){!this.isPlaying&&this.stage&&(e.$TempStage=e.$TempStage||this.stage,this.isPlaying=!0,this.root||this.initialize(),e.$ticker.$addPlayer(this))},l.initialize=function(){var e;if(this.entryClassName&&(e=t.getDefinitionByName(this.entryClassName)),e){var i=new e;this.root=i,i instanceof t.DisplayObject&&this.stage.addChild(i)}},l.stop=function(){this.pause(),this.stage=null},l.pause=function(){this.isPlaying&&(this.isPlaying=!1,e.$ticker.$removePlayer(this))},l.$render=function(e,i){(this.showFPS||this.showLog)&&this.stage.addChild(this.fpsDisplay),this.callLaters(),this.callLaterAsyncs();var r=this.stage,n=t.getTimer(),s=r.$displayList.updateDirtyRegions(),a=t.getTimer();s=s.concat();var o=r.$displayList.drawToSurface();this._showPaintRect&&this.drawPaintRect(s);var h=t.getTimer();if(e&&this.showFPS){var l=0;if(o>0){for(var u=s.length,c=0,d=0;u>d;d++)c+=s[d].area;l=Math.ceil(1e3*c/(r.stageWidth*r.stageHeight))/10}this.fpsDisplay.update(o,l,a-n,h-a,i)}},l.callLaters=function(){if(t.$callLaterFunctionList.length>0){var e=t.$callLaterFunctionList;t.$callLaterFunctionList=[];var i=t.$callLaterThisList;t.$callLaterThisList=[];var r=t.$callLaterArgsList;t.$callLaterArgsList=[]}if(e)for(var n=e.length,s=0;n>s;s++){var a=e[s];null!=a&&a.apply(i[s],r[s])}},l.callLaterAsyncs=function(){if(t.$callAsyncFunctionList.length>0){var e=t.$callAsyncFunctionList,i=t.$callAsyncThisList,r=t.$callAsyncArgsList;t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[];for(var n=0;n<e.length;n++){var s=e[n];null!=s&&s.apply(i[n],r[n])}}},l.updateStageSize=function(e,i){var r=this.stage;r.$stageWidth=e,r.$stageHeight=i,this.screenDisplayList.setClipRect(e,i),this.stageDisplayList&&this.stageDisplayList.setClipRect(e,i),r.dispatchEventWith(t.Event.RESIZE),r.$invalidate(!0)},o}(t.HashObject);e.Player=o,t.registerClass(o,"egret.sys.Player");var h,l,u=[];e.$logToFPS=function(t){return h?void h.updateInfo(t):void u.push(t)},FPS=function(i){function r(e,r,n,s,a){i.call(this),this.isFPS=!0,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.dirtyRatio=0,this.costDirty=0,this.costRender=0,this.costTicker=0,this._stage=e,this.showFPS=r,this.showLog=n,this.logFilter=s,this.touchChildren=!1,this.touchEnabled=!1,this.styles=a,this.fpsDisplay=new t.FPSDisplay(e,r,n,s,a),this.addChild(this.fpsDisplay);try{var o=s?new RegExp(s):null}catch(e){t.log(e)}this.filter=function(t){return o?o.test(t):!s||0==t.indexOf(s)}}return __extends(r,i),r.prototype.update=function(i,r,n,s,a){var o=t.getTimer();if(this.totalTime+=o-this.lastTime,this.lastTime=o,this.totalTick++,this.drawCalls+=i,this.dirtyRatio+=r,this.costDirty+=n,this.costRender+=s,this.costTicker+=a,this.totalTime>=1e3){var h=Math.min(Math.ceil(1e3*this.totalTick/this.totalTime),e.$ticker.$frameRate),l=Math.round(this.drawCalls/this.totalTick),u=Math.round(this.dirtyRatio/this.totalTick),c=Math.round(this.costDirty/this.totalTick),d=Math.round(this.costRender/this.totalTick),f=Math.round(this.costTicker/this.totalTick);this.fpsDisplay.update({fps:h,draw:l,dirty:u,costTicker:f,costDirty:c,costRender:d}),this.totalTick=0,this.totalTime=this.totalTime%500,this.drawCalls=0,this.dirtyRatio=0,this.costDirty=0,this.costRender=0,this.costTicker=0}},r.prototype.updateInfo=function(t){t&&this.showLog&&this.filter(t)&&this.fpsDisplay.updateInfo(t)},r}(t.Sprite),t.warn=function(){console.warn.apply(console,a(arguments))},t.error=function(){console.error.apply(console,a(arguments))},t.assert=function(){console.assert.apply(console,a(arguments))},t.log=function(){console.log.apply(console,a(arguments))}}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=[],r=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0,this.moved=!1}var e=t,r=e.prototype;return t.release=function(t){i.push(t)},t.create=function(){var e=i.pop();return e||(e=new t),e},r.setTo=function(t,e,i,r){return this.minX=t,this.minY=e,this.maxX=i,this.maxY=r,this.updateArea(),this},r.intValues=function(){this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this.updateArea()},r.updateArea=function(){this.width=this.maxX-this.minX,this.height=this.maxY-this.minY,this.area=this.width*this.height},r.union=function(t){this.minX>t.minX&&(this.minX=t.minX),this.minY>t.minY&&(this.minY=t.minY),this.maxX<t.maxX&&(this.maxX=t.maxX),this.maxY<t.maxY&&(this.maxY=t.maxY),this.updateArea()},r.intersect=function(t){return this.minX<t.minX&&(this.minX=t.minX),this.maxX>t.maxX&&(this.maxX=t.maxX),this.minX>=this.maxX?void this.setEmpty():(this.minY<t.minY&&(this.minY=t.minY),this.maxY>t.maxY&&(this.maxY=t.maxY),this.minY>=this.maxY?void this.setEmpty():void this.updateArea())},r.setEmpty=function(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0},r.isEmpty=function(){return this.width<=0||this.height<=0},r.intersects=function(t){if(this.isEmpty())return!1;var e=this.minX>t.minX?this.minX:t.minX,i=this.maxX<t.maxX?this.maxX:t.maxX;return!(e>i)&&(e=this.minY>t.minY?this.minY:t.minY,i=this.maxY<t.maxY?this.maxY:t.maxY,i>=e)},r.updateRegion=function(t,e){if(0==t.width||0==t.height)return void this.setEmpty();var i,r,n,s,a=e,o=a.a,h=a.b,l=a.c,u=a.d,c=a.tx,d=a.ty,f=t.x,g=t.y,p=f+t.width,v=g+t.height;if(1==o&&0==h&&0==l&&1==u)i=f+c-1,r=g+d-1,n=p+c+1,s=v+d+1;else{var m=o*f+l*g+c,y=h*f+u*g+d,T=o*p+l*g+c,x=h*p+u*g+d,_=o*p+l*v+c,$=h*p+u*v+d,E=o*f+l*v+c,b=h*f+u*v+d,w=0;m>T&&(w=m,m=T,T=w),_>E&&(w=_,_=E,E=w),i=(_>m?m:_)-1,n=(T>E?T:E)+1,y>x&&(w=y,y=x,x=w),$>b&&(w=$,$=b,b=w),r=($>y?y:$)-1,s=(x>b?x:b)+1}this.minX=i,this.minY=r,this.maxX=n,this.maxY=s,this.width=n-i,this.height=s-r,this.area=this.width*this.height},t}();e.Region=r,t.registerClass(r,"egret.sys.Region")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){e.call(this)}__extends(i,e);var r=i,n=r.prototype;return n.calculateStageSize=function(e,i,r,n,s){var a=i,o=r,h=n,l=s,u=i/h||0,c=r/l||0;switch(e){case t.StageScaleMode.EXACT_FIT:break;case t.StageScaleMode.FIXED_HEIGHT:h=Math.round(i/c);break;case t.StageScaleMode.FIXED_WIDTH:l=Math.round(r/u);break;case t.StageScaleMode.NO_BORDER:u>c?o=Math.round(l*u):a=Math.round(h*c);break;case t.StageScaleMode.SHOW_ALL:u>c?a=Math.round(h*c):o=Math.round(l*u);break;case t.StageScaleMode.FIXED_NARROW:u>c?h=Math.round(i/c):l=Math.round(r/u);break;case t.StageScaleMode.FIXED_WIDE:u>c?l=Math.round(r/u):h=Math.round(i/c);break;default:h=i,l=r}return a%2!=0&&(a+=1),o%2!=0&&(o+=1),{stageWidth:h,stageHeight:l,displayWidth:a,displayHeight:o}},i}(t.HashObject);e.DefaultScreenAdapter=i,t.registerClass(i,"egret.sys.DefaultScreenAdapter",["egret.sys.IScreenAdapter"])}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.NO_BORDER="noBorder",t.EXACT_FIT="exactFit",t.FIXED_WIDTH="fixedWidth",t.FIXED_HEIGHT="fixedHeight",t.FIXED_NARROW="fixedNarrow",t.FIXED_WIDE="fixedWide",t}();t.StageScaleMode=e,t.registerClass(e,"egret.StageScaleMode")}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){e.$START_TIME=0,e.$invalidateRenderFlag=!1,e.$requestRenderingFlag=!1;var i=function(){function i(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.frameInterval=2e3,this.lastCount=2e3,this.costEnterFrame=0,e.$START_TIME=Date.now()}var r=i,n=r.prototype;return n.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(this.playerList=this.playerList.concat(),this.playerList.push(t))},n.$removePlayer=function(t){var e=this.playerList.indexOf(t);-1!==e&&(this.playerList=this.playerList.concat(),this.playerList.splice(e,1))},n.$startTick=function(t,e){var i=this.getTickIndex(t,e);-1==i&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},n.$stopTick=function(t,e){var i=this.getTickIndex(t,e);-1!=i&&(this.concatTick(),this.callBackList.splice(i,1),this.thisObjectList.splice(i,1))},n.getTickIndex=function(t,e){for(var i=this.callBackList,r=this.thisObjectList,n=i.length-1;n>=0;n--)if(i[n]==t&&r[n]==e)return n;return-1},n.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},n.$setFrameRate=function(e){return e=+e||0,!(0>=e)&&(this.$frameRate!=e&&(this.$frameRate=e,
e>60&&(e=60),t.Capabilities.runtimeType==t.RuntimeType.NATIVE&&(egret_native.setFrameRate(e),e=60),this.lastCount=this.frameInterval=Math.round(6e4/e),!0))},n.update=function(){for(var i=t.getTimer(),r=this.callBackList,n=this.thisObjectList,s=r.length,a=e.$requestRenderingFlag,o=t.getTimer(),h=0;s>h;h++)r[h].call(n[h],o)&&(a=!0);this.lastCount-=1e3;var l=t.getTimer();if(this.lastCount>0)return void(a&&this.render(!1,this.costEnterFrame+l-i));this.lastCount+=this.frameInterval,this.render(!0,this.costEnterFrame+l-i);var u=t.getTimer();this.broadcastEnterFrame();var c=t.getTimer();this.costEnterFrame=c-u},n.render=function(t,i){var r=this.playerList,n=r.length;if(0!=n){e.$invalidateRenderFlag&&(this.broadcastRender(),e.$invalidateRenderFlag=!1);for(var s=0;n>s;s++)r[s].$render(t,i);e.$requestRenderingFlag=!1}},n.broadcastEnterFrame=function(){var e=t.DisplayObject.$enterFrameCallBackList,i=e.length;if(0!=i){e=e.concat();for(var r=0;i>r;r++)e[r].dispatchEventWith(t.Event.ENTER_FRAME)}},n.broadcastRender=function(){var e=t.DisplayObject.$renderCallBackList,i=e.length;if(0!=i){e=e.concat();for(var r=0;i>r;r++)e[r].dispatchEventWith(t.Event.RENDER)}},i}();e.SystemTicker=i,t.registerClass(i,"egret.sys.SystemTicker"),e.$ticker=new e.SystemTicker}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret_stages,egret;!function(t){var e;!function(e){var i=function(e){function i(t){e.call(this),this.maxTouches=0,this.useTouchesCount=0,this.touchDownTarget={},this.lastTouchX=-1,this.lastTouchY=-1,this.stage=t}__extends(i,e);var r=i,n=r.prototype;return n.$initMaxTouches=function(){this.maxTouches=this.stage.$maxTouches},n.onTouchBegin=function(e,i,r){if(!(this.useTouchesCount>=this.maxTouches)){this.lastTouchX=e,this.lastTouchY=i;var n=this.findTarget(e,i);null==this.touchDownTarget[r]&&(this.touchDownTarget[r]=n,this.useTouchesCount++),t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_BEGIN,!0,!0,e,i,r,!0)}},n.onTouchMove=function(e,i,r){if(null!=this.touchDownTarget[r]&&(this.lastTouchX!=e||this.lastTouchY!=i)){this.lastTouchX=e,this.lastTouchY=i;var n=this.findTarget(e,i);t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_MOVE,!0,!0,e,i,r,!0)}},n.onTouchEnd=function(e,i,r){if(null!=this.touchDownTarget[r]){var n=this.findTarget(e,i),s=this.touchDownTarget[r];delete this.touchDownTarget[r],this.useTouchesCount--,t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_END,!0,!0,e,i,r,!1),s==n?t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_TAP,!0,!0,e,i,r,!1):t.TouchEvent.dispatchTouchEvent(s,t.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,e,i,r,!1)}},n.findTarget=function(t,e){var i=this.stage.$hitTest(t,e);return i||(i=this.stage),i},i}(t.HashObject);e.TouchHandler=i,t.registerClass(i,"egret.sys.TouchHandler")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function i(){this.type=0,this.needRedraw=!1,this.renderAlpha=1,this.renderVisible=!0,this.renderMatrix=new t.Matrix,this.renderRegion=new e.Region,this.moved=!1,this.drawData=[],this.renderCount=0}var r=i,n=r.prototype;return n.cleanBeforeRender=function(){this.drawData.length=0,this.renderCount=0},n.$getRenderCount=function(){return this.renderCount},i}();e.RenderNode=i,t.registerClass(i,"egret.sys.RenderNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.image=null,this.smoothing=!0,this.blendMode=null,this.type=1}__extends(e,t);var i=e,r=i.prototype;return r.drawImage=function(t,e,i,r,n,s,a,o){this.drawData.push(t,e,i,r,n,s,a,o),this.renderCount++},r.cleanBeforeRender=function(){t.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},e}(e.RenderNode);e.BitmapNode=i,t.registerClass(i,"egret.sys.BitmapNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=["none","round","square"],r=["bevel","miter","round"],n=function(n){function s(){n.call(this),this.dirtyRender=!0,this.type=3}__extends(s,n);var a=s,o=a.prototype;return o.beginFill=function(t,i,r){void 0===i&&(i=1);var n=new e.FillPath;if(n.fillColor=t,n.fillAlpha=i,r){var s=this.drawData.lastIndexOf(r);this.drawData.splice(s,0,n)}else this.drawData.push(n);return n},o.beginGradientFill=function(i,r,n,s,a,o){var h=new t.Matrix;a?(h.a=819.2*a.a,h.b=819.2*a.b,h.c=819.2*a.c,h.d=819.2*a.d,h.tx=a.tx,h.ty=a.ty):(h.a=100,h.d=100);var l=new e.GradientFillPath;if(l.gradientType=i,l.colors=r,l.alphas=n,l.ratios=s,l.matrix=h,o){var u=this.drawData.lastIndexOf(o);this.drawData.splice(u,0,l)}else this.drawData.push(l);return l},o.lineStyle=function(n,s,a,o,h,l){void 0===a&&(a=1),void 0===l&&(l=3),-1==i.indexOf(o)&&(o="round"),-1==r.indexOf(h)&&(h="round");var u=new e.StrokePath;return u.lineWidth=n,u.lineColor=s,u.lineAlpha=a,u.caps=o||t.CapsStyle.ROUND,u.joints=h,u.miterLimit=l,this.drawData.push(u),u},o.clear=function(){this.drawData.length=0},o.cleanBeforeRender=function(){},s}(e.RenderNode);e.GraphicsNode=n,t.registerClass(n,"egret.sys.GraphicsNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.type=4}__extends(e,t);var i=e,r=i.prototype;return r.addNode=function(t){this.drawData.push(t)},r.cleanBeforeRender=function(){for(var t=this.drawData,e=t.length-1;e>=0;e--)t[e].cleanBeforeRender()},r.$getRenderCount=function(){for(var t=0,e=this.drawData,i=e.length-1;i>=0;i--)t+=e[i].$getRenderCount();return t},e}(e.RenderNode);e.GroupNode=i,t.registerClass(i,"egret.sys.GroupNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){e.call(this),this.image=null,this.smoothing=!0,this.bounds=new t.Rectangle,this.type=7,this.vertices=[],this.uvs=[],this.indices=[]}__extends(i,e);var r=i,n=r.prototype;return n.drawMesh=function(t,e,i,r,n,s,a,o){this.drawData.push(t,e,i,r,n,s,a,o),this.renderCount++},n.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},i}(e.RenderNode);e.MeshNode=i,t.registerClass(i,"egret.sys.MeshNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.type=6}__extends(e,t);var i=e,r=i.prototype;return r.setAlpha=function(t){0!=this.drawData.length&&(this.drawData.length=0),this.drawData.push(t),this.renderCount++},e}(e.RenderNode);e.SetAlphaNode=i,t.registerClass(i,"egret.sys.SetAlphaNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.type=5}__extends(e,t);var i=e,r=i.prototype;return r.setTransform=function(t,e,i,r,n,s){0!=this.drawData.length&&(this.drawData.length=0),this.drawData.push(t,e,i,r,n,s),this.renderCount++},e}(e.RenderNode);e.SetTransformNode=i,t.registerClass(i,"egret.sys.SetTransformNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.textColor=16777215,this.strokeColor=0,this.size=30,this.stroke=0,this.bold=!1,this.italic=!1,this.fontFamily="Arial",this.dirtyRender=!0,this.type=2}__extends(e,t);var i=e,r=i.prototype;return r.drawText=function(t,e,i,r){this.drawData.push(t,e,i,r),this.renderCount++,this.dirtyRender=!0},r.cleanBeforeRender=function(){t.prototype.cleanBeforeRender.call(this)},e}(e.RenderNode);e.TextNode=i,t.registerClass(i,"egret.sys.TextNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function t(){this.type=0,this.$commands=[],this.$data=[],this.commandPosition=0,this.dataPosition=0}var e=t,i=e.prototype;return i.moveTo=function(t,e){this.$commands[this.commandPosition++]=1;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},i.lineTo=function(t,e){this.$commands[this.commandPosition++]=2;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},i.curveTo=function(t,e,i,r){this.$commands[this.commandPosition++]=3;var n=this.dataPosition;this.$data[n++]=t,this.$data[n++]=e,this.$data[n++]=i,this.$data[n++]=r,this.dataPosition=n},i.cubicCurveTo=function(t,e,i,r,n,s){this.$commands[this.commandPosition++]=4;var a=this.dataPosition;this.$data[a++]=t,this.$data[a++]=e,this.$data[a++]=i,this.$data[a++]=r,this.$data[a++]=n,this.$data[a++]=s,this.dataPosition=a},i.drawRect=function(t,e,i,r){var n=t+i,s=e+r;this.moveTo(t,e),this.lineTo(n,e),this.lineTo(n,s),this.lineTo(t,s),this.lineTo(t,e)},i.drawRoundRect=function(t,e,i,r,n,s){var a=.5*n|0,o=s?.5*s|0:a;if(!a||!o)return void this.drawRect(t,e,i,r);var h=.5*i,l=.5*r;if(a>h&&(a=h),o>l&&(o=l),h===a&&l===o)return void(a===o?this.drawCircle(t+a,e+o,a):this.drawEllipse(t,e,2*a,2*o));var u=t+i,c=e+r,d=t+a,f=u-a,g=e+o,p=c-o;this.moveTo(u,p),this.curveTo(u,c,f,c),this.lineTo(d,c),this.curveTo(t,c,t,p),this.lineTo(t,g),this.curveTo(t,e,d,e),this.lineTo(f,e),this.curveTo(u,e,u,g),this.lineTo(u,p)},i.drawCircle=function(t,e,i){this.arcToBezier(t,e,i,i,0,2*Math.PI)},i.drawEllipse=function(t,e,i,r){var n=.5*i,s=.5*r;t+=n,e+=s,this.arcToBezier(t,e,n,s,0,2*Math.PI)},i.drawArc=function(t,e,i,r,n,s){s?n>=r&&(n-=2*Math.PI):r>=n&&(n+=2*Math.PI),this.arcToBezier(t,e,i,i,r,n,s)},i.arcToBezier=function(t,e,i,r,n,s,a){var o=.5*Math.PI,h=n,l=h;a?(l+=-o-h%o,s>l&&(l=s)):(l+=o-h%o,l>s&&(l=s));var u=t+Math.cos(h)*i,c=e+Math.sin(h)*r;this.moveTo(u,c);for(var d=Math.cos(h),f=Math.sin(h),g=0;4>g;g++){var p=l-h,v=4*Math.tan(p/4)/3,m=u-f*v*i,y=c+d*v*r;d=Math.cos(l),f=Math.sin(l),u=t+d*i,c=e+f*r;var T=u+f*v*i,x=c-d*v*r;if(this.cubicCurveTo(m,y,T,x,u,c),l===s)break;h=l,a?(l=h-o,s>l&&(l=s)):(l=h+o,l>s&&(l=s))}},t}();e.Path2D=i,t.registerClass(i,"egret.sys.Path2D")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.type=1}__extends(e,t);var i=e;return i.prototype,e}(e.Path2D);e.FillPath=i,t.registerClass(i,"egret.sys.FillPath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.type=2}__extends(e,t);var i=e;return i.prototype,e}(e.Path2D);e.GradientFillPath=i,t.registerClass(i,"egret.sys.GradientFillPath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.type=3}__extends(e,t);var i=e;return i.prototype,e}(e.Path2D);e.StrokePath=i,t.registerClass(i,"egret.sys.StrokePath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(t,e){var i=null==e.italic?t.italic:e.italic,r=null==e.bold?t.bold:e.bold,n=null==e.size?t.size:e.size,s=e.fontFamily||t.fontFamily,a=i?"italic ":"normal ";return a+=r?"bold ":"normal ",a+=n+"px "+s}function i(t,e){var i=t>>16,r=t>>8&255,n=255&t;return"rgba("+i+","+r+","+n+","+e+")"}function r(e,r,n,s,a,o){var h;h=r==t.GradientType.LINEAR?e.createLinearGradient(-1,0,1,0):e.createRadialGradient(0,0,0,0,0,1);for(var l=n.length,u=0;l>u;u++)h.addColorStop(a[u]/255,i(n[u],s[u]));return h}var n=["source-over","lighter","destination-out"],s="source-over",a="#000000",o={none:"butt",square:"square",round:"round"},h=[],l=function(){function l(){this.nestLevel=0,this.renderingMask=!1}var u=l,c=u.prototype;return c.render=function(t,e,i,r,n){this.nestLevel++;var s=e.context,a=n?t:null,o=this.drawDisplayObject(t,s,r,i,null,null,a);if(this.nestLevel--,0===this.nestLevel){h.length>6&&(h.length=6);for(var l=h.length,u=0;l>u;u++)h[u].resize(0,0)}return o},c.drawDisplayObject=function(e,i,r,n,s,a,o){var h,l=0;if(s&&!o?(s.isDirty&&(l+=s.drawToSurface()),h=s.$renderNode):h=e.$getRenderNode(),h){if(r){var u=h.renderRegion;if(a&&!a.intersects(u))h.needRedraw=!1;else if(!h.needRedraw)for(var c=r.length,d=0;c>d;d++)if(u.intersects(r[d])){h.needRedraw=!0;break}}else h.needRedraw=!0;if(h.needRedraw){var f,g;o?(f=e.$getConcatenatedAlphaAt(o,e.$getConcatenatedAlpha()),g=t.Matrix.create().copyFrom(e.$getConcatenatedMatrix()),e.$getConcatenatedMatrixAt(o,g),n.$preMultiplyInto(g,g),i.setTransform(g.a,g.b,g.c,g.d,g.tx,g.ty),t.Matrix.release(g)):(f=h.renderAlpha,g=h.renderMatrix,i.setTransform(g.a,g.b,g.c,g.d,g.tx+n.tx,g.ty+n.ty)),i.globalAlpha=f,l+=this.renderNode(h,i),h.needRedraw=!1}}if(s&&!o)return l;var p=e.$children;if(p)for(var v=p.length,m=0;v>m;m++){var y=p[m];!y.$visible||y.$alpha<=0||y.$maskedObject||(0!==y.$blendMode||y.$mask&&(y.$mask.$parentDisplayList||o)?l+=this.drawWithClip(y,i,r,n,a,o):y.$scrollRect||y.$maskRect?l+=this.drawWithScrollRect(y,i,r,n,a,o):y.isFPS?this.drawDisplayObject(y,i,r,n,y.$displayList,a,o):l+=this.drawDisplayObject(y,i,r,n,y.$displayList,a,o))}return l},c.drawWithClip=function(e,i,r,a,o,l){var u=0,c=0!==e.$blendMode;if(c){var d=n[e.$blendMode];d||(d=s)}var f=e.$scrollRect?e.$scrollRect:e.$maskRect,g=e.$mask;if(g){var p=g.$getRenderNode();if(p){var v=p.renderMatrix;if(0==v.a&&0==v.b||0==v.c&&0==v.d)return u}}var m,y=t.Matrix.create();if(y.copyFrom(e.$getConcatenatedMatrix()),e.$parentDisplayList){var T,x=e.$parentDisplayList.root;x!==e.$stage&&e.$getConcatenatedMatrixAt(x,y)}if(g){var _=g.$getOriginalBounds();m=t.sys.Region.create();var $=t.Matrix.create();$.copyFrom(g.$getConcatenatedMatrix()),T&&T.$preMultiplyInto($,$),m.updateRegion(_,$),t.Matrix.release($)}var E;if(f&&(E=t.sys.Region.create(),E.updateRegion(f,y)),E&&m?(E.intersect(m),t.sys.Region.release(m)):!E&&m&&(E=m),E){if(E.isEmpty()||o&&!o.intersects(E))return t.sys.Region.release(E),t.Matrix.release(y),u}else E=t.sys.Region.create(),_=e.$getOriginalBounds(),E.updateRegion(_,y);var b=!1;if(r){for(var w=r.length,S=0;w>S;S++)if(E.intersects(r[S])){b=!0;break}}else b=!0;if(!b)return t.sys.Region.release(E),t.Matrix.release(y),u;if(!(g||e.$children&&0!=e.$children.length)){if(f){var $=y;i.save(),i.setTransform($.a,$.b,$.c,$.d,$.tx-E.minX,$.ty-E.minY),i.beginPath(),i.rect(f.x,f.y,f.width,f.height),i.clip()}return c&&(i.globalCompositeOperation=d),u+=this.drawDisplayObject(e,i,r,a,e.$displayList,o,l),c&&(i.globalCompositeOperation=s),f&&i.restore(),u}if(g&&t.Capabilities.$runtimeType==t.RuntimeType.WEB&&(!g.$children||0==g.$children.length)&&p&&3==p.type&&1==p.drawData.length&&1==p.drawData[0].type&&1==p.drawData[0].fillAlpha){this.renderingMask=!0,i.save();var C=this.drawDisplayObject(g,i,r,a,g.$displayList,o,l);if(this.renderingMask=!1,f){var $=y;i.setTransform($.a,$.b,$.c,$.d,$.tx-E.minX,$.ty-E.minY),i.beginPath(),i.rect(f.x,f.y,f.width,f.height),i.clip()}return C+=this.drawDisplayObject(e,i,r,a,e.$displayList,o,l),i.restore(),C}var R=this.createRenderBuffer(E.width,E.height),L=R.context;if(!L)return u+=this.drawDisplayObject(e,i,r,a,e.$displayList,o,l),t.sys.Region.release(E),t.Matrix.release(y),u;L.setTransform(1,0,0,1,-E.minX,-E.minY);var D=t.Matrix.create().setTo(1,0,0,1,-E.minX,-E.minY);if(u+=this.drawDisplayObject(e,L,r,D,e.$displayList,E,l),g)if(t.Capabilities.$runtimeType==t.RuntimeType.WEB&&p&&1==p.$getRenderCount()||g.$displayList)L.globalCompositeOperation="destination-in",u+=this.drawDisplayObject(g,L,r,D,g.$displayList,E,l);else{var O=this.createRenderBuffer(E.width,E.height),F=O.context;if(!F)return u+=this.drawDisplayObject(e,i,r,a,e.$displayList,o,l),h.push(R),t.sys.Region.release(E),t.Matrix.release(y),u;F.setTransform(1,0,0,1,-E.minX,-E.minY),D=t.Matrix.create().setTo(1,0,0,1,-E.minX,-E.minY);var C=this.drawDisplayObject(g,F,r,D,g.$displayList,E,l);C>0&&(u+=C,L.globalCompositeOperation="destination-in",L.setTransform(1,0,0,1,0,0),L.globalAlpha=1,L.drawImage(O.surface,0,0)),h.push(O)}if(t.Matrix.release(D),u>0){if(u++,c&&(i.globalCompositeOperation=d),f){var $=y;i.save(),i.setTransform($.a,$.b,$.c,$.d,$.tx-E.minX,$.ty-E.minY),i.beginPath(),i.rect(f.x,f.y,f.width,f.height),i.clip()}i.globalAlpha=1,i.setTransform(1,0,0,1,E.minX+a.tx,E.minY+a.ty),i.drawImage(R.surface,0,0),f&&i.restore(),c&&(i.globalCompositeOperation=s)}return h.push(R),t.sys.Region.release(E),t.Matrix.release(y),u},c.drawWithScrollRect=function(e,i,r,n,s,a){var o=0,h=e.$scrollRect?e.$scrollRect:e.$maskRect;if(0==h.width||0==h.height)return o;var l=t.Matrix.create();if(l.copyFrom(e.$getConcatenatedMatrix()),a)e.$getConcatenatedMatrixAt(a,l);else if(e.$parentDisplayList){var u=e.$parentDisplayList.root;u!==e.$stage&&e.$getConcatenatedMatrixAt(u,l)}var c=t.sys.Region.create();if(h.isEmpty()||c.updateRegion(h,l),c.isEmpty()||s&&!s.intersects(c))return t.sys.Region.release(c),t.Matrix.release(l),o;var d=!1;if(r){for(var f=r.length,g=0;f>g;g++)if(c.intersects(r[g])){d=!0;break}}else d=!0;return d?(i.save(),i.setTransform(l.a,l.b,l.c,l.d,l.tx+n.tx,l.ty+n.ty),i.beginPath(),i.rect(h.x,h.y,h.width,h.height),i.clip(),o+=this.drawDisplayObject(e,i,r,n,e.$displayList,c,a),i.restore(),t.sys.Region.release(c),t.Matrix.release(l),o):(t.sys.Region.release(c),t.Matrix.release(l),o)},c.drawNodeToBuffer=function(t,e,i,r){var n=e.context;n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(t,n,r)},c.renderNode=function(t,e,i){var r=0;switch(t.type){case 1:r=this.renderBitmap(t,e);break;case 2:r=1,this.renderText(t,e);break;case 3:r=1,this.renderGraphics(t,e,i);break;case 4:r=this.renderGroup(t,e);break;case 5:e.setTransform(t.drawData[0],t.drawData[1],t.drawData[2],t.drawData[3],t.drawData[4],t.drawData[5]);break;case 6:e.globalAlpha=t.drawData[0]}return r},c.renderBitmap=function(t,e){var i=t.image;e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing);var r=t.drawData,a=r.length,o=0,h=t.matrix,l=t.blendMode,u=!1;h&&(e.saveTransform?e.saveTransform():e.save(),u=!0,e.transform(h.a,h.b,h.c,h.d,h.tx,h.ty)),l&&(e.globalCompositeOperation=n[l]);for(var c=0;a>o;)c++,e.drawImage(i,r[o++],r[o++],r[o++],r[o++],r[o++],r[o++],r[o++],r[o++]);return u?e.restoreTransform?(e.restoreTransform(),l&&(e.globalCompositeOperation=s)):e.restore():l&&(e.globalCompositeOperation=s),c},c.renderText=function(i,r){r.textAlign="left",r.textBaseline="middle",r.lineJoin="round";for(var n=i.drawData,s=n.length,a=0;s>a;){var o=n[a++],h=n[a++],l=n[a++],u=n[a++];r.font=e(i,u);var c=null==u.textColor?i.textColor:u.textColor,d=null==u.strokeColor?i.strokeColor:u.strokeColor,f=null==u.stroke?i.stroke:u.stroke;r.fillStyle=t.toColorString(c),r.strokeStyle=t.toColorString(d),f&&(r.lineWidth=2*f,r.strokeText(l,o,h)),r.fillText(l,o,h)}},c.renderGraphics=function(t,e,n){var s=t.drawData,h=s.length;n=!!n;for(var l=0;h>l;l++){var u=s[l];switch(u.type){case 1:var c=u;e.fillStyle=n?a:i(c.fillColor,c.fillAlpha),this.renderPath(u,e),this.renderingMask?e.clip():e.fill();break;case 2:var d=u;e.fillStyle=n?a:r(e,d.gradientType,d.colors,d.alphas,d.ratios,d.matrix),e.save();var f=d.matrix;this.renderPath(u,e),e.transform(f.a,f.b,f.c,f.d,f.tx,f.ty),e.fill(),e.restore();break;case 3:var g=u,p=g.lineWidth;e.lineWidth=p,e.strokeStyle=n?a:i(g.lineColor,g.lineAlpha),e.lineCap=o[g.caps],e.lineJoin=g.joints,e.miterLimit=g.miterLimit;var v=1===p||3===p;v&&e.translate(.5,.5),this.renderPath(u,e),e.stroke(),v&&e.translate(-.5,-.5)}}},c.renderPath=function(t,e){e.beginPath();for(var i=t.$data,r=t.$commands,n=r.length,s=0,a=0;n>a;a++){var o=r[a];switch(o){case 4:e.bezierCurveTo(i[s++],i[s++],i[s++],i[s++],i[s++],i[s++]);break;case 3:e.quadraticCurveTo(i[s++],i[s++],i[s++],i[s++]);break;case 2:e.lineTo(i[s++],i[s++]);break;case 1:e.moveTo(i[s++],i[s++])}}},c.renderGroup=function(t,e){for(var i=0,r=t.drawData,n=r.length,s=0;n>s;s++){var a=r[s];i+=this.renderNode(a,e)}return i},c.createRenderBuffer=function(e,i){var r=h.pop();return r?r.resize(e,i,!0):r=new t.sys.RenderBuffer(e,i),r},l}();t.CanvasRenderer=l,t.registerClass(l,"egret.CanvasRenderer",["egret.sys.SystemRenderer"])}(egret||(egret={}));var egret;!function(t){t.DeviceOrientation=null}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.WEB="web",t.NATIVE="native",t}();t.RuntimeType=e,t.registerClass(e,"egret.RuntimeType");var i=function(){function t(){}var e=__define,i=t;return i.prototype,e(t,"language",function(){return t.$language}),e(t,"isMobile",function(){return t.$isMobile}),e(t,"os",function(){return t.$os}),e(t,"runtimeType",function(){return t.$runtimeType}),e(t,"supportVersion",function(){return t.$supportVersion}),t.$setNativeCapabilities=function(e){var i=e.split("-");if(i.length<=4){var r=i[0];switch(r){case"android":r="Android";break;case"ios":r="iOS"}t.$os=r;var n=i[2].substring(1,i[2].length);t.$supportVersion=n}},e(t,"renderMode",function(){return t.$renderMode}),e(t,"boundingClientWidth",function(){return t.$boundingClientWidth}),e(t,"boundingClientHeight",function(){return t.$boundingClientHeight}),t.$language="zh-CN",t.$os="Unknown",t.$runtimeType="Unknown",t.$supportVersion="Unknown",t.$renderMode="Unknown",t.$boundingClientWidth=0,t.$boundingClientHeight=0,t}();t.Capabilities=i,t.registerClass(i,"egret.Capabilities")}(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},testRuntimeType=function(){return!!this.navigator};egret.Capabilities.$isMobile=testDeviceType(),egret.Capabilities.$runtimeType=testRuntimeType()?egret.RuntimeType.WEB:egret.RuntimeType.NATIVE;var egret;!function(t){var e=function(t){function e(e,i){t.call(this,e),this.firstCharHeight=0,"string"==typeof i?this.charList=this.parseConfig(i):i&&i.hasOwnProperty("frames")?this.charList=i.frames:this.charList={}}__extends(e,t);var i=e,r=i.prototype;return r.getTexture=function(t){var e=this._textureMap[t];if(!e){var i=this.charList[t];if(!i)return null;e=this.createTexture(t,i.x,i.y,i.w,i.h,i.offX,i.offY,i.sourceW,i.sourceH),this._textureMap[t]=e}return e},r.getConfig=function(t,e){return this.charList[t]?this.charList[t][e]:0},r._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var i=e.sourceH;if(void 0===i){var r=e.h;void 0===r&&(r=0);var n=e.offY;void 0===n&&(n=0),i=r+n}if(0>=i)continue;this.firstCharHeight=i;break}}return this.firstCharHeight},r.parseConfig=function(t){t=t.split("\r\n").join("\n");for(var e=t.split("\n"),i=this.getConfigByKey(e[3],"count"),r={},n=4;4+i>n;n++){var s=e[n],a=String.fromCharCode(this.getConfigByKey(s,"id")),o={};r[a]=o,o.x=this.getConfigByKey(s,"x"),o.y=this.getConfigByKey(s,"y"),o.w=this.getConfigByKey(s,"width"),o.h=this.getConfigByKey(s,"height"),o.offX=this.getConfigByKey(s,"xoffset"),o.offY=this.getConfigByKey(s,"yoffset"),o.xadvance=this.getConfigByKey(s,"xadvance")}return r},r.getConfigByKey=function(t,e){for(var i=t.split(" "),r=0,n=i.length;n>r;r++){var s=i[r];if(e==s.substring(0,e.length)){var a=s.substring(e.length+1);return parseInt(a)}}return 0},e}(t.SpriteSheet);t.BitmapFont=e,t.registerClass(e,"egret.BitmapFont")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$textOffsetX=0,this.$textOffsetY=0,this.$textStartX=0,this.$textStartY=0,this.$lineHeights=[],this.$renderNode=new t.sys.BitmapNode,this.$BitmapText={0:NaN,1:NaN,2:"",3:0,4:0,5:null,6:!1,7:!1,8:!1,9:!1,10:"left",11:"top",12:t.Bitmap.defaultSmoothing}}__extends(i,e);var r=__define,n=i,s=n.prototype;return r(s,"smoothing",function(){var t=this.$BitmapText;return t[12]},function(t){t=!!t;var e=this.$BitmapText;t!=e[12]&&(e[12]=t,this.$invalidate())}),r(s,"text",function(){return this.$BitmapText[2]},function(t){this.$setText(t)}),s.$setText=function(t){t=String(t);var e=this.$BitmapText;return t!=e[2]&&(e[2]=t,this.$invalidateContentBounds(),!0)},s.$getWidth=function(){var t=this.$BitmapText[0];return isNaN(t)?this.$getContentBounds().width:t},s.$setWidth=function(t){var e=this.$BitmapText;return!(0>t||t==e[0])&&(e[0]=t,this.$invalidateContentBounds(),!0)},s.$invalidateContentBounds=function(){e.prototype.$invalidateContentBounds.call(this),this.$BitmapText[7]=!0},s.$getHeight=function(){var t=this.$BitmapText[1];return isNaN(t)?this.$getContentBounds().height:t},s.$setHeight=function(t){var e=this.$BitmapText;return!(0>t||t==e[1])&&(e[1]=t,this.$invalidateContentBounds(),!0)},r(s,"font",function(){return this.$BitmapText[5]},function(t){this.$setFont(t)}),s.$setFont=function(t){var e=this.$BitmapText;return e[5]!=t&&(e[5]=t,this.$BitmapText[6]=!0,this.$invalidateContentBounds(),!0)},r(s,"lineSpacing",function(){return this.$BitmapText[3]},function(t){this.$setLineSpacing(t)}),s.$setLineSpacing=function(t){t=+t||0;var e=this.$BitmapText;return e[3]!=t&&(e[3]=t,this.$invalidateContentBounds(),!0)},r(s,"letterSpacing",function(){return this.$BitmapText[4]},function(t){this.$setLetterSpacing(t)}),s.$setLetterSpacing=function(t){t=+t||0;var e=this.$BitmapText;return e[4]!=t&&(e[4]=t,this.$invalidateContentBounds(),!0)},r(s,"textAlign",function(){return this.$BitmapText[10]},function(t){this.$setTextAlign(t)}),s.$setTextAlign=function(t){var e=this.$BitmapText;return e[10]!=t&&(e[10]=t,this.$invalidateContentBounds(),!0)},r(s,"verticalAlign",function(){return this.$BitmapText[11]},function(t){this.$setVerticalAlign(t)}),s.$setVerticalAlign=function(t){var e=this.$BitmapText;return e[11]!=t&&(e[11]=t,this.$invalidateContentBounds(),!0)},s.$render=function(){var e=this.$BitmapText,r=this.$getTextLines(),n=r.length;if(0!=n){var s=this.$textLinesWidth,a=e[5],o=this.$renderNode;a.$texture&&(o.image=a.$texture._bitmapData),o.smoothing=e[12];for(var h=a._getFirstCharHeight(),l=Math.ceil(h*i.EMPTY_FACTOR),u=!isNaN(e[1]),c=e[8],d=e[0],f=e[1],g=e[10],p=this.$textOffsetY+this.$textStartY,v=this.$lineHeights,m=0;n>m;m++){var y=v[m];if(u&&m>0&&p+y>f)break;var T=r[m],x=T.length,_=this.$textOffsetX;if(g!=t.HorizontalAlign.LEFT){var $=d>c?d:c;g==t.HorizontalAlign.RIGHT?_+=$-s[m]:g==t.HorizontalAlign.CENTER&&(_+=Math.floor(($-s[m])/2))}for(var E=0;x>E;E++){var b=T.charAt(E),w=a.getTexture(b);if(w){var S=w._bitmapWidth,C=w._bitmapHeight;o.imageWidth=w._sourceWidth,o.imageHeight=w._sourceHeight,o.drawImage(w._bitmapX,w._bitmapY,S,C,_+w._offsetX,p+w._offsetY,w.$getScaleBitmapWidth(),w.$getScaleBitmapHeight()),_+=a.getConfig(b,"xadvance")||w.$getTextureWidth()+e[4]}else" "==b?_+=l:t.$warn(1046,b)}p+=y+e[3]}}},s.$measureContentBounds=function(t){var e=this.$getTextLines();0==e.length?t.setEmpty():t.setTo(this.$textOffsetX+this.$textStartX,this.$textOffsetY+this.$textStartY,this.$BitmapText[8]-this.$textOffsetX,this.$BitmapText[9]-this.$textOffsetY)},r(s,"textWidth",function(){return this.$getTextLines(),this.$BitmapText[8]}),r(s,"textHeight",function(){return this.$getTextLines(),this.$BitmapText[9]}),s.$getTextLines=function(){function e(t){return!(p&&n.length>0&&u>p)&&(u+=S+o,R||L||(C-=h),n.push(t),a.push(S),s.push(C),l=Math.max(C,l),!0)}var r=this.$BitmapText;if(!r[7])return this.textLines;var n=[];this.textLines=n;var s=[];this.$textLinesWidth=s,r[7]=!1;var a=[];if(this.$lineHeights=a,!r[2]||!r[5])return n;for(var o=r[3],h=r[4],l=0,u=0,c=0,d=0,f=!isNaN(r[0]),g=r[0],p=r[1],v=r[5],m=v._getFirstCharHeight(),y=Math.ceil(m*i.EMPTY_FACTOR),T=r[2],x=T.split(/(?:\r\n|\r|\n)/),_=x.length,$=!0,E=0;_>E;E++){for(var b=x[E],w=b.length,S=0,C=0,R=!0,L=!1,D=0;w>D;D++){R||(C+=h);var O,F,P=b.charAt(D),I=0,M=0,A=v.getTexture(P);if(A)O=A.$getTextureWidth(),F=A.$getTextureHeight(),I=A._offsetX,M=A._offsetY;else{if(" "!=P){t.$warn(1046,P),R&&(R=!1);continue}O=y,F=m}if(R&&(R=!1,c=Math.min(I,c)),$&&($=!1,d=Math.min(M,d)),f&&D>0&&C+O>g){if(!e(b.substring(0,D)))break;b=b.substring(D),w=b.length,D=0,C=D==w-1?O:v.getConfig(P,"xadvance")||O,S=F}else C+=D==w-1?O:v.getConfig(P,"xadvance")||O,S=Math.max(F,S)}if(p&&E>0&&u>p)break;if(L=!0,!e(b))break}u-=o,r[8]=l,r[9]=u,this.$textOffsetX=c,this.$textOffsetY=d,this.$textStartX=0,this.$textStartY=0;var B;return g>l&&(B=r[10],B==t.HorizontalAlign.RIGHT?this.$textStartX=g-l:B==t.HorizontalAlign.CENTER&&(this.$textStartX=Math.floor((g-l)/2))),p>u&&(B=r[11],B==t.VerticalAlign.BOTTOM?this.$textStartY=p-u:B==t.VerticalAlign.MIDDLE&&(this.$textStartY=Math.floor((p-u)/2))),n},i.EMPTY_FACTOR=.33,i}(t.DisplayObject);t.BitmapText=e,t.registerClass(e,"egret.BitmapText")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.HorizontalAlign=e,t.registerClass(e,"egret.HorizontalAlign")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}var i=e,r=i.prototype;return r.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},r.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var i=this.replaceArr[e][0],r=this.replaceArr[e][1];t=t.replace(i,r)}return t},r.parser=function(e){this.stackArray=[],this.resutlArr=[];for(var i=0,r=e.length;r>i;){var n=e.indexOf("<",i);if(0>n)this.addToResultArr(e.substring(i)),i=r;else{this.addToResultArr(e.substring(i,n));var s=e.indexOf(">",n);-1==s?(t.$error(1038),s=n):"/"==e.charAt(n+1)?this.stackArray.pop():this.addToArray(e.substring(n+1,s)),i=s+1}}return this.resutlArr},r.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),this.stackArray.length>0?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},r.changeStringToObject=function(t){t=t.trim();var e={},i=[];if("i"==t.charAt(0)||"b"==t.charAt(0)||"u"==t.charAt(0))this.addProperty(e,t,"true");else if(i=t.match(/^(font|a)\s/)){t=t.substring(i[0].length).trim();for(var r,n=0;r=t.match(this.getHeadReg());){var s=r[0],a="",t=t.substring(s.length).trim();if('"'==t.charAt(0)){var n=t.indexOf('"',1);a=t.substring(1,n),n+=1}else if("'"==t.charAt(0)){var n=t.indexOf("'",1);a=t.substring(1,n),n+=1}else a=t.match(/(\S)+/)[0],n=a.length;this.addProperty(e,s.substring(0,s.length-1).trim(),a.trim()),t=t.substring(n).trim()}}return e},r.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|u|size|fontfamily|href|target)(\s)*=/},r.addProperty=function(t,e,i){switch(e.toLowerCase()){case"color":case"textcolor":i=i.replace(/#/,"0x"),t.textColor=parseInt(i);break;case"strokecolor":i=i.replace(/#/,"0x"),t.strokeColor=parseInt(i);break;case"stroke":t.stroke=parseInt(i);break;case"b":case"bold":t.bold="true"==i;break;case"u":t.underline="true"==i;break;case"i":case"italic":t.italic="true"==i;break;case"size":t.size=parseInt(i);break;case"fontfamily":t.fontFamily=i;break;case"href":t.href=this.replaceSpecial(i);break;case"target":t.target=this.replaceSpecial(i)}},r.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var i=this.stackArray[this.stackArray.length-1];for(var r in i)null==e[r]&&(e[r]=i[r]);this.stackArray.push(e)}},e}();t.HtmlTextParser=e,t.registerClass(e,"egret.HtmlTextParser")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this._text=null,this._isFocus=!1}__extends(i,e);var r=i,n=r.prototype;return n.init=function(e){this._text=e,this.stageText=new t.StageText,this.stageText.$setTextField(this._text)},n._addStageText=function(){this._text.$inputEnabled||(this._text.$touchEnabled=!0),this.tempStage=this._text.stage,this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this)},n._removeStageText=function(){this._text.$inputEnabled||(this._text.$touchEnabled=!1),this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),
this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this)},n._getText=function(){return this.stageText.$getText()},n._setText=function(t){this.stageText.$setText(t)},n._setColor=function(t){this.stageText.$setColor(t)},n.focusHandler=function(e){this._isFocus||(this._isFocus=!0,e.showing||(this._text.$isTyping=!0),this._text.$invalidateContentBounds(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_IN,(!0))))},n.blurHandler=function(e){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$isTyping=!1,this._text.$invalidateContentBounds(),this.stageText.$onBlur(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_OUT,(!0))))},n.onMouseDownHandler=function(t){t.stopPropagation(),this.$onFocus()},n.$onFocus=function(){this._text.visible&&(this._isFocus||(this.tempStage.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.$show()))},n.onStageDownHandler=function(t){this.stageText.$hide()},n.updateTextHandler=function(e){var i=this._text.$TextField,r=this.stageText.$getText(),n=!1;if(null!=i[35]){var s=new RegExp("["+i[35]+"]","g"),a=r.match(s);r=a?a.join(""):"",n=!0}null!=i[36]&&(s=new RegExp("[^"+i[36]+"]","g"),a=r.match(s),r=a?a.join(""):"",n=!0),n&&this.stageText.$getText()!=r&&this.stageText.$setText(r),this.resetText(),this._text.dispatchEvent(new t.Event(t.Event.CHANGE,(!0)))},n.resetText=function(){this._text.$setBaseText(this.stageText.$getText())},n._hideInput=function(){this.stageText.$removeFromStage()},n.updateInput=function(){!this._text.$visible&&this.stageText&&this._hideInput()},n._updateProperties=function(){if(this._isFocus)return this.stageText.$resetStageText(),void this.updateInput();var t=this._text.$stage;if(null==t);else for(var e=this._text,i=e.$visible;i&&(e=e.parent,e!=t);)i=e.$visible;this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),this.updateInput()},i}(t.HashObject);t.InputController=e,t.registerClass(e,"egret.InputController")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(e,i,n){n=n||{};var s=null==n.italic?i[16]:n.italic,a=null==n.bold?i[15]:n.bold,o=null==n.size?i[0]:n.size,h=n.fontFamily||i[8]||r.default_fontFamily;return t.sys.measureText(e,h,o,a,s)}var i=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![)}\\.\\,\\!\\?\\]\\:])"),r=function(r){function n(){r.call(this),this.$inputEnabled=!1,this.inputUtils=null,this.graphicsNode=null,this.isFlow=!1,this.textArr=[],this.linesArr=[],this.$isTyping=!1;var e=new t.sys.TextNode;e.fontFamily=n.default_fontFamily,this.textNode=e,this.$renderNode=e,this.$TextField={0:30,1:0,2:16777215,3:NaN,4:NaN,5:0,6:0,7:0,8:n.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:t.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:t.TextFieldInputType.TEXT}}__extends(n,r);var s=__define,a=n,o=a.prototype;return o.isInput=function(){return this.$TextField[24]==t.TextFieldType.INPUT},o.$setTouchEnabled=function(t){var e=r.prototype.$setTouchEnabled.call(this,t);return this.isInput()&&(this.$inputEnabled=!0),e},s(o,"fontFamily",function(){return this.$TextField[8]},function(t){this.$setFontFamily(t)}),o.$setFontFamily=function(t){var e=this.$TextField;return e[8]!=t&&(e[8]=t,this.invalidateFontString(),!0)},s(o,"size",function(){return this.$TextField[0]},function(t){this.$setSize(t)}),o.$setSize=function(t){t=+t||0;var e=this.$TextField;return e[0]!=t&&(e[0]=t,this.invalidateFontString(),!0)},s(o,"bold",function(){return this.$TextField[15]},function(t){this.$setBold(t)}),o.$setBold=function(t){t=!!t;var e=this.$TextField;return t!=e[15]&&(e[15]=t,this.invalidateFontString(),!0)},s(o,"italic",function(){return this.$TextField[16]},function(t){this.$setItalic(t)}),o.$setItalic=function(t){t=!!t;var e=this.$TextField;return t!=e[16]&&(e[16]=t,this.invalidateFontString(),!0)},o.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},s(o,"textAlign",function(){return this.$TextField[9]},function(t){this.$setTextAlign(t)}),o.$setTextAlign=function(t){var e=this.$TextField;return e[9]!=t&&(e[9]=t,this.$invalidateTextField(),!0)},s(o,"verticalAlign",function(){return this.$TextField[10]},function(t){this.$setVerticalAlign(t)}),o.$setVerticalAlign=function(t){var e=this.$TextField;return e[10]!=t&&(e[10]=t,this.$invalidateTextField(),!0)},s(o,"lineSpacing",function(){return this.$TextField[1]},function(t){this.$setLineSpacing(t)}),o.$setLineSpacing=function(t){t=+t||0;var e=this.$TextField;return e[1]!=t&&(e[1]=t,this.$invalidateTextField(),!0)},s(o,"textColor",function(){return this.$TextField[2]},function(t){this.$setTextColor(t)}),o.$setTextColor=function(t){t=0|+t;var e=this.$TextField;return e[2]!=t&&(e[2]=t,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidate(),!0)},s(o,"wordWrap",function(){return this.$TextField[19]},function(t){t=!!t;var e=this.$TextField;t!=e[19]&&(e[20]||(e[19]=t,this.$invalidateTextField()))}),s(o,"type",function(){return this.$TextField[24]},function(t){this.$setType(t)}),o.$setType=function(e){var i=this.$TextField;return i[24]!=e&&(i[24]=e,e==t.TextFieldType.INPUT?(isNaN(i[3])&&this.$setWidth(100),isNaN(i[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new t.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0)},s(o,"inputType",function(){return this.$TextField[37]},function(t){this.$TextField[37]=t}),s(o,"text",function(){return this.$getText()},function(t){this.$setText(t)}),o.$getText=function(){return this.$TextField[24]==t.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},o.$setBaseText=function(t){null==t&&(t=""),t=t.toString(),this.isFlow=!1;var e=this.$TextField;if(e[13]!=t){this.$invalidateTextField(),e[13]=t;var i="";return i=e[20]?this.changeToPassText(t):t,this.setMiddleStyle([{text:i}]),!0}return!1},o.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},s(o,"displayAsPassword",function(){return this.$TextField[20]},function(t){this.$setDisplayAsPassword(t)}),o.$setDisplayAsPassword=function(t){var e=this.$TextField;if(e[20]!=t){e[20]=t,this.$invalidateTextField();var i="";return i=t?this.changeToPassText(e[13]):e[13],this.setMiddleStyle([{text:i}]),!0}return!1},s(o,"strokeColor",function(){return this.$TextField[25]},function(t){t=+t||0,this.$setStrokeColor(t)}),o.$setStrokeColor=function(e){var i=this.$TextField;return i[25]!=e&&(this.$invalidateTextField(),i[25]=e,i[26]=t.toColorString(e),!0)},s(o,"stroke",function(){return this.$TextField[27]},function(t){this.$setStroke(t)}),o.$setStroke=function(t){return this.$TextField[27]!=t&&(this.$invalidateTextField(),this.$TextField[27]=t,!0)},s(o,"maxChars",function(){return this.$TextField[21]},function(t){this.$setMaxChars(t)}),o.$setMaxChars=function(t){return this.$TextField[21]!=t&&(this.$TextField[21]=t,!0)},s(o,"scrollV",function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},function(t){this.$TextField[28]=Math.max(t,1),this.$invalidateTextField()}),s(o,"maxScrollV",function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-t.TextFieldUtils.$getScrollNum(this)+1,1)}),s(o,"selectionBeginIndex",function(){return 0}),s(o,"selectionEndIndex",function(){return 0}),s(o,"caretIndex",function(){return 0}),o.$setSelection=function(t,e){return!1},o.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},s(o,"numLines",function(){return this.$getLinesArr(),this.$TextField[29]}),s(o,"multiline",function(){return this.$TextField[30]},function(t){this.$setMultiline(t)}),o.$setMultiline=function(t){return this.$TextField[30]=t,this.$invalidateTextField(),!0},s(o,"restrict",function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&(i=t.indexOf("^",i),0!=i)&&i>0&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):i>0?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}}),o.$setWidth=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[3]))return!1;e[3]=NaN}else{if(e[3]==t)return!1;e[3]=t}return t=+t,!(0>t)&&(this.$invalidateTextField(),!0)},o.$setHeight=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[4]))return!1;e[4]=NaN}else{if(e[4]==t)return!1;e[4]=t}return t=+t,!(0>t)&&(this.$invalidateTextField(),!0)},o.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},o.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},s(o,"border",function(){return this.$TextField[31]},function(t){this.$TextField[31]=!!t,this.$invalidate()}),s(o,"borderColor",function(){return this.$TextField[32]},function(t){this.$TextField[32]=+t||0,this.$invalidate()}),s(o,"background",function(){return this.$TextField[33]},function(t){this.$TextField[33]=t,this.$invalidate()}),s(o,"backgroundColor",function(){return this.$TextField[34]},function(t){this.$TextField[34]=t,this.$invalidate()}),o.fillBackground=function(e){var i=this.graphicsNode;i&&i.clear();var r=this.$TextField;if(r[33]||r[31]||e.length>0){if(!i){i=this.graphicsNode=new t.sys.GraphicsNode;var n=new t.sys.GroupNode;n.addNode(i),n.addNode(this.textNode),this.$renderNode=n}var s,a;if(r[33]&&(s=i.beginFill(r[34]),s.drawRect(0,0,this.$getWidth(),this.$getHeight())),r[31]&&(a=i.lineStyle(1,r[32]),a.drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1)),e.length>0)for(var o=r[2],h=-1,l=e.length,u=0;l>u;u+=4){var c=e[u],d=e[u+1],f=e[u+2],g=e[u+3]||o;(0>h||h!=g)&&(h=g,a=i.lineStyle(2,g,1,t.CapsStyle.NONE)),a.moveTo(c,d),a.lineTo(c+f,d)}}if(i){var p=this.$getRenderBounds();i.x=p.x,i.y=p.y,i.width=p.width,i.height=p.height,t.Rectangle.release(p)}},o.setFocus=function(){this.type==t.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},o.$onRemoveFromStage=function(){r.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._removeStageText()},o.$onAddToStage=function(e,i){r.prototype.$onAddToStage.call(this,e,i),this.addEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._addStageText()},o.$invalidateTextField=function(){this.$invalidateContentBounds(),this.$TextField[18]=!0},o.$update=function(e,i){var n=this.$getRenderBounds(),s=r.prototype.$update.call(this,e,n);return t.Rectangle.release(n),s},o.$getRenderBounds=function(){var e=this.$getContentBounds(),i=t.Rectangle.create();i.copyFrom(e),this.$TextField[31]&&(i.width+=2,i.height+=2);var r=2*this.$TextField[27];return r>0&&(i.width+=2*r,i.height+=2*r),i.x-=r+2,i.y-=r+2,i.width=Math.ceil(i.width)+4,i.height=Math.ceil(i.height)+4,i},o.$measureContentBounds=function(e){this.$getLinesArr();var i=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],r=isNaN(this.$TextField[4])?t.TextFieldUtils.$getTextHeight(this):this.$TextField[4];e.setTo(0,0,i,r)},o.$render=function(){if(this.$TextField[24]==t.TextFieldType.INPUT){if((this.$hasAnyFlags(2032)||this.$hasAnyFlags(1648))&&this.inputUtils._updateProperties(),this.$isTyping)return}else if(0==this.$TextField[3])return;var e=this.drawText();this.fillBackground(e);var i=this.$getRenderBounds(),r=this.textNode;r.x=i.x,r.y=i.y,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),t.Rectangle.release(i)},s(o,"textFlow",function(){return this.textArr},function(t){this.isFlow=!0;var e="";null==t&&(t=[]);for(var i=0;i<t.length;i++){var r=t[i];e+=r.text}this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.setMiddleStyle(t))}),o.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,r=t.length;r>i;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},o.setMiddleStyle=function(t){this.$TextField[18]=!0,this.textArr=t,this.$invalidateTextField()},s(o,"textWidth",function(){return this.$getLinesArr(),this.$TextField[5]}),s(o,"textHeight",function(){return this.$getLinesArr(),t.TextFieldUtils.$getTextHeight(this)}),o.appendText=function(t){this.appendElement({text:t})},o.appendElement=function(t){var e=this.$TextField[13]+t.text;this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.textArr.push(t),this.setMiddleStyle(this.textArr))},o.$getLinesArr=function(){var r=this.$TextField;if(!r[18])return this.linesArr;r[18]=!1;var n=this.textArr;this.linesArr.length=0,r[6]=0,r[5]=0;var s=r[3];if(!isNaN(s)&&0==s)return r[29]=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var a,o=this.linesArr,h=0,l=0,u=0,c=0,d=0,f=n.length;f>d;d++){var g=n[d];if(g.text){g.style=g.style||{};for(var p=g.text.toString(),v=p.split(/(?:\r\n|\r|\n)/),m=0,y=v.length;y>m;m++){null==o[c]&&(a={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},o[c]=a,h=0,u=0,l=0),u=r[24]==t.TextFieldType.INPUT?r[0]:Math.max(u,g.style.size||r[0]);var T=!0;if(""==v[m])m==y-1&&(T=!1);else{var x=e(v[m],r,g.style);if(isNaN(s))h+=x,l+=v[m].length,a.elements.push({width:x,text:v[m],style:g.style}),m==y-1&&(T=!1);else if(s>=h+x)a.elements.push({width:x,text:v[m],style:g.style}),h+=x,l+=v[m].length,m==y-1&&(T=!1);else{var _=0,$=0,E=v[m];if(r[19])var b=E.split(i);else b=E.match(/./g);for(var w=b.length,S=0;w>_&&(x=e(b[_],r,g.style),!(0!=h&&h+x>s&&h+_!=0));_++)if($+x>s)for(var C=b[_].match(/./g),R=0,L=C.length;L>R&&(x=e(C[R],r,g.style),!(R>0&&h+x>s));R++)S+=C[R].length,$+=x,h+=x,l+=S;else S+=b[_].length,$+=x,h+=x,l+=S;if(_>0){a.elements.push({width:$,text:E.substring(0,S),style:g.style});for(var D=E.substring(S),O=0,F=D.length;F>O&&" "==D.charAt(O);O++);v[m]=D.substring(O)}""!=v[m]&&(m--,T=!1)}}T&&(l++,a.hasNextLine=!0),m<v.length-1&&(a.width=h,a.height=u,a.charNum=l,r[5]=Math.max(r[5],h),r[6]+=u,c++)}d==n.length-1&&a&&(a.width=h,a.height=u,a.charNum=l,r[5]=Math.max(r[5],h),r[6]+=u)}}return r[29]=o.length,o},o.drawText=function(){var e=this.textNode,i=this.$TextField;e.bold=i[15],e.fontFamily=i[8]||n.default_fontFamily,e.italic=i[16],e.size=i[0],e.stroke=i[27],e.strokeColor=i[25],e.textColor=i[2];var r=this.$getLinesArr();if(0==i[5])return[];var s=isNaN(i[3])?i[5]:i[3],a=t.TextFieldUtils.$getTextHeight(this),o=0,h=t.TextFieldUtils.$getStartLine(this),l=i[4];if(!isNaN(l)&&l>a){var u=t.TextFieldUtils.$getValign(this);o+=u*(l-a)}o=Math.round(o);for(var c=t.TextFieldUtils.$getHalign(this),d=0,f=[],g=h,p=i[29];p>g;g++){var v=r[g],m=v.height;if(o+=m/2,g!=h){if(i[24]==t.TextFieldType.INPUT&&!i[30])break;if(!isNaN(l)&&o>l)break}d=Math.round((s-v.width)*c);for(var y=0,T=v.elements.length;T>y;y++){var x=v.elements[y],_=x.style.size||i[0];e.drawText(d,o+(m-_)/2,x.text,x.style),x.style.underline&&f.push(d,o+m/2,x.width,x.style.textColor),d+=x.width}o+=m/2+i[1]}return f},o.addEvent=function(){this.addEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},o.removeEvent=function(){this.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},o.onTapHandler=function(e){if(this.$TextField[24]!=t.TextFieldType.INPUT){var i=t.TextFieldUtils.$getTextElement(this,e.localX,e.localY);if(null!=i){var r=i.style;if(r&&r.href)if(r.href.match(/^event:/)){var n=r.href.match(/^event:/)[0];t.TextEvent.dispatchTextEvent(this,t.TextEvent.LINK,r.href.substring(n.length))}else open(r.href,r.target||"_blank")}}},n.default_fontFamily="Arial",n}(t.DisplayObject);t.TextField=r,t.registerClass(r,"egret.TextField")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.TEXT="text",t.TEL="tel",t.PASSWORD="password",t}();t.TextFieldInputType=e,t.registerClass(e,"egret.TextFieldInputType")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.DYNAMIC="dynamic",t.INPUT="input",t}();t.TextFieldType=e,t.registerClass(e,"egret.TextFieldType")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}var i=e;return i.prototype,e.$getStartLine=function(t){var i=t.$TextField,r=e.$getTextHeight(t),n=0,s=i[4];return isNaN(s)||(s>r||r>s&&(n=Math.max(i[28]-1,0),n=Math.min(i[29]-1,n)),i[30]||(n=Math.max(i[28]-1,0),i[29]>0&&(n=Math.min(i[29]-1,n)))),n},e.$getHalign=function(e){var i=e.$getLinesArr(),r=0;return e.$TextField[9]==t.HorizontalAlign.CENTER?r=.5:e.$TextField[9]==t.HorizontalAlign.RIGHT&&(r=1),e.$TextField[24]==t.TextFieldType.INPUT&&!e.$TextField[30]&&i.length>1&&(r=0),r},e.$getTextHeight=function(e){var i=t.TextFieldType.INPUT!=e.$TextField[24]||e.$TextField[30]?e.$TextField[6]+(e.$TextField[29]-1)*e.$TextField[1]:e.$TextField[0];return i},e.$getValign=function(i){var r=e.$getTextHeight(i),n=i.$TextField[4];if(!isNaN(n)&&n>r){var s=0;return i.$TextField[10]==t.VerticalAlign.MIDDLE?s=.5:i.$TextField[10]==t.VerticalAlign.BOTTOM&&(s=1),s}return 0},e.$getTextElement=function(t,i,r){var n=e.$getHit(t,i,r),s=t.$getLinesArr();return n&&s[n.lineIndex]&&s[n.lineIndex].elements[n.textElementIndex]?s[n.lineIndex].elements[n.textElementIndex]:null},e.$getHit=function(t,i,r){var n=t.$getLinesArr();if(0==t.$TextField[3])return null;var s=0,a=e.$getTextHeight(t),o=0,h=t.$TextField[4];if(!isNaN(h)&&h>a){var l=e.$getValign(t);o=l*(h-a),0!=o&&(r-=o)}for(var u=e.$getStartLine(t),c=0,d=u;d<n.length;d++){var f=n[d];if(c+f.height>=r){s=d+1;break}if(c+=f.height,c+t.$TextField[1]>r)return null;c+=t.$TextField[1]}if(0==s)return null;var g=n[s-1],p=0;for(d=0;d<g.elements.length;d++){var v=g.elements[d];if(!(p+v.width<i))return{lineIndex:s-1,textElementIndex:d};p+=v.width}return null},e.$getScrollNum=function(t){var e=1;if(t.$TextField[30]){var i=t.height,r=t.size,n=t.lineSpacing;e=Math.floor(i/(r+n));var s=i-(r+n)*e;s>r/2&&e++}return e},e}();t.TextFieldUtils=e,t.registerClass(e,"egret.TextFieldUtils")}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.VerticalAlign=e,t.registerClass(e,"egret.VerticalAlign")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();t.Endian=e,t.registerClass(e,"egret.Endian");var i=function(){function i(t){this.BUFFER_EXT_SIZE=0,this.EOF_byte=-1,this.EOF_code_point=-1,this._setArrayBuffer(t||new ArrayBuffer(this.BUFFER_EXT_SIZE)),this.endian=e.BIG_ENDIAN}var r=__define,n=i,s=n.prototype;return s._setArrayBuffer=function(t){this.write_position=t.byteLength,this.data=new DataView(t),this._position=0},s.setArrayBuffer=function(t){},r(s,"buffer",function(){return this.data.buffer},function(t){this.data=new DataView(t)}),r(s,"dataView",function(){return this.data},function(t){this.data=t,this.write_position=t.byteLength}),r(s,"bufferOffset",function(){return this.data.byteOffset}),r(s,"position",function(){return this._position},function(t){this._position=t,this.write_position=t>this.write_position?t:this.write_position}),r(s,"length",function(){return this.write_position},function(t){this.write_position=t;var e=new Uint8Array(new ArrayBuffer(t)),i=this.data.buffer.byteLength;i>t&&(this._position=t);var r=Math.min(i,t);e.set(new Uint8Array(this.data.buffer,0,r)),this.buffer=e.buffer}),r(s,"bytesAvailable",function(){return this.data.byteLength-this._position}),s.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))},s.readBoolean=function(){return this.validate(i.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null},s.readByte=function(){return this.validate(i.SIZE_OF_INT8)?this.data.getInt8(this.position++):null},s.readBytes=function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),0==r)r=this.bytesAvailable;else if(!this.validate(r))return null;t?t.validateBuffer(e+r):t=new i(new ArrayBuffer(e+r));for(var n=0;r>n;n++)t.data.setUint8(n+e,this.data.getUint8(this.position++))},s.readDouble=function(){if(!this.validate(i.SIZE_OF_FLOAT64))return null;var t=this.data.getFloat64(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT64,t},s.readFloat=function(){if(!this.validate(i.SIZE_OF_FLOAT32))return null;var t=this.data.getFloat32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT32,t},s.readInt=function(){if(!this.validate(i.SIZE_OF_INT32))return null;var t=this.data.getInt32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT32,t},s.readShort=function(){if(!this.validate(i.SIZE_OF_INT16))return null;var t=this.data.getInt16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT16,t},s.readUnsignedByte=function(){return this.validate(i.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null},s.readUnsignedInt=function(){if(!this.validate(i.SIZE_OF_UINT32))return null;var t=this.data.getUint32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT32,t},s.readUnsignedShort=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,t},s.readUTF=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,t>0?this.readUTFBytes(t):""},s.readUTFBytes=function(t){if(!this.validate(t))return null;var e=new Uint8Array(this.buffer,this.bufferOffset+this.position,t);return this.position+=t,this.decodeUTF8(e)},s.writeBoolean=function(t){this.validateBuffer(i.SIZE_OF_BOOLEAN),this.data.setUint8(this.position++,t?1:0)},s.writeByte=function(t){this.validateBuffer(i.SIZE_OF_INT8),this.data.setInt8(this.position++,t)},s.writeBytes=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var r;if(!(0>e)&&!(0>i)&&(r=0==i?t.length-e:Math.min(t.length-e,i),r>0)){this.validateBuffer(r);for(var n=new DataView(t.buffer),i=r,s=4;i>s;i-=s)this.data.setUint32(this._position,n.getUint32(e)),this.position+=s,e+=s;for(;i>0;i--)this.data.setUint8(this.position++,n.getUint8(e++))}},s.writeDouble=function(t){this.validateBuffer(i.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT64},s.writeFloat=function(t){this.validateBuffer(i.SIZE_OF_FLOAT32),this.data.setFloat32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT32},s.writeInt=function(t){this.validateBuffer(i.SIZE_OF_INT32),this.data.setInt32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT32},s.writeShort=function(t){this.validateBuffer(i.SIZE_OF_INT16),this.data.setInt16(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT16},s.writeUnsignedInt=function(t){this.validateBuffer(i.SIZE_OF_UINT32),this.data.setUint32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT32},s.writeUnsignedShort=function(t){this.validateBuffer(i.SIZE_OF_UINT16),this.data.setUint16(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT16},s.writeUTF=function(t){var r=this.encodeUTF8(t),n=r.length;this.validateBuffer(i.SIZE_OF_UINT16+n),this.data.setUint16(this.position,n,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT16,this._writeUint8Array(r,!1)},s.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},s.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},s._writeUint8Array=function(t,e){void 0===e&&(e=!0),e&&this.validateBuffer(this.position+t.length);for(var i=0;i<t.length;i++)this.data.setUint8(this.position++,t[i])},s.validate=function(e){return this.data.byteLength>0&&this._position+e<=this.data.byteLength||void t.$error(1025)},s.validateBuffer=function(t,e){if(void 0===e&&(e=!1),this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this.data.byteLength<t||e){var i=new Uint8Array(new ArrayBuffer(t+this.BUFFER_EXT_SIZE)),r=Math.min(this.data.buffer.byteLength,t+this.BUFFER_EXT_SIZE);i.set(new Uint8Array(this.data.buffer,0,r)),this.buffer=i.buffer}},s.encodeUTF8=function(t){for(var e=0,i=this.stringToCodePoints(t),r=[];i.length>e;){var n=i[e++];if(this.inRange(n,55296,57343))this.encoderError(n);else if(this.inRange(n,0,127))r.push(n);else{var s,a;for(this.inRange(n,128,2047)?(s=1,a=192):this.inRange(n,2048,65535)?(s=2,a=224):this.inRange(n,65536,1114111)&&(s=3,a=240),r.push(this.div(n,Math.pow(64,s))+a);s>0;){var o=this.div(n,Math.pow(64,s-1));r.push(128+o%64),s-=1}}}return new Uint8Array(r)},s.decodeUTF8=function(t){for(var e,i=!1,r=0,n="",s=0,a=0,o=0,h=0;t.length>r;){var l=t[r++];if(l==this.EOF_byte)e=0!=a?this.decoderError(i):this.EOF_code_point;else if(0==a)this.inRange(l,0,127)?e=l:(this.inRange(l,194,223)?(a=1,h=128,s=l-192):this.inRange(l,224,239)?(a=2,h=2048,s=l-224):this.inRange(l,240,244)?(a=3,h=65536,s=l-240):this.decoderError(i),s*=Math.pow(64,a),e=null);else if(this.inRange(l,128,191))if(o+=1,s+=(l-128)*Math.pow(64,a-o),o!==a)e=null;else{var u=s,c=h;s=0,a=0,o=0,h=0,e=this.inRange(u,c,1114111)&&!this.inRange(u,55296,57343)?u:this.decoderError(i,l)}else s=0,a=0,o=0,h=0,r--,e=this.decoderError(i,l);null!==e&&e!==this.EOF_code_point&&(65535>=e?e>0&&(n+=String.fromCharCode(e)):(e-=65536,n+=String.fromCharCode(55296+(e>>10&1023)),n+=String.fromCharCode(56320+(1023&e))))}return n},s.encoderError=function(e){t.$error(1026,e)},s.decoderError=function(e,i){return e&&t.$error(1027),i||65533},s.inRange=function(t,e,i){return t>=e&&i>=t},s.div=function(t,e){return Math.floor(t/e)},s.stringToCodePoints=function(t){for(var e=[],i=0,r=t.length;i<t.length;){var n=t.charCodeAt(i);if(this.inRange(n,55296,57343))if(this.inRange(n,56320,57343))e.push(65533);else if(i==r-1)e.push(65533);else{var s=t.charCodeAt(i+1);if(this.inRange(s,56320,57343)){var a=1023&n,o=1023&s;i+=1,e.push(65536+(a<<10)+o)}else e.push(65533)}else e.push(n);i+=1}return e},i.SIZE_OF_BOOLEAN=1,i.SIZE_OF_INT8=1,i.SIZE_OF_INT16=2,i.SIZE_OF_INT32=4,i.SIZE_OF_UINT8=1,i.SIZE_OF_UINT16=2,i.SIZE_OF_UINT32=4,i.SIZE_OF_FLOAT32=4,i.SIZE_OF_FLOAT64=8,i}();t.ByteArray=i,t.registerClass(i,"egret.ByteArray")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=__define,i=t;return i.prototype,e(t,"logLevel",void 0,function(t){}),t.ALL="all",t.DEBUG="debug",t.INFO="info",t.WARN="warn",t.ERROR="error",t.OFF="off",t}();t.Logger=e,t.registerClass(e,"egret.Logger")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sin=function(e){var i=Math.floor(e),r=i+1,n=t.sinInt(i);if(i==e)return n;var s=t.sinInt(r);return(e-i)*s+(r-e)*n},t.sinInt=function(t){return t%=360,0>t&&(t+=360),egret_sin_map[t]},t.cos=function(e){var i=Math.floor(e),r=i+1,n=t.cosInt(i);if(i==e)return n;var s=t.cosInt(r);return(e-i)*s+(r-e)*n},t.cosInt=function(t){return t%=360,0>t&&(t+=360),egret_cos_map[t]},t}();t.NumberUtils=e,t.registerClass(e,"egret.NumberUtils")}(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;360>NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);egret_sin_map[90]=1,egret_cos_map[90]=0,egret_sin_map[180]=0,egret_cos_map[180]=-1,egret_sin_map[270]=-1,egret_cos_map[270]=0,Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,n.prototype=new r,n});var egret;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=0),e.call(this),this._delay=0,this._currentCount=0,this._running=!1,this.updateInterval=1e3,this.lastCount=1e3,this.delay=t,this.repeatCount=0|+i}__extends(i,e);var r=__define,n=i,s=n.prototype;return r(s,"delay",function(){return this._delay},function(t){1>t&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))}),r(s,"currentCount",function(){return this._currentCount}),r(s,"running",function(){return this._running}),s.reset=function(){this.stop(),this._currentCount=0},s.start=function(){this._running||(this.lastCount=this.updateInterval,t.sys.$ticker.$startTick(this.$update,this),this._running=!0)},s.stop=function(){this._running&&(t.stopTick(this.$update,this),this._running=!1)},s.$update=function(e){if(this.lastCount-=1e3,this.lastCount>0)return!1;this.lastCount+=this.updateInterval,this._currentCount++;var i=this.repeatCount>0&&this._currentCount>=this.repeatCount;return t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER),i&&(this.stop(),t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER_COMPLETE)),!1},i}(t.EventDispatcher);t.Timer=e,t.registerClass(e,"egret.Timer")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t.$callLaterFunctionList.push(e),t.$callLaterThisList.push(i),t.$callLaterArgsList.push(r)}function i(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t.$callAsyncFunctionList.push(e),t.$callAsyncThisList.push(i),t.$callAsyncArgsList.push(r)}t.$callLaterFunctionList=[],t.$callLaterThisList=[],t.$callLaterArgsList=[],t.callLater=e,t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[],t.$callAsync=i}(egret||(egret={}));var egret;!function(t){function e(t,e,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var s,a=t.prototype;t.hasOwnProperty("__sets__")||Object.defineProperty(t,"__sets__",{value:{}}),s=t.__sets__;var o=s[i];if(o)return o.apply(e,r);var h=Object.getPrototypeOf(a);if(null!=h){for(;!h.hasOwnProperty(i);)if(h=Object.getPrototypeOf(h),null==h)return;o=Object.getOwnPropertyDescriptor(h,i).set,s[i]=o,o.apply(e,r)}}function i(t,e,i){var r,n=t.prototype;t.hasOwnProperty("__gets__")||Object.defineProperty(t,"__gets__",{value:{}}),r=t.__gets__;var s=r[i];if(s)return s.call(e);var a=Object.getPrototypeOf(n);if(null!=a){for(;!a.hasOwnProperty(i);)if(a=Object.getPrototypeOf(a),null==a)return;return s=Object.getOwnPropertyDescriptor(a,i).get,r[i]=s,s.call(e)}}t.superSetter=e,t.superGetter=i}(egret||(egret={}));var egret;!function(t){function e(t){if(!t)return null;var e=i[t];if(e)return e;var r=t.split("."),n=r.length;e=__global;for(var s=0;n>s;s++){var a=r[s];if(e=e[a],!e)return null}return i[t]=e,e}var i={};t.getDefinitionByName=e}(egret||(egret={}));var __global=__global||this,egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var r=i.constructor.toString().trim(),n=r.indexOf("("),s=r.substring(9,n);return Object.defineProperty(i,"__class__",{value:s,enumerable:!1,writable:!0}),s}t.getQualifiedClassName=e}(egret||(egret={}));var egret;!function(t){function e(e){if(!e||"object"!=typeof e&&!e.prototype)return null;var i=e.prototype?e.prototype:Object.getPrototypeOf(e),r=Object.getPrototypeOf(i);if(!r)return null;var n=t.getQualifiedClassName(r.constructor);return n?n:null}t.getQualifiedSuperclassName=e}(egret||(egret={}));var egret;!function(t){function e(){return Date.now()-t.sys.$START_TIME;
}t.getTimer=e}(egret||(egret={}));var egret;!function(t){function e(e){var i=t.getDefinitionByName(e);return!!i}t.hasDefinition=e}(egret||(egret={}));var egret;!function(t){function e(t,e){if(!t||"object"!=typeof t)return!1;var i=Object.getPrototypeOf(t),r=i?i.__types__:null;return!!r&&-1!==r.indexOf(e)}t.is=e}(egret||(egret={}));var egret;!function(t){function e(e,i){t.sys.$ticker.$startTick(e,i)}t.startTick=e}(egret||(egret={}));var egret;!function(t){function e(e,i){t.sys.$ticker.$stopTick(e,i)}t.stopTick=e}(egret||(egret={}));var egret;!function(t){function e(t){0>t&&(t=0),t>16777215&&(t=16777215);for(var e=t.toString(16).toUpperCase();e.length>6;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e}t.toColorString=e}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}var i=e;return i.prototype,e.compileProgram=function(i,r,n){var s=e.compileFragmentShader(i,n),a=e.compileVertexShader(i,r),o=i.createProgram();return i.attachShader(o,a),i.attachShader(o,s),i.linkProgram(o),i.getProgramParameter(o,i.LINK_STATUS)||t.$warn(1020),o},e.compileFragmentShader=function(t,i){return e._compileShader(t,i,t.FRAGMENT_SHADER)},e.compileVertexShader=function(t,i){return e._compileShader(t,i,t.VERTEX_SHADER)},e._compileShader=function(t,e,i){var r=t.createShader(i);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:null},e.checkCanUseWebGL=function(){if(void 0==e.canUseWebGL)try{var t=document.createElement("canvas");e.canUseWebGL=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){e.canUseWebGL=!1}return e.canUseWebGL},e.deleteWebGLTexture=function(t){if(t){var e=t.webGLTexture;if(e)for(var i in e){var r=e[i],n=r.glContext;n.deleteTexture(r)}t.webGLTexture=null}},e}();t.WebGLUtils=e,t.registerClass(e,"egret.WebGLUtils")}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i="egret.BitmapData";t.registerClass(HTMLImageElement,i),t.registerClass(HTMLCanvasElement,i),t.registerClass(HTMLVideoElement,i)}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){function e(e){return e.hashCode=e.$hashCode=t.$hashCount++,e}t.$toBitmapData=e}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function t(){}var e=t;return e.prototype,t.call=function(t,e){},t.addCallback=function(t,e){},t}();e.WebExternalInterface=i,t.registerClass(i,"egret.web.WebExternalInterface",["egret.ExternalInterface"]),t.ExternalInterface=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i;!function(i){function r(t){return window.localStorage.getItem(t)}function n(e,i){try{return window.localStorage.setItem(e,i),!0}catch(r){return t.$warn(1047,e,i),!1}}function s(t){window.localStorage.removeItem(t)}function a(){window.localStorage.clear()}e.getItem=r,e.setItem=n,e.removeItem=s,e.clear=a}(i=e.web||(e.web={}))}(e=t.localStorage||(t.localStorage={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function r(){i.call(this),this.loaded=!1}__extends(r,i);var n=__define,s=r,a=s.prototype;return n(a,"length",function(){if(this.originAudio)return this.originAudio.duration;throw new Error("sound not loaded!")}),a.load=function(e){function i(){s(),h.indexOf("firefox")>=0&&(o.pause(),o.muted=!1),a.loaded=!0,a.dispatchEventWith(t.Event.COMPLETE)}function n(){s(),a.dispatchEventWith(t.IOErrorEvent.IO_ERROR)}function s(){o.removeEventListener("canplaythrough",i),o.removeEventListener("error",n)}var a=this;this.url=e;var o=new Audio(e);o.addEventListener("canplaythrough",i),o.addEventListener("error",n);var h=navigator.userAgent.toLowerCase();h.indexOf("firefox")>=0&&(o.autoplay=!0,o.muted=!0),o.load(),this.originAudio=o,r.$recycle(this.url,o)},a.play=function(i,n){i=+i||0,n=+n||0;var s=r.$pop(this.url);null==s&&(s=this.originAudio.cloneNode()),s.autoplay=!0;var a=new e.HtmlSoundChannel(s);return a.$url=this.url,a.$loops=n,a.$startTime=i,a.$play(),t.sys.$pushSoundChannel(a),a},a.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),r.$clear(this.url)},r.$clear=function(t){var e=r.audios[t];e&&(e.length=0)},r.$pop=function(t){var e=r.audios[t];return e&&e.length>0?e.pop():null},r.$recycle=function(t,e){var i=r.audios[t];null==r.audios[t]&&(i=r.audios[t]=[]),i.push(e)},r.MUSIC="music",r.EFFECT="effect",r.audios={},r}(t.EventDispatcher);e.HtmlSound=i,t.registerClass(i,"egret.web.HtmlSound",["egret.Sound"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function r(e){var r=this;i.call(this),this.$startTime=0,this.audio=null,this.isStopped=!1,this.canPlay=function(){r.audio.removeEventListener("canplay",r.canPlay);try{r.audio.currentTime=r.$startTime}catch(t){}finally{r.audio.play()}},this.onPlayEnd=function(){return 1==r.$loops?(r.stop(),void r.dispatchEventWith(t.Event.SOUND_COMPLETE)):(r.$loops>0&&r.$loops--,void r.$play())},e.addEventListener("ended",this.onPlayEnd),this.audio=e}__extends(r,i);var n=__define,s=r,a=s.prototype;return a.$play=function(){if(this.isStopped)return void t.$error(1036);try{this.audio.currentTime=this.$startTime}catch(t){return void this.audio.addEventListener("canplay",this.canPlay)}this.audio.play()},a.stop=function(){if(this.audio){this.isStopped||t.sys.$popSoundChannel(this),this.isStopped=!0;var i=this.audio;i.pause(),i.removeEventListener("ended",this.onPlayEnd),this.audio=null,e.HtmlSound.$recycle(this.$url,i)}},n(a,"volume",function(){return this.audio?this.audio.volume:1},function(e){return this.isStopped?void t.$error(1036):void(this.audio&&(this.audio.volume=e))}),n(a,"position",function(){return this.audio?this.audio.currentTime:0}),r}(t.EventDispatcher);e.HtmlSoundChannel=i,t.registerClass(i,"egret.web.HtmlSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function r(){i.call(this),this.loaded=!1}__extends(r,i);var n=__define,s=r,a=s.prototype;return a.load=function(i){var r=this;this.url=i,QZAppExternal.preloadSound(function(e){0==e.code?(r.loaded=!0,r.dispatchEventWith(t.Event.COMPLETE)):r.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},{bid:-1,url:e.Html5Capatibility._QQRootPath+i,refresh:1})},n(a,"length",function(){throw new Error("qq sound not supported!")}),a.play=function(i,r){i=+i||0,r=+r||0;var n=new e.QQSoundChannel;return n.$url=this.url,n.$loops=r,n.$type=this.type,n.$startTime=i,n.$play(),t.sys.$pushSoundChannel(n),n},a.close=function(){},r.MUSIC="music",r.EFFECT="effect",r}(t.EventDispatcher);e.QQSound=i,t.registerClass(i,"egret.web.QQSound",["egret.Sound"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var i=this;e.call(this),this.$startTime=0,this.isStopped=!1,this.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(t.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},this._startTime=0}__extends(i,e);var r=__define,n=i,s=n.prototype;return s.$play=function(){if(this.isStopped)return void t.$error(1036);var e=this;this._startTime=Date.now();var i=0;i=e.$loops>0?e.$loops-1:-1,this.$type==t.Sound.EFFECT?QZAppExternal.playLocalSound(function(t){},{bid:-1,url:e.$url,loop:i}):QZAppExternal.playLocalBackSound(function(t){},{bid:-1,url:e.$url,loop:i})},s.stop=function(){this.$type==t.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound(),this.isStopped||t.sys.$popSoundChannel(this),this.isStopped=!0},r(s,"volume",function(){return 1},function(e){return this.isStopped?void t.$error(1036):void 0}),r(s,"position",function(){return(Date.now()-this._startTime)/1e3}),i}(t.EventDispatcher);e.QQSoundChannel=i,t.registerClass(i,"egret.web.QQSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function t(){}var e=t;return e.prototype,t.decodeAudios=function(){if(!(t.decodeArr.length<=0||t.isDecoding)){t.isDecoding=!0;var e=t.decodeArr.shift();t.ctx.decodeAudioData(e.buffer,function(i){e.self.audioBuffer=i,e.success&&e.success(),t.isDecoding=!1,t.decodeAudios()},function(){alert("sound decode error: "+e.url+"\nsee http://edn.egret.com/cn/docs/page/156"),e.fail&&e.fail(),t.isDecoding=!1,t.decodeAudios()})}},t.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,t.ctx=t.canUseWebAudio?new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0,t.decodeArr=[],t.isDecoding=!1,t}();e.WebAudioDecode=i,t.registerClass(i,"egret.web.WebAudioDecode");var r=function(r){function n(){r.call(this),this.loaded=!1}__extends(n,r);var s=__define,a=n,o=a.prototype;return s(o,"length",function(){if(this.audioBuffer)return this.audioBuffer.duration;throw new Error("sound not loaded!")}),o.load=function(e){function r(){s.loaded=!0,s.dispatchEventWith(t.Event.COMPLETE)}function n(){s.dispatchEventWith(t.IOErrorEvent.IO_ERROR)}var s=this;this.url=e;var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){s._arrayBuffer=a.response,i.decodeArr.push({buffer:s._arrayBuffer,success:r,fail:n,self:s,url:s.url}),i.decodeAudios()},a.send()},o.play=function(i,r){i=+i||0,r=+r||0;var n=new e.WebAudioSoundChannel;return n.$url=this.url,n.$loops=r,n.$audioBuffer=this.audioBuffer,n.$startTime=i,n.$play(),t.sys.$pushSoundChannel(n),n},o.close=function(){},n.MUSIC="music",n.EFFECT="effect",n}(t.EventDispatcher);e.WebAudioSound=r,t.registerClass(r,"egret.web.WebAudioSound",["egret.Sound"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function r(){var r=this;i.call(this),this.$startTime=0,this.bufferSource=null,this.context=e.WebAudioDecode.ctx,this.isStopped=!1,this._currentTime=0,this._volume=1,this.onPlayEnd=function(){return 1==r.$loops?(r.stop(),void r.dispatchEventWith(t.Event.SOUND_COMPLETE)):(r.$loops>0&&r.$loops--,void r.$play())},this._startTime=0,this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}__extends(r,i);var n=__define,s=r,a=s.prototype;return a.$play=function(){if(this.isStopped)return void t.$error(1036);this.bufferSource&&(this.bufferSource.onended=null,this.bufferSource=null);var e=this.context,i=this.gain,r=e.createBufferSource();this.bufferSource=r,r.buffer=this.$audioBuffer,r.connect(i),i.connect(e.destination),r.onended=this.onPlayEnd,this._startTime=Date.now(),this.gain.gain.value=this._volume,r.start(0,this.$startTime),this._currentTime=0},a.stop=function(){if(this.bufferSource){var e=this.bufferSource;e.stop?e.stop(0):e.noteOff(0),this.bufferSource.disconnect(),this.bufferSource=null,this.$audioBuffer=null}this.isStopped||t.sys.$popSoundChannel(this),this.isStopped=!0},n(a,"volume",function(){return this._volume},function(e){return this.isStopped?void t.$error(1036):(this._volume=e,void(this.gain.gain.value=e))}),n(a,"position",function(){return this.bufferSource?(Date.now()-this._startTime)/1e3+this.$startTime:0}),r}(t.EventDispatcher);e.WebAudioSoundChannel=i,t.registerClass(i,"egret.web.WebAudioSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(i,r){var n=this;void 0===r&&(r=!0),e.call(this),this.loaded=!1,this.closed=!1,this.heightSet=NaN,this.widthSet=NaN,this.isPlayed=!1,this.screenChanged=function(e){var i=!!n.video.webkitDisplayingFullscreen;i||(n.checkFullScreen(!1),t.Capabilities.isMobile||(n._fullscreen=i))},this._fullscreen=!0,this.onVideoLoaded=function(){n.video.removeEventListener("canplay",n.onVideoLoaded);var e=n.video;n.loaded=!0,n.posterData&&(n.posterData.width=n.getPlayWidth(),n.posterData.height=n.getPlayHeight()),e.width=e.videoWidth,e.height=e.videoHeight,n.$invalidateContentBounds(),window.setTimeout(function(){n.dispatchEventWith(t.Event.COMPLETE)},200)},this.$renderNode=new t.sys.BitmapNode,this.src=i,this.once(t.Event.ADDED_TO_STAGE,this.loadPoster,this),i&&this.load()}__extends(i,e);var r=__define,n=i,s=n.prototype;return s.load=function(e,i){var r=this;if(void 0===i&&(i=!0),e=e||this.src,this.src=e,!this.video||this.video.src!=e){if(!this.video||t.Capabilities.isMobile){var n=document.createElement("video");this.video=n,n.controls=null}else n=this.video;n.src=e,n.setAttribute("autoplay","autoplay"),n.setAttribute("webkit-playsinline","true"),n.addEventListener("canplay",this.onVideoLoaded),n.addEventListener("error",function(){return r.onVideoError()}),n.addEventListener("ended",function(){return r.onVideoEnded()}),n.load(),n.play(),n.style.position="absolute",n.style.top="0px",n.style.zIndex="-88888",n.style.left="0px",n.height=1,n.width=1,window.setTimeout(function(){return n.pause()},170)}},s.play=function(e,i){var r=this;if(void 0===i&&(i=!1),0==this.loaded)return this.load(this.src),void this.once(t.Event.COMPLETE,function(t){return r.play(e,i)},this);this.isPlayed=!0;var n=this.video;void 0!=e&&(n.currentTime=+e||0),n.loop=!!i,t.Capabilities.isMobile?n.style.zIndex="-88888":n.style.zIndex="9999",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.height=n.videoHeight,n.width=n.videoWidth,"Windows PC"!=t.Capabilities.os&&"Mac OS"!=t.Capabilities.os&&window.setTimeout(function(){n.width=0},1e3),this.checkFullScreen(this._fullscreen)},s.checkFullScreen=function(e){var i=this.video;if(e)null==i.parentElement&&(i.removeAttribute("webkit-playsinline"),document.body.appendChild(i)),t.stopTick(this.markDirty,this),this.goFullscreen();else if(null!=i.parentElement&&i.parentElement.removeChild(i),i.setAttribute("webkit-playsinline","true"),this.setFullScreenMonitor(!1),t.startTick(this.markDirty,this),t.Capabilities.isMobile)return this.video.currentTime=0,void this.onVideoEnded();i.play()},s.goFullscreen=function(){var e,i=this.video;return e=t.web.getPrefixStyleName("requestFullscreen",i),!i[e]&&(e=t.web.getPrefixStyleName("requestFullScreen",i),!i[e])||(i.removeAttribute("webkit-playsinline"),i[e](),this.setFullScreenMonitor(!0),!0)},s.setFullScreenMonitor=function(t){var e=this.video;t?(e.addEventListener("mozfullscreenchange",this.screenChanged),e.addEventListener("webkitfullscreenchange",this.screenChanged),e.addEventListener("mozfullscreenerror",this.screenError),e.addEventListener("webkitfullscreenerror",this.screenError)):(e.removeEventListener("mozfullscreenchange",this.screenChanged),e.removeEventListener("webkitfullscreenchange",this.screenChanged),e.removeEventListener("mozfullscreenerror",this.screenError),e.removeEventListener("webkitfullscreenerror",this.screenError))},s.screenError=function(){t.$error(3014)},s.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.oCancelFullScreen?document.oCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},s.onVideoEnded=function(){this.pause(),this.isPlayed=!1,this.$invalidateContentBounds(),this.dispatchEventWith(t.Event.ENDED)},s.onVideoError=function(){this.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},s.close=function(){var t=this;this.closed=!0,this.video.removeEventListener("canplay",this.onVideoLoaded),this.video.removeEventListener("error",function(){return t.onVideoError()}),this.video.removeEventListener("ended",function(){return t.onVideoEnded()}),this.pause(),0==this.loaded&&this.video&&(this.video.src=""),this.video&&this.video.parentElement&&(this.video.parentElement.removeChild(this.video),this.video=null),this.loaded=!1},s.pause=function(){this.video&&this.video.pause(),t.stopTick(this.markDirty,this),this.$invalidate()},r(s,"volume",function(){return this.video?this.video.volume:1},function(t){this.video&&(this.video.volume=t)}),r(s,"position",function(){return this.video?this.video.currentTime:0},function(t){this.video&&(this.video.currentTime=t)}),r(s,"fullscreen",function(){return this._fullscreen},function(e){t.Capabilities.isMobile||(this._fullscreen=!!e,this.video&&0==this.video.paused&&this.checkFullScreen(this._fullscreen))}),r(s,"bitmapData",function(){return this.video&&this.loaded?(this._bitmapData||(this.video.width=this.video.videoWidth,this.video.height=this.video.videoHeight,this._bitmapData=t.$toBitmapData(this.video)),this._bitmapData):null}),s.loadPoster=function(){var e=this,i=this.poster;if(i){var r=new t.ImageLoader;r.once(t.Event.COMPLETE,function(t){r.data,e.posterData=r.data,e.posterData.width=e.getPlayWidth(),e.posterData.height=e.getPlayHeight(),e.$invalidateContentBounds()},this),r.load(i)}},s.$measureContentBounds=function(t){var e=this.bitmapData,i=this.posterData;e?t.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):i?t.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):t.setEmpty()},s.getPlayWidth=function(){return isNaN(this.widthSet)?this.bitmapData?this.bitmapData.width:this.posterData?this.posterData.width:NaN:this.widthSet},s.getPlayHeight=function(){return isNaN(this.heightSet)?this.bitmapData?this.bitmapData.height:this.posterData?this.posterData.height:NaN:this.heightSet},s.$render=function(){var e=this.$renderNode,i=this.bitmapData,r=this.posterData,n=this.getPlayWidth(),s=this.getPlayHeight();this.isPlayed&&!t.Capabilities.isMobile||!r?this.isPlayed&&i&&(e.image=i,e.drawImage(0,0,i.width,i.height,0,0,n,s)):(e.image=r,e.drawImage(0,0,r.width,r.height,0,0,n,s))},s.markDirty=function(){return this.$invalidate(),!0},s.$setHeight=function(t){return this.heightSet=+t||0,this.$invalidate(),this.$invalidateContentBounds(),e.prototype.$setHeight.call(this,t)},s.$setWidth=function(t){return this.widthSet=+t||0,this.$invalidate(),this.$invalidateContentBounds(),e.prototype.$setWidth.call(this,t)},r(s,"paused",function(){return!this.video||this.video.paused}),r(s,"length",function(){if(this.video)return this.video.duration;throw new Error("Video not loaded!")}),i}(t.DisplayObject);e.WebVideo=i,t.registerClass(i,"egret.web.WebVideo",["egret.Video"]),t.Video=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){e.call(this),this._url="",this._method=""}__extends(i,e);var r=__define,n=i,s=n.prototype;return r(s,"response",function(){if(!this._xhr)return null;if(void 0!=this._xhr.response)return this._xhr.response;if("text"==this._responseType)return this._xhr.responseText;if("arraybuffer"==this._responseType&&/msie 9.0/i.test(navigator.userAgent)){var t=window;return t.convertResponseBodyToText(this._xhr.responseBody)}return"document"==this._responseType?this._xhr.responseXML:null}),r(s,"responseType",function(){return this._responseType},function(t){this._responseType=t}),r(s,"withCredentials",function(){return this._withCredentials},function(t){this._withCredentials=t}),s.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},s.open=function(t,e){void 0===e&&(e="GET"),this._url=t,this._method=e,this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=this.getXHR(),this._xhr.onreadystatechange=this.onReadyStateChange.bind(this),this._xhr.onprogress=this.updateProgress.bind(this),this._xhr.open(this._method,this._url,!0)},s.send=function(t){if(null!=this._responseType&&(this._xhr.responseType=this._responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),this.headerObj)for(var e in this.headerObj)this._xhr.setRequestHeader(e,this.headerObj[e]);this._xhr.send(t)},s.abort=function(){this._xhr&&this._xhr.abort()},s.getAllResponseHeaders=function(){if(!this._xhr)return null;var t=this._xhr.getAllResponseHeaders();return t?t:""},s.setRequestHeader=function(t,e){this.headerObj||(this.headerObj={}),this.headerObj[t]=e},s.getResponseHeader=function(t){if(!this._xhr)return null;var e=this._xhr.getResponseHeader(t);return e?e:""},s.onReadyStateChange=function(){var e=this._xhr;if(4==e.readyState){var i=e.status>=400||0==e.status,r=(this._url,this);window.setTimeout(function(){i?r.dispatchEventWith(t.IOErrorEvent.IO_ERROR):r.dispatchEventWith(t.Event.COMPLETE)},0)}},s.updateProgress=function(e){e.lengthComputable&&t.ProgressEvent.dispatchProgressEvent(this,t.ProgressEvent.PROGRESS,e.loaded,e.total)},i}(t.EventDispatcher);e.WebHttpRequest=i,t.registerClass(i,"egret.web.WebHttpRequest",["egret.HttpRequest"]),t.HttpRequest=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=window.URL||window.webkitURL,r=function(r){function n(){r.apply(this,arguments),this.data=null,this._crossOrigin=null,this._hasCrossOriginSet=!1,this.currentImage=null,this.request=null}__extends(n,r);var s=__define,a=n,o=a.prototype;return s(o,"crossOrigin",function(){return this._crossOrigin},function(t){this._hasCrossOriginSet=!0,this._crossOrigin=t}),o.load=function(i){if(e.Html5Capatibility._canUseBlob&&0!=i.indexOf("wxLocalResource:")&&0!=i.indexOf("data:")&&0!=i.indexOf("http:")&&0!=i.indexOf("https:")){var r=this.request;r||(r=this.request=new t.web.WebHttpRequest,r.addEventListener(t.Event.COMPLETE,this.onBlobLoaded,this),r.addEventListener(t.IOErrorEvent.IO_ERROR,this.onBlobError,this),r.responseType="blob"),r.open(i),r.send()}else this.loadImage(i)},o.onBlobLoaded=function(t){var e=this.request.response;this.loadImage(i.createObjectURL(e))},o.onBlobError=function(t){this.dispatchIOError(this.currentURL)},o.loadImage=function(t){var e=new Image;this.data=null,this.currentImage=e,this._hasCrossOriginSet?this._crossOrigin&&(e.crossOrigin=this._crossOrigin):n.crossOrigin&&(e.crossOrigin=n.crossOrigin),e.onload=this.onImageComplete.bind(this),e.onerror=this.onLoadError.bind(this),e.src=t},o.onImageComplete=function(e){var i=this.getImage(e);if(i){this.data=t.$toBitmapData(i);var r=this;window.setTimeout(function(){r.dispatchEventWith(t.Event.COMPLETE)},0)}},o.onLoadError=function(t){var e=this.getImage(t);e&&this.dispatchIOError(e.src)},o.dispatchIOError=function(e){var i=this;window.setTimeout(function(){i.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},0)},o.getImage=function(e){var r=e.target,n=r.src;if(0==n.indexOf("blob:"))try{i.revokeObjectURL(r.src)}catch(e){t.$warn(1037)}return r.onerror=null,r.onload=null,this.currentImage!==r?null:(this.currentImage=null,r)},n.crossOrigin=null,n}(t.EventDispatcher);e.WebImageLoader=r,t.registerClass(r,"egret.web.WebImageLoader",["egret.ImageLoader"]),t.ImageLoader=r}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function r(){i.call(this),this._isNeedShow=!1,this.inputElement=null,this.inputDiv=null,this._gscaleX=0,this._gscaleY=0,this._isNeesHide=!1,this.textValue="",this.colorValue=16777215,this._styleInfoes={}}__extends(r,i);var n=r,s=n.prototype;return s.$setTextField=function(t){return this.$textfield=t,!0},s.$addToStage=function(){this.htmlInput=t.web.$getTextAdapter(this.$textfield)},s._initElement=function(){var e=this.$textfield.localToGlobal(0,0),i=e.x,r=e.y,n=this.htmlInput.$scaleX,s=this.htmlInput.$scaleY;this.inputDiv.style.left=i*n+"px",this.inputDiv.style.top=r*s+"px",this.$textfield.multiline&&this.$textfield.height>this.$textfield.size?(this.inputDiv.style.top=r*s+"px",this.inputElement.style.top=-this.$textfield.lineSpacing/2*s+"px"):(this.inputDiv.style.top=r*s+"px",this.inputElement.style.top="0px");for(var a=this.$textfield,o=1,h=1,l=0;a.parent;)o*=a.scaleX,h*=a.scaleY,l+=a.rotation,a=a.parent;var u=t.web.getPrefixStyleName("transform");this.inputDiv.style[u]="rotate("+l+"deg)",this._gscaleX=n*o,this._gscaleY=s*h},s.$show=function(){this.htmlInput.isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=this.htmlInput.getInputElement(this),this.$textfield.multiline?this.inputElement.type="text":this.inputElement.type=this.$textfield.inputType,this.inputDiv=this.htmlInput._inputDIV),this.htmlInput._needShow=!0,this._isNeedShow=!0,this._initElement()},s.onBlurHandler=function(){this.htmlInput.clearInputElement(),window.scrollTo(0,0)},s.executeShow=function(){this.inputElement.value=this.$getText(),null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler.bind(this)),this.$resetStageText(),this.$textfield.maxChars>0?this.inputElement.setAttribute("maxlength",this.$textfield.maxChars):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus()},s.$hide=function(){this._isNeesHide=!0,this.htmlInput&&t.web.Html5Capatibility._System_OS==t.web.SystemOSType.IOS&&this.htmlInput.disconnectStageText(this)},s.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},s.$setText=function(t){return this.textValue=t,this.resetText(),!0},s.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},s.$setColor=function(t){return this.colorValue=t,this.resetColor(),!0},s.resetColor=function(){this.inputElement&&this.setElementStyle("color",t.toColorString(this.colorValue))},s.$onBlur=function(){e.Html5Capatibility._System_OS==e.SystemOSType.WPHONE&&t.Event.dispatchEvent(this,"updateText",!1)},s._onInput=function(){var i=this;if(e.Html5Capatibility._System_OS==e.SystemOSType.WPHONE){var r=this.$textfield.$TextField;null==r[35]&&null==r[36]?(i.textValue=i.inputElement.value,t.Event.dispatchEvent(i,"updateText",!1)):window.setTimeout(function(){i.inputElement&&i.inputElement.selectionStart&&i.inputElement.selectionEnd&&i.inputElement.selectionStart==i.inputElement.selectionEnd&&(i.textValue=i.inputElement.value,t.Event.dispatchEvent(i,"updateText",!1))},0)}else window.setTimeout(function(){i.inputElement&&i.inputElement.selectionStart==i.inputElement.selectionEnd&&(i.textValue=i.inputElement.value,t.Event.dispatchEvent(i,"updateText",!1))},0)},s.setAreaHeight=function(){var e=this.$textfield;if(e.multiline){var i=t.TextFieldUtils.$getTextHeight(e);if(e.height<=e.size)this.setElementStyle("height",e.size*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",e.size*this._gscaleY+"px");else if(e.height<i)this.setElementStyle("height",e.height*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",(e.size+e.lineSpacing)*this._gscaleY+"px");else{this.setElementStyle("height",(i+e.lineSpacing)*this._gscaleY+"px");var r=(e.height-i)*this._gscaleY,n=t.TextFieldUtils.$getValign(e),s=r*n,a=r-s;this.setElementStyle("padding",s+"px 0px "+a+"px 0px"),this.setElementStyle("lineHeight",(e.size+e.lineSpacing)*this._gscaleY+"px")}}},s._onClickHandler=function(e){this._isNeedShow&&(e.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new t.Event("focus")))},s._onDisconnect=function(){this.inputElement=null,this.dispatchEvent(new t.Event("blur"))},s.setElementStyle=function(t,e){this.inputElement&&this._styleInfoes[t]!=e&&(this.inputElement.style[t]=e)},s.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnectStageText(this)},s.$resetStageText=function(){if(this.inputElement){var e=this.$textfield;if(this.setElementStyle("fontFamily",e.fontFamily),this.setElementStyle("fontStyle",e.italic?"italic":"normal"),this.setElementStyle("fontWeight",e.bold?"bold":"normal"),this.setElementStyle("textAlign",e.textAlign),this.setElementStyle("fontSize",e.size*this._gscaleY+"px"),this.setElementStyle("color",t.toColorString(e.textColor)),e.stage){var i=e.localToGlobal(0,0).x;i=Math.min(e.width,e.stage.stageWidth-i)}else i=e.width;if(this.setElementStyle("width",i*this._gscaleX+"px"),this.setElementStyle("verticalAlign",e.verticalAlign),e.multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",e.size*this._gscaleY+"px"),e.height<e.size){this.setElementStyle("height",e.size*this._gscaleY+"px");var r=e.size/2*this._gscaleY;this.setElementStyle("padding","0px 0px "+r+"px 0px")}else{this.setElementStyle("height",e.size*this._gscaleY+"px");var n=(e.height-e.size)*this._gscaleY,s=t.TextFieldUtils.$getValign(e),a=n*s,r=n-a;r<e.size/2*this._gscaleY&&(r=e.size/2*this._gscaleY),this.setElementStyle("padding",a+"px 0px "+r+"px 0px")}this.inputDiv.style.clip="rect(0px "+e.width*this._gscaleX+"px "+e.height*this._gscaleY+"px 0px)",this.inputDiv.style.height=e.height*this._gscaleY+"px",this.inputDiv.style.width=i*this._gscaleX+"px"}},r}(t.EventDispatcher);e.HTML5StageText=i,t.registerClass(i,"egret.web.HTML5StageText",["egret.StageText"]),t.StageText=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function e(){this._needShow=!1,this.$scaleX=1,this.$scaleY=1}var i=e,r=i.prototype;return r.isInputOn=function(){return null!=this._stageText},r.isCurrentStageText=function(t){return this._stageText==t},r.initValue=function(t){t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.border="none",t.style.padding="0"},r.$updateSize=function(){if(this.canvas){var e=this.canvas.width,i=this.canvas.height,r=this.canvas.style.width.split("px")[0],n=this.canvas.style.height.split("px")[0];this.$scaleX=r/e,this.$scaleY=n/i,this.StageDelegateDiv.style.left=this.canvas.style.left,this.StageDelegateDiv.style.top=this.canvas.style.top;var s=t.web.getPrefixStyleName("transform");this.StageDelegateDiv.style[s]=this.canvas.style[s],this.StageDelegateDiv.style[t.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px"}},r._initStageDelegateDiv=function(e,i){this.canvas=i;var r,n=this;r||(r=document.createElement("div"),this.StageDelegateDiv=r,r.id="StageDelegateDiv",e.appendChild(r),n.initValue(r),n._inputDIV=document.createElement("div"),n.initValue(n._inputDIV),n._inputDIV.style.width="0px",n._inputDIV.style.height="0px",n._inputDIV.style.left="0px",n._inputDIV.style.top="-100px",n._inputDIV.style[t.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",r.appendChild(n._inputDIV),this.canvas.addEventListener("click",function(t){n._needShow?(n._needShow=!1,n._stageText._onClickHandler(t),n.show()):n._inputElement&&(n.clearInputElement(),n._inputElement.blur(),n._inputElement=null)}),n.initInputElement(!0),n.initInputElement(!1))},r.initInputElement=function(t){var e,i=this;t?(e=document.createElement("textarea"),e.style.resize="none",i._multiElement=e,e.id="egretTextarea"):(e=document.createElement("input"),i._simpleElement=e,e.id="egretInput"),e.type="text",i._inputDIV.appendChild(e),e.setAttribute("tabindex","-1"),e.style.width="1px",e.style.height="12px",i.initValue(e),e.style.outline="thin",e.style.background="none",e.style.overflow="hidden",e.style.wordBreak="break-all",e.style.opacity=0,e.oninput=function(){i._stageText&&i._stageText._onInput()}},r.show=function(){var e=this,i=e._inputElement;t.$callAsync(function(){i.style.opacity=1},e)},r.disconnectStageText=function(t){(null==this._stageText||this._stageText==t)&&(this.clearInputElement(),this._inputElement&&this._inputElement.blur())},r.clearInputElement=function(){var t=this;if(t._inputElement){t._inputElement.value="",t._inputElement.onblur=null,t._inputElement.style.width="1px",t._inputElement.style.height="12px",t._inputElement.style.left="0px",t._inputElement.style.top="0px",t._inputElement.style.opacity=0;var e;e=t._simpleElement==t._inputElement?t._multiElement:t._simpleElement,e.style.display="block",t._inputDIV.style.left="0px",t._inputDIV.style.top="-100px",t._inputDIV.style.height="0px",t._inputDIV.style.width="0px"}t._stageText&&(t._stageText._onDisconnect(),t._stageText=null,this.canvas.userTyping=!1)},r.getInputElement=function(t){var e=this;e.clearInputElement(),e._stageText=t,this.canvas.userTyping=!0,e._stageText.$textfield.multiline?e._inputElement=e._multiElement:e._inputElement=e._simpleElement;var i;return i=e._simpleElement==e._inputElement?e._multiElement:e._simpleElement,i.style.display="none",e._inputElement},e}();e.HTMLInput=i,
t.registerClass(i,"egret.web.HTMLInput")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){function e(t){var e=t.stage?t.stage.$hashCode:0,i=r[e],a=n[e],o=s[e];return a&&o&&(delete n[e],delete s[e]),i}function i(t,e,i,a){t._initStageDelegateDiv(i,a),r[e.$hashCode]=t,n[e.$hashCode]=a,s[e.$hashCode]=i}var r={},n={},s={};t.$getTextAdapter=e,t.$cacheTextAdapter=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t,e,i,a,o){n||r();var h="";o&&(h+="italic "),a&&(h+="bold "),h+=(i||12)+"px ",h+=e||"Arial";var l=0,u=s[h]||(s[h]={});n.font=h;for(var c=t.length,d=0;c>d;d++){var f=t.charCodeAt(d),g=u[f]||(u[f]=n.measureText(t.charAt(d)).width);l+=g}return l}function r(){if("canvas"==t.Capabilities.renderMode)n=t.sys.hitTestBuffer.context;else{var e=document.createElement("canvas");n=e.getContext("2d")}n.textAlign="left",n.textBaseline="middle"}var n=null,s={};t.sys.measureText=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(e,i){var r=document.createElement("canvas");isNaN(e)||isNaN(i)||(r.width=e,r.height=i),t.$toBitmapData(r);var n=r.getContext("2d");if(void 0===n.imageSmoothingEnabled){for(var s=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],a=s.length-1;a>=0;a--){var o=s[a];if(void 0!==n[o])break}try{Object.defineProperty(n,"imageSmoothingEnabled",{get:function(){return this[o]},set:function(t){this[o]=t}})}catch(t){n.imageSmoothingEnabled=n[o]}}return r}var r,n=function(){function t(t,e){this.surface=i(t,e),this.context=this.surface.getContext("2d")}var e=__define,n=t,s=n.prototype;return e(s,"width",function(){return this.surface.width}),e(s,"height",function(){return this.surface.height}),s.resize=function(t,e,i){var r=this.surface;if(i){var n=!1;r.width<t&&(r.width=t,n=!0),r.height<e&&(r.height=e,n=!0),n||(this.context.globalCompositeOperation="source-over",this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1)}else r.width!=t&&(r.width=t),r.height!=e&&(r.height=e);this.clear()},s.resizeTo=function(t,e,n,s){r||(r=i());var a=(this.context,this.surface),o=r,h=o.getContext("2d");r=a,this.context=h,this.surface=o,o.width=Math.max(t,257),o.height=Math.max(e,257),h.setTransform(1,0,0,1,0,0),h.drawImage(a,n,s),a.height=1,a.width=1},s.setDirtyRegionPolicy=function(t){},s.beginClip=function(t,e,i){e=+e||0,i=+i||0;var r=this.context;r.save(),r.beginPath(),r.setTransform(1,0,0,1,e,i);for(var n=t.length,s=0;n>s;s++){var a=t[s];r.clearRect(a.minX,a.minY,a.width,a.height),r.rect(a.minX,a.minY,a.width,a.height)}r.clip()},s.endClip=function(){this.context.restore()},s.getPixel=function(t,e){return this.context.getImageData(t,e,1,1).data},s.toDataURL=function(t,e){return this.surface.toDataURL(t,e)},s.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.surface.width,this.surface.height)},s.destroy=function(){this.surface.width=this.surface.height=0},t}();e.CanvasRenderBuffer=n,t.registerClass(n,"egret.web.CanvasRenderBuffer",["egret.sys.RenderBuffer"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(i,r){var n=this;e.call(this),this.onTouchBegin=function(t){var e=n.getLocation(t);n.touch.onTouchBegin(e.x,e.y,t.identifier)},this.onTouchMove=function(t){var e=n.getLocation(t);n.touch.onTouchMove(e.x,e.y,t.identifier)},this.onTouchEnd=function(t){var e=n.getLocation(t);n.touch.onTouchEnd(e.x,e.y,t.identifier)},this.scaleX=1,this.scaleY=1,this.rotation=0,this.canvas=r,this.touch=new t.sys.TouchHandler(i),this.addListeners()}__extends(i,e);var r=i,n=r.prototype;return n.addListeners=function(){var e=this;window.navigator.msPointerEnabled?(this.canvas.addEventListener("MSPointerDown",function(t){t.identifier=t.pointerId,e.onTouchBegin(t),e.prevent(t)},!1),this.canvas.addEventListener("MSPointerMove",function(t){t.identifier=t.pointerId,e.onTouchMove(t),e.prevent(t)},!1),this.canvas.addEventListener("MSPointerUp",function(t){t.identifier=t.pointerId,e.onTouchEnd(t),e.prevent(t)},!1)):(t.Capabilities.$isMobile||this.addMouseListener(),this.addTouchListener())},n.addMouseListener=function(){this.canvas.addEventListener("mousedown",this.onTouchBegin),this.canvas.addEventListener("mousemove",this.onTouchMove),this.canvas.addEventListener("mouseup",this.onTouchEnd)},n.addTouchListener=function(){var t=this;this.canvas.addEventListener("touchstart",function(e){for(var i=e.changedTouches.length,r=0;i>r;r++)t.onTouchBegin(e.changedTouches[r]);t.prevent(e)},!1),this.canvas.addEventListener("touchmove",function(e){for(var i=e.changedTouches.length,r=0;i>r;r++)t.onTouchMove(e.changedTouches[r]);t.prevent(e)},!1),this.canvas.addEventListener("touchend",function(e){for(var i=e.changedTouches.length,r=0;i>r;r++)t.onTouchEnd(e.changedTouches[r]);t.prevent(e)},!1),this.canvas.addEventListener("touchcancel",function(e){for(var i=e.changedTouches.length,r=0;i>r;r++)t.onTouchEnd(e.changedTouches[r]);t.prevent(e)},!1)},n.prevent=function(t){t.stopPropagation(),1==t.isScroll||this.canvas.userTyping||t.preventDefault()},n.getLocation=function(e){e.identifier=+e.identifier||0;var i=document.documentElement,r=this.canvas.getBoundingClientRect(),n=r.left+window.pageXOffset-i.clientLeft,s=r.top+window.pageYOffset-i.clientTop,a=e.pageX-n,o=a,h=e.pageY-s,l=h;return 90==this.rotation?(o=h,l=r.width-a):-90==this.rotation&&(o=r.height-h,l=a),o/=this.scaleX,l/=this.scaleY,t.$TempPoint.setTo(Math.round(o),Math.round(l))},n.updateScaleMode=function(t,e,i){this.scaleX=t,this.scaleY=e,this.rotation=i},n.$updateMaxTouches=function(){this.touch.$initMaxTouches()},i}(t.HashObject);e.WebTouchHandler=i,t.registerClass(i,"egret.web.WebTouchHandler")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(t){e.call(this),this.isActivate=!0,this.stage=t,this.registerListener()}__extends(i,e);var r=i,n=r.prototype;return n.registerListener=function(){var e=this,i=function(){e.isActivate&&(e.isActivate=!1,e.stage.dispatchEvent(new t.Event(t.Event.DEACTIVATE)))},r=function(){e.isActivate||(e.isActivate=!0,e.stage.dispatchEvent(new t.Event(t.Event.ACTIVATE)))},n=function(){document[s]?i():r()};window.addEventListener("focus",r,!1),window.addEventListener("blur",i,!1);var s,a;"undefined"!=typeof document.hidden?(s="hidden",a="visibilitychange"):"undefined"!=typeof document.mozHidden?(s="mozHidden",a="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(s="msHidden",a="msvisibilitychange"):"undefined"!=typeof document.webkitHidden?(s="webkitHidden",a="webkitvisibilitychange"):"undefined"!=typeof document.oHidden&&(s="oHidden",a="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",r,!1),window.addEventListener("pagehide",i,!1)),s&&a&&document.addEventListener(a,n,!1);var o=navigator.userAgent,h=/micromessenger/gi.test(o),l=/mqq/gi.test(o),u=/mobile.*qq/gi.test(o);if((u||h)&&(l=!1),l){var c=window.browser||{};c.execWebFn=c.execWebFn||{},c.execWebFn.postX5GamePlayerMessage=function(t){var e=t.type;"app_enter_background"==e?i():"app_enter_foreground"==e&&r()},window.browser=c}},i}(t.HashObject);e.WebHideHandler=i,t.registerClass(i,"egret.web.WebHideHandler")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t,e){var i="";if(null!=e)i=r(t,e);else{if(null==o){var n=document.createElement("div").style;o=r("transform",n)}i=o}return""==i?t:i+t.charAt(0).toUpperCase()+t.substring(1,t.length)}function r(t,e){if(t in e)return"";t=t.charAt(0).toUpperCase()+t.substring(1,t.length);for(var i=["webkit","ms","Moz","O"],r=0;r<i.length;r++){var n=i[r]+t;if(n in e)return i[r]}return""}var n=function(){function t(){}var e=t;return e.prototype,t.QQ_AUDIO=1,t.WEB_AUDIO=2,t.HTML5_AUDIO=3,t}();e.AudioType=n,t.registerClass(n,"egret.web.AudioType");var s=function(){function t(){}var e=t;return e.prototype,t.WPHONE=1,t.IOS=2,t.ADNROID=3,t}();e.SystemOSType=s,t.registerClass(s,"egret.web.SystemOSType");var a=function(e){function i(){e.call(this)}__extends(i,e);var r=i;return r.prototype,i.$init=function(){var e=navigator.userAgent.toLowerCase();i.ua=e,t.Capabilities.$isMobile=-1!=e.indexOf("mobile")||-1!=e.indexOf("android"),i._canUseBlob=!1;var r,a=i._audioType;if(1==a||2==a||3==a?(r=!1,i.setAudioType(a)):(r=!0,i.setAudioType(n.HTML5_AUDIO)),e.indexOf("windows phone")>=0)i._System_OS=s.WPHONE,t.Capabilities.$os="Windows Phone";else if(e.indexOf("android")>=0){if(i._System_OS=s.ADNROID,t.Capabilities.$os="Android",i._System_OS=s.ADNROID,window.hasOwnProperty("QZAppExternal")&&e.indexOf("qzone")>=0){i.setAudioType(n.QQ_AUDIO);var o=document.getElementsByTagName("base");if(o&&o.length>0)i._QQRootPath=o[0].baseURI;else{var h=window.location.href.indexOf("?");-1==h&&(h=window.location.href.length);var l=window.location.href.substring(0,h);l=l.substring(0,l.lastIndexOf("/")),i._QQRootPath=l+"/"}}}else e.indexOf("iphone")>=0||e.indexOf("ipad")>=0||e.indexOf("ipod")>=0?(t.Capabilities.$os="iOS",i._System_OS=s.IOS,i.getIOSVersion()>=7&&(i._canUseBlob=!0,i.setAudioType(n.WEB_AUDIO))):-1!=e.indexOf("windows nt")?t.Capabilities.$os="Windows PC":-1!=e.indexOf("mac os")&&(t.Capabilities.$os="Mac OS");var u=window.URL||window.webkitURL;u||(i._canUseBlob=!1);var c=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;c||i._audioType!=n.WEB_AUDIO||i.setAudioType(n.HTML5_AUDIO),t.Sound=i._AudioClass},i.setAudioType=function(e){switch(i._audioType=e,e){case n.QQ_AUDIO:i._AudioClass=t.web.QQSound;break;case n.WEB_AUDIO:i._AudioClass=t.web.WebAudioSound;break;case n.HTML5_AUDIO:i._AudioClass=t.web.HtmlSound}},i.getIOSVersion=function(){var t=i.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];return parseInt(t.match(/\d(_\d)*/)[0])||0},i.checkHtml5Support=function(){var e=(navigator.language||navigator.browserLanguage).toLowerCase(),i=e.split("-");i.length>1&&(i[1]=i[1].toUpperCase()),t.Capabilities.$language=i.join("-")},i._canUseBlob=!1,i._audioType=0,i._QQRootPath="",i._System_OS=0,i.ua="",i}(t.HashObject);e.Html5Capatibility=a,t.registerClass(a,"egret.web.Html5Capatibility");var o=null;e.getPrefixStyleName=i,e.getPrefix=r}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(){if(o)for(var t=document.querySelectorAll(".egret-player"),e=t.length,i=0;e>i;i++){var r=t[i],n=r["egret-player"];n.updateScreenSize()}}function r(i){if(!o){o=!0,i||(i={}),e.Html5Capatibility._audioType=i.audioType,e.Html5Capatibility.$init(),n(i.renderMode);var r=t.sys.$ticker;s(r),i.screenAdapter?t.sys.screenAdapter=i.screenAdapter:t.sys.screenAdapter||(t.sys.screenAdapter=new t.sys.DefaultScreenAdapter);for(var a=document.querySelectorAll(".egret-player"),h=a.length,l=0;h>l;l++){var u=a[l],c=new e.WebPlayer(u,i);u["egret-player"]=c}"webgl"==t.Capabilities.renderMode&&(t.sys.hitTestBuffer=new e.WebGLRenderBuffer(3,3))}}function n(i){"webgl"==i&&t.WebGLUtils.checkCanUseWebGL()?(t.sys.RenderBuffer=e.WebGLRenderBuffer,t.sys.systemRenderer=new e.WebGLRenderer,t.Capabilities.$renderMode="webgl"):(t.sys.hitTestBuffer=new e.CanvasRenderBuffer(3,3),t.sys.RenderBuffer=e.CanvasRenderBuffer,t.sys.systemRenderer=new t.CanvasRenderer,t.Capabilities.$renderMode="canvas")}function s(t){function e(){t.update(),i.call(window,e)}var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;i||(i=function(t){return window.setTimeout(t,1e3/60)}),i.call(window,e)}function a(){h=NaN,t.updateAllScreens()}var o=!1;window.isNaN=function(t){return t=+t,t!==t},t.runEgret=r,t.updateAllScreens=i;var h=NaN;window.addEventListener("resize",function(){isNaN(h)&&(h=window.setTimeout(a,300))})}(e=t.web||(t.web={}))}(egret||(egret={}));var language,egret;!function(t){var e;!function(e){var i=function(){function e(){}var i=e;return i.prototype,e.detect=function(){var i=t.Capabilities,r=navigator.userAgent.toLowerCase();i.$isMobile=-1!=r.indexOf("mobile")||-1!=r.indexOf("android"),i.$isMobile?r.indexOf("windows")<0&&(-1!=r.indexOf("iphone")||-1!=r.indexOf("ipad")||-1!=r.indexOf("ipod"))?i.$os="iOS":-1!=r.indexOf("android")&&-1!=r.indexOf("linux")?i.$os="Android":-1!=r.indexOf("windows")&&(i.$os="Windows Phone"):-1!=r.indexOf("windows nt")?i.$os="Windows PC":-1!=r.indexOf("mac os")&&(i.$os="Mac OS");var n=(navigator.language||navigator.browserLanguage).toLowerCase(),s=n.split("-");s.length>1&&(s[1]=s[1].toUpperCase()),i.$language=s.join("-"),e.injectUIntFixOnIE9()},e.injectUIntFixOnIE9=function(){if(/msie 9.0/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){var t="<!-- IEBinaryToArray_ByteStr -->\r\n<script type='text/vbscript' language='VBScript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n</script>\r\n<!-- convertResponseBodyToText -->\r\n<script>\r\nvar convertResponseBodyToText = function (binary) {\r\n   var byteMapping = {};\r\n   for ( var i = 0; i < 256; i++ ) {\r\n       for ( var j = 0; j < 256; j++ ) {\r\n           byteMapping[ String.fromCharCode( i + j * 256 ) ] =\r\n           String.fromCharCode(i) + String.fromCharCode(j);\r\n       }\r\n   }\r\n   var rawBytes = IEBinaryToArray_ByteStr(binary);\r\n   var lastChr = IEBinaryToArray_ByteStr_Last(binary);\r\n   return rawBytes.replace(/[\\s\\S]/g,                           function( match ) { return byteMapping[match]; }) + lastChr;\r\n};\r\n</script>\r\n";document.write(t)}},e}();e.WebCapability=i,t.registerClass(i,"egret.web.WebCapability"),i.detect()}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(i,r,n,s,a){if(e.call(this),this.showPanle=!0,this.fpsHeight=0,this.WIDTH=101,this.HEIGHT=20,this.bgCanvasColor="#18304b",this.fpsFrontColor="#18fefe",this.WIDTH_COST=33,this.cost1Color="#18fefe",this.cost2Color="#ffff00",this.cost3Color="#ff0000",this.arrFps=[],this.arrCost=[],this.arrLog=[],r||n){"canvas"==t.Capabilities.renderMode?this.renderMode="Canvas":this.renderMode="WebGL",this.panelX=void 0===a.x?0:parseInt(a.x),this.panelY=void 0===a.y?0:parseInt(a.y),this.fontColor=void 0===a.textColor?"#ffffff":a.textColor.replace("0x","#"),this.fontSize=void 0===a.size?12:parseInt(a.size),t.Capabilities.isMobile&&(this.fontSize-=2);var o=document.createElement("div");o.style.position="absolute",o.style.background="rgba(0,0,0,"+a.bgAlpha+")",o.style.left=this.panelX+"px",o.style.top=this.panelY+"px",o.style.pointerEvents="none",document.body.appendChild(o);var h=document.createElement("div");h.style.color=this.fontColor,h.style.fontSize=this.fontSize+"px",h.style.lineHeight=this.fontSize+"px",h.style.margin="4px 4px 4px 4px",this.container=h,o.appendChild(h),r&&this.addFps(),n&&this.addLog()}}__extends(i,e);var r=i,n=r.prototype;return n.addFps=function(){var t=document.createElement("div");t.style.display="inline-block",this.containerFps=t,this.container.appendChild(t);var e=document.createElement("div");e.style.paddingBottom="2px",this.fps=e,this.containerFps.appendChild(e),e.innerHTML="0 FPS "+this.renderMode+"<br/>min0 max0 avg0";var i=document.createElement("canvas");this.containerFps.appendChild(i),i.width=this.WIDTH,i.height=this.HEIGHT,this.canvasFps=i;var r=i.getContext("2d");this.contextFps=r,r.fillStyle=this.bgCanvasColor,r.fillRect(0,0,this.WIDTH,this.HEIGHT);var n=document.createElement("div");this.divDatas=n,this.containerFps.appendChild(n);var s=document.createElement("div");s.style.float="left",s.innerHTML="Draw<br/>Dirty<br/>Cost",n.appendChild(s);var a=document.createElement("div");a.style.paddingLeft=s.offsetWidth+20+"px",n.appendChild(a);var o=document.createElement("div");this.divDraw=o,o.innerHTML="0<br/>0<br/>",a.appendChild(o);var h=document.createElement("div");this.divCost=h,h.innerHTML='<font  style="color:'+this.cost1Color+'">0<font/> <font  style="color:'+this.cost2Color+'">0<font/> <font  style="color:'+this.cost3Color+'">0<font/>',a.appendChild(h);var i=document.createElement("canvas");this.canvasCost=i,this.containerFps.appendChild(i),i.width=this.WIDTH,i.height=this.HEIGHT;var r=i.getContext("2d");this.contextCost=r,r.fillStyle=this.bgCanvasColor,r.fillRect(0,0,this.WIDTH,this.HEIGHT),r.fillStyle="#000000",r.fillRect(this.WIDTH_COST,0,1,this.HEIGHT),r.fillRect(2*this.WIDTH_COST+1,0,1,this.HEIGHT),this.fpsHeight=this.container.offsetHeight},n.addLog=function(){var t=document.createElement("div");t.style.maxWidth=document.body.clientWidth-8-this.panelX+"px",t.style.wordWrap="break-word",this.log=t,this.container.appendChild(t)},n.update=function(t,e){if(void 0===e&&(e=!1),e)i=this.arrFps[this.arrFps.length-1],r=this.arrCost[this.arrCost.length-1][0],n=this.arrCost[this.arrCost.length-1][1],s=this.arrCost[this.arrCost.length-1][2];else{var i=t.fps,r=t.costTicker,n=t.costDirty,s=t.costRender;this.lastNumDraw=t.draw,this.lastNumDirty=t.dirty,this.arrFps.push(i),this.arrCost.push([r,n,s])}var a=0,o=this.arrFps.length;o>101&&(o=101,this.arrFps.shift());for(var h=this.arrFps[0],l=this.arrFps[0],u=0;o>u;u++){var c=this.arrFps[u];a+=c,h>c?h=c:c>l&&(l=c)}var d=this.WIDTH,f=this.HEIGHT,g=this.contextFps;g.drawImage(this.canvasFps,1,0,d-1,f,0,0,d-1,f),g.fillStyle=this.bgCanvasColor,g.fillRect(d-1,0,1,f);var p=Math.floor(i/60*20);1>p&&(p=1),g.fillStyle=this.fpsFrontColor,g.fillRect(d-1,20-p,1,p);var v=this.WIDTH_COST,g=this.contextCost;g.drawImage(this.canvasCost,1,0,v-1,f,0,0,v-1,f),g.drawImage(this.canvasCost,v+2,0,v-1,f,v+1,0,v-1,f),g.drawImage(this.canvasCost,2*v+3,0,v-1,f,2*v+2,0,v-1,f);var m=Math.floor(r/2);1>m?m=1:m>20&&(m=20);var y=Math.floor(n/2);1>y?y=1:y>20&&(y=20);var T=Math.floor(s/2);1>T?T=1:T>20&&(T=20),g.fillStyle=this.bgCanvasColor,g.fillRect(v-1,0,1,f),g.fillRect(2*v,0,1,f),g.fillRect(3*v+1,0,1,f),g.fillStyle=this.cost1Color,g.fillRect(v-1,20-m,1,m),g.fillStyle=this.cost2Color,g.fillRect(2*v,20-y,1,y),g.fillStyle=this.cost3Color,g.fillRect(3*v+1,20-T,1,T);var x=Math.floor(a/o),_=i+" FPS "+this.renderMode;this.showPanle&&(_+="<br/>min"+h+" max"+l+" avg"+x,this.divDraw.innerHTML=this.lastNumDraw+"<br/>"+this.lastNumDirty+"%<br/>",this.divCost.innerHTML='<font  style="color:#18fefe">'+r+'<font/> <font  style="color:#ffff00">'+n+'<font/> <font  style="color:#ff0000">'+s+"<font/>"),this.fps.innerHTML=_},n.updateInfo=function(t){for(this.arrLog.push(t),this.log.innerHTML=this.arrLog.join("<br/>");document.body.clientHeight<this.log.offsetHeight+this.fpsHeight+this.panelY+2*this.fontSize;)this.arrLog.shift(),this.log.innerHTML=this.arrLog.join("<br/>")},i}(t.DisplayObject);e.WebFps=i,t.registerClass(i,"egret.web.WebFps",["egret.FPSDisplay"]),t.FPSDisplay=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t){if(window.location){var e=location.search;if(""==e)return"";e=e.slice(1);for(var i=e.split("&"),r=i.length,n=0;r>n;n++){var s=i[n],a=s.split("=");if(a[0]==t)return a[1]}}return""}e.getOption=i,t.getOption=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function r(t,e){i.call(this),this.init(t,e),this.initOrientation()}__extends(r,i);var n=r,s=n.prototype;return s.init=function(i,r){var n=this.readOption(i,r),s=new t.Stage;s.$screen=this,s.$scaleMode=n.scaleMode,s.$orientation=n.orientation,s.$maxTouches=n.maxTouches,s.frameRate=n.frameRate,s.textureScaleFactor=n.textureScaleFactor;var a=new t.sys.RenderBuffer,o=a.surface;this.attachCanvas(i,o);var h=new e.WebTouchHandler(s,o),l=new t.sys.Player(a,s,n.entryClassName),u=new t.web.WebHideHandler(s),c=new e.HTMLInput;l.showPaintRect(n.showPaintRect),(n.showFPS||n.showLog)&&l.displayFPS(n.showFPS,n.showLog,n.logFilter,n.fpsStyles),this.playerOption=n,this.container=i,this.canvas=o,this.stage=s,this.player=l,this.webTouchHandler=h,this.webInput=c,this.webHide=u,t.web.$cacheTextAdapter(c,s,i,o),this.updateScreenSize(),this.updateMaxTouches(),l.start()},s.initOrientation=function(){var e=this;window.addEventListener("orientationchange",function(){window.setTimeout(function(){t.StageOrientationEvent.dispatchStageOrientationEvent(e.stage,t.StageOrientationEvent.ORIENTATION_CHANGE)},350)})},s.readOption=function(e,i){var r={};r.entryClassName=e.getAttribute("data-entry-class"),r.scaleMode=e.getAttribute("data-scale-mode")||t.StageScaleMode.NO_SCALE,r.frameRate=+e.getAttribute("data-frame-rate")||30,r.contentWidth=+e.getAttribute("data-content-width")||480,r.contentHeight=+e.getAttribute("data-content-height")||800,r.orientation=e.getAttribute("data-orientation")||t.OrientationMode.AUTO,r.maxTouches=+e.getAttribute("data-multi-fingered")||2,r.textureScaleFactor=+e.getAttribute("texture-scale-factor")||1,"webgl"==i.renderMode?r.showPaintRect=!1:r.showPaintRect="true"==e.getAttribute("data-show-paint-rect"),r.showFPS="true"==e.getAttribute("data-show-fps");for(var n=e.getAttribute("data-show-fps-style")||"",s=n.split(","),a={},o=0;o<s.length;o++){var h=s[o].split(":");a[h[0]]=h[1]}return r.fpsStyles=a,r.showLog="true"==e.getAttribute("data-show-log"),r.logFilter=e.getAttribute("data-log-filter"),r},s.attachCanvas=function(t,e){var i=e.style;i.cursor="inherit",i.position="absolute",i.top="0",i.bottom="0",i.left="0",i.right="0",t.appendChild(e),i=t.style,i.overflow="hidden",i.position="relative",i.webkitTransform="translateZ(0)"},s.updateScreenSize=function(){var e=this.canvas;if(!e.userTyping){var i=this.playerOption,r=this.container.getBoundingClientRect(),n=!1,s=this.stage.$orientation;s!=t.OrientationMode.AUTO&&(n=s!=t.OrientationMode.PORTRAIT&&r.height>r.width||s==t.OrientationMode.PORTRAIT&&r.width>r.height);var a=n?r.height:r.width,o=n?r.width:r.height;t.Capabilities.$boundingClientWidth=a,t.Capabilities.$boundingClientHeight=o;var h=t.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,a,o,i.contentWidth,i.contentHeight),l=h.stageWidth,u=h.stageHeight,c=h.displayWidth,d=h.displayHeight;e.width!==l&&(e.width=l),e.height!==u&&(e.height=u),e.style[t.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",e.style.width=c+"px",e.style.height=d+"px";var f=0;n?s==t.OrientationMode.LANDSCAPE?(f=90,e.style.top=(r.height-c)/2+"px",e.style.left=(r.width+d)/2+"px"):(f=-90,e.style.top=(r.height+c)/2+"px",e.style.left=(r.width-d)/2+"px"):(e.style.top=(r.height-d)/2+"px",e.style.left=(r.width-c)/2+"px");var g="rotate("+f+"deg)";e.style[t.web.getPrefixStyleName("transform")]=g;var p=c/l,v=d/u;this.webTouchHandler.updateScaleMode(p,v,f),this.webInput.$updateSize(),this.player.updateStageSize(l,u)}},s.setContentSize=function(t,e){var i=this.playerOption;i.contentWidth=t,i.contentHeight=e,this.updateScreenSize()},s.updateMaxTouches=function(){this.webTouchHandler.$updateMaxTouches()},r}(t.HashObject);e.WebPlayer=i,t.registerClass(i,"egret.web.WebPlayer",["egret.sys.Screen"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(e,i){a||(a=document.createElement("canvas"),o=a.getContext("2d"));var r=e.$getTextureWidth(),n=e.$getTextureHeight();null==i&&(i=t.$TempRectangle,i.x=0,i.y=0,i.width=r,i.height=n),i.x=Math.min(i.x,r-1),i.y=Math.min(i.y,n-1),i.width=Math.min(i.width,r-i.x),i.height=Math.min(i.height,n-i.y);var s=i.width,h=i.height,l=a;l.style.width=s+"px",l.style.height=h+"px",a.width=s,a.height=h;var u=e,c=Math.round(u._offsetX),d=Math.round(u._offsetY),f=u._bitmapWidth,g=u._bitmapHeight;return o.drawImage(u._bitmapData,u._bitmapX+i.x/t.$TextureScaleFactor,u._bitmapY+i.y/t.$TextureScaleFactor,f*i.width/r,g*i.height/n,c,d,i.width,i.height),l}function r(e,r){try{var n=i(this,r),s=n.toDataURL(e);return s}catch(e){t.$error(1033)}return null}function n(t,e,i){var n=r.call(this,t,i);if(null!=n){var s=n.replace(/^data:image[^;]*/,"data:image/octet-stream"),a=document.createElement("a");a.download=e,a.href=s;var o=document.createEvent("HTMLEvents");o.initEvent("click",!1,!1),a.dispatchEvent(o)}}function s(e,i){var r=t.sys.hitTestBuffer;r.resize(3,3);var n=r.context;n.translate||(n=r),n.translate(1-e,1-i);var s=this._bitmapWidth,a=this._bitmapHeight,o=t.$TextureScaleFactor;n.drawImage(this._bitmapData,this._bitmapX,this._bitmapY,s,this._bitmapHeight,this._offsetX,this._offsetY,s*o,a*o),n.$drawWebGL&&n.$drawWebGL();try{var h=r.getPixel(1,1)}catch(e){throw console.log(this),new Error(t.sys.tr(1039))}return h}var a,o;t.Texture.prototype.toDataURL=r,t.Texture.prototype.saveToFile=n,t.Texture.prototype.getPixel32=s;var h=t.Texture.prototype.dispose;t.Texture.prototype.dispose=function(){t.WebGLUtils.deleteWebGLTexture(this._bitmapData),h.call(this)}}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t){for(var e=o.parseFromString(t,"text/xml"),i=e.childNodes.length,n=0;i>n;n++){var s=e.childNodes[n];if(1==s.nodeType)return r(s,null)}return null}function r(t,e){if("parsererror"==t.localName)throw new Error(t.textContent);for(var i=new s(t.localName,e,t.prefix,t.namespaceURI,t.nodeName),n=t.attributes,o=i.attributes,h=n.length,l=0;h>l;l++){var u=n[l],c=u.name;0!=c.indexOf("xmlns:")&&(o[c]=u.value,i["$"+c]=u.value)}var d=t.childNodes;h=d.length;var f=i.children;for(l=0;h>l;l++){var g=d[l],p=g.nodeType,v=null;if(1==p)v=r(g,i);else if(3==p){var m=g.textContent.trim();m&&(v=new a(m,i))}v&&f.push(v)}return i}var n=function(){function t(t,e){this.nodeType=t,this.parent=e}var e=t;return e.prototype,t}();e.XMLNode=n,t.registerClass(n,"egret.web.XMLNode");var s=function(t){function e(e,i,r,n,s){t.call(this,1,i),this.attributes={},this.children=[],this.localName=e,this.prefix=r,this.namespace=n,this.name=s}__extends(e,t);var i=e;return i.prototype,e}(n);e.XML=s,t.registerClass(s,"egret.web.XML");var a=function(t){function e(e,i){t.call(this,3,i),this.text=e}__extends(e,t);var i=e;return i.prototype,e}(n);e.XMLText=a,t.registerClass(a,"egret.web.XMLText");var o=new DOMParser;t.XML={parse:i}}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var i=this;e.apply(this,arguments),this.onChange=function(e){var r=new t.OrientationEvent(t.Event.CHANGE);r.beta=e.beta,r.gamma=e.gamma,r.alpha=e.alpha,i.dispatchEvent(r)}}__extends(i,e);var r=i,n=r.prototype;return n.start=function(){window.addEventListener("deviceorientation",this.onChange)},n.stop=function(){window.removeEventListener("deviceorientation",this.onChange)},i}(t.EventDispatcher);e.WebDeviceOrientation=i,t.registerClass(i,"egret.web.WebDeviceOrientation",["egret.DeviceOrientation"])}(e=t.web||(t.web={}))}(egret||(egret={})),egret.DeviceOrientation=egret.web.WebDeviceOrientation;var egret;!function(t){var e;!function(e){var i=function(e){function i(i){var r=this;e.call(this),this.onUpdate=function(e){var i=new t.GeolocationEvent(t.Event.CHANGE),n=e.coords;i.altitude=n.altitude,i.heading=n.heading,i.accuracy=n.accuracy,i.latitude=n.latitude,i.longitude=n.longitude,i.speed=n.speed,i.altitudeAccuracy=n.altitudeAccuracy,r.dispatchEvent(i)},this.onError=function(e){var i=t.GeolocationEvent.UNAVAILABLE;e.code==e.PERMISSION_DENIED&&(i=t.GeolocationEvent.PERMISSION_DENIED);var n=new t.GeolocationEvent(t.IOErrorEvent.IO_ERROR);n.errorType=i,n.errorMessage=e.message,r.dispatchEvent(n)},this.geolocation=navigator.geolocation}__extends(i,e);var r=i,n=r.prototype;return n.start=function(){var e=this.geolocation;e?this.watchId=e.watchPosition(this.onUpdate,this.onError):this.onError({code:2,message:t.sys.tr(3004),PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2})},n.stop=function(){var t=this.geolocation;t.clearWatch(this.watchId)},i}(t.EventDispatcher);e.WebGeolocation=i,t.registerClass(i,"egret.web.WebGeolocation",["egret.Geolocation"]),t.Geolocation=t.web.WebGeolocation}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var i=this;e.apply(this,arguments),this.onChange=function(e){var r=new t.MotionEvent(t.Event.CHANGE),n={x:e.acceleration.x,y:e.acceleration.y,z:e.acceleration.z},s={x:e.accelerationIncludingGravity.x,y:e.accelerationIncludingGravity.y,z:e.accelerationIncludingGravity.z},a={alpha:e.rotationRate.alpha,beta:e.rotationRate.beta,gamma:e.rotationRate.gamma};r.acceleration=n,r.accelerationIncludingGravity=s,r.rotationRate=a,i.dispatchEvent(r)}}__extends(i,e);var r=i,n=r.prototype;return n.start=function(){window.addEventListener("devicemotion",this.onChange)},n.stop=function(){window.removeEventListener("devicemotion",this.onChange)},i}(t.EventDispatcher);e.WebMotion=i,t.registerClass(i,"egret.web.WebMotion",["egret.Motion"]),t.Motion=t.web.WebMotion}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function e(t){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",this.fragmentSrc="",this.gl=null,this.program=null,this.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0}},this.gl=t}var i=e,r=i.prototype;return r.init=function(){var e=this.gl,i=t.WebGLUtils.compileProgram(e,this.defaultVertexSrc,this.fragmentSrc);e.useProgram(i),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=e.getUniformLocation(i,r);this.initUniforms(),this.program=i},r.initUniforms=function(){if(this.uniforms){var t,e=this.gl;for(var i in this.uniforms){t=this.uniforms[i],t.dirty=!0;var r=t.type;"mat2"===r||"mat3"===r||"mat4"===r?(t.glMatrix=!0,t.glValueLength=1,"mat2"===r?t.glFunc=e.uniformMatrix2fv:"mat3"===r?t.glFunc=e.uniformMatrix3fv:"mat4"===r&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+r],"2f"===r||"2i"===r?t.glValueLength=2:"3f"===r||"3i"===r?t.glValueLength=3:"4f"===r||"4i"===r?t.glValueLength=4:t.glValueLength=1)}}},r.syncUniforms=function(){if(this.uniforms){var t,e=this.gl;for(var i in this.uniforms)t=this.uniforms[i],t.dirty&&(1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(e,t.uniformLocation,t.transpose,t.value):t.glFunc.call(e,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength&&t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w),t.dirty=!1)}},r.setProjection=function(t,e){var i=this.uniforms.projectionVector;(i.value.x!=t||i.value.y!=e)&&(i.value.x=t,i.value.y=e,i.dirty=!0)},r.setAttribPointer=function(t){var e=this.gl;e.vertexAttribPointer(this.aVertexPosition,2,e.FLOAT,!1,t,0),e.vertexAttribPointer(this.aTextureCoord,2,e.FLOAT,!1,t,8),e.vertexAttribPointer(this.colorAttribute,1,e.FLOAT,!1,t,16)},e}();e.EgretShader=i,t.registerClass(i,"egret.web.EgretShader")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.apply(this,arguments),this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;\n}";
}__extends(e,t);var i=e;return i.prototype,e}(e.EgretShader);e.TextureShader=i,t.registerClass(i,"egret.web.TextureShader")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.apply(this,arguments),this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void) {\ngl_FragColor = vColor;\n}"}__extends(e,t);var i=e;return i.prototype,e}(e.EgretShader);e.PrimitiveShader=i,t.registerClass(i,"egret.web.PrimitiveShader")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.apply(this,arguments),this.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;uniform vec2 uTextureSize;void main(){const int sampleRadius = 5;const int samples = sampleRadius * 2 + 1;vec2 blurUv = blur / uTextureSize;vec4 color = vec4(0, 0, 0, 0);vec2 uv = vec2(0.0, 0.0);blurUv /= float(sampleRadius);for (int i = -sampleRadius; i <= sampleRadius; i++) {uv.x = vTextureCoord.x + float(i) * blurUv.x;uv.y = vTextureCoord.y + float(i) * blurUv.y;color += texture2D(uSampler, uv);}color /= float(samples);gl_FragColor = color;}",this.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},blur:{type:"2f",value:{x:2,y:2},dirty:!0},uTextureSize:{type:"2f",value:{x:100,y:100},dirty:!0}}}__extends(e,t);var i=e,r=i.prototype;return r.setBlur=function(t,e){var i=this.uniforms.blur;(i.value.x!=t||i.value.y!=e)&&(i.value.x=t,i.value.y=e,i.dirty=!0)},r.setTextureSize=function(t,e){var i=this.uniforms.uTextureSize;(t!=i.value.x||e!=i.value.y)&&(i.value.x=t,i.value.y=e,i.dirty=!0)},e}(e.TextureShader);e.BlurShader=i,t.registerClass(i,"egret.web.BlurShader")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.apply(this,arguments),this.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform float invert;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\nvec4 locColor = texColor * matrix;\nlocColor += colorAdd;\nif(locColor.a <= 0.0){\ndiscard;\n}\nlocColor = clamp(locColor, 0., 1.);gl_FragColor = vColor * vec4(locColor.rgb * locColor.a, locColor.a);\n}",this.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],dirty:!0},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0},dirty:!0}}}__extends(e,t);var i=e,r=i.prototype;return r.setMatrix=function(t){var e=this.uniforms.matrix;(e.value[0]!=t[0]||e.value[0]!=t[0]||e.value[1]!=t[1]||e.value[2]!=t[2]||e.value[3]!=t[3]||e.value[4]!=t[5]||e.value[5]!=t[6]||e.value[6]!=t[7]||e.value[7]!=t[8]||e.value[8]!=t[10]||e.value[9]!=t[11]||e.value[10]!=t[12]||e.value[11]!=t[13]||e.value[12]!=t[15]||e.value[13]!=t[16]||e.value[14]!=t[17]||e.value[15]!=t[18])&&(e.value[0]=t[0],e.value[1]=t[1],e.value[2]=t[2],e.value[3]=t[3],e.value[4]=t[5],e.value[5]=t[6],e.value[6]=t[7],e.value[7]=t[8],e.value[8]=t[10],e.value[9]=t[11],e.value[10]=t[12],e.value[11]=t[13],e.value[12]=t[15],e.value[13]=t[16],e.value[14]=t[17],e.value[15]=t[18],e.dirty=!0);var i=this.uniforms.colorAdd;(i.value.x!=t[4]/255||i.value.y!=t[9]/255||i.value.z!=t[14]/255||i.value.w!=t[19]/255)&&(i.value.x=t[4]/255,i.value.y=t[9]/255,i.value.z=t[14]/255,i.value.w=t[19]/255,i.dirty=!0)},e}(e.TextureShader);e.ColorTransformShader=i,t.registerClass(i,"egret.web.ColorTransformShader")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.apply(this,arguments),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","uniform float distance;","uniform float angle;","uniform vec4 color;","uniform float alpha;","uniform float blurX;","uniform float blurY;","uniform float strength;","uniform float inner;","uniform float knockout;","uniform float hideObject;","uniform vec2 uTextureSize;vec2 px = vec2(1.0 / uTextureSize.x, 1.0 / uTextureSize.y);","float random(vec3 scale, float seed)","{","return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);","}","void main(void) {","const float linearSamplingTimes = 7.0;","const float circleSamplingTimes = 12.0;","vec4 ownColor = texture2D(uSampler, vTextureCoord);","vec4 curColor;","float totalAlpha = 0.0;","float maxTotalAlpha = 0.0;","float curDistanceX = 0.0;","float curDistanceY = 0.0;","float offsetX = distance * cos(angle) * px.x;","float offsetY = distance * sin(angle) * px.y;","const float PI = 3.14159265358979323846264;","float cosAngle;","float sinAngle;","float offset = PI * 2.0 / circleSamplingTimes * random(vec3(12.9898, 78.233, 151.7182), 0.0);","float stepX = blurX * px.x / linearSamplingTimes;","float stepY = blurY * px.y / linearSamplingTimes;","for (float a = 0.0; a <= PI * 2.0; a += PI * 2.0 / circleSamplingTimes) {","cosAngle = cos(a + offset);","sinAngle = sin(a + offset);","for (float i = 1.0; i <= linearSamplingTimes; i++) {","curDistanceX = i * stepX * cosAngle;","curDistanceY = i * stepY * sinAngle;","curColor = texture2D(uSampler, vec2(vTextureCoord.x + curDistanceX - offsetX, vTextureCoord.y + curDistanceY + offsetY));","totalAlpha += (linearSamplingTimes - i) * curColor.a;","maxTotalAlpha += (linearSamplingTimes - i);","}","}","ownColor.a = max(ownColor.a, 0.0001);","ownColor.rgb = ownColor.rgb / ownColor.a;","float outerGlowAlpha = (totalAlpha / maxTotalAlpha) * strength * alpha * (1. - inner) * max(min(hideObject, knockout), 1. - ownColor.a);","float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * strength * alpha * inner * ownColor.a;","ownColor.a = max(ownColor.a * knockout * (1. - hideObject), 0.0001);","vec3 mix1 = mix(ownColor.rgb, color.rgb, innerGlowAlpha / (innerGlowAlpha + ownColor.a));","vec3 mix2 = mix(mix1, color.rgb, outerGlowAlpha / (innerGlowAlpha + ownColor.a + outerGlowAlpha));","float resultAlpha = min(ownColor.a + outerGlowAlpha + innerGlowAlpha, 1.);","gl_FragColor = vec4(mix2 * resultAlpha, resultAlpha);","}"].join("\n"),this.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},distance:{type:"1f",value:15,dirty:!0},angle:{type:"1f",value:1,dirty:!0},color:{type:"4f",value:{x:1,y:0,z:0,w:0},dirty:!0},alpha:{type:"1f",value:1,dirty:!0},blurX:{type:"1f",value:1,dirty:!0},blurY:{type:"1f",value:1,dirty:!0},strength:{type:"1f",value:1,dirty:!0},inner:{type:"1f",value:1,dirty:!0},knockout:{type:"1f",value:1,dirty:!0},hideObject:{type:"1f",value:0,dirty:!0},uTextureSize:{type:"2f",value:{x:100,y:100},dirty:!0}}}__extends(e,t);var i=e,r=i.prototype;return r.setDistance=function(t){var e=this.uniforms.distance;e.value!=t&&(e.value=t,e.dirty=!0)},r.setAngle=function(t){var e=this.uniforms.angle;e.value!=t&&(e.value=t,e.dirty=!0)},r.setColor=function(t,e,i){var r=this.uniforms.color;(r.value.x!=t||r.value.y!=e||r.value.z!=i)&&(r.value.x=t,r.value.y=e,r.value.z=i,r.dirty=!0)},r.setAlpha=function(t){var e=this.uniforms.alpha;e.value!=t&&(e.value=t,e.dirty=!0)},r.setBlurX=function(t){var e=this.uniforms.blurX;e.value!=t&&(e.value=t,e.dirty=!0)},r.setBlurY=function(t){var e=this.uniforms.blurY;e.value!=t&&(e.value=t,e.dirty=!0)},r.setStrength=function(t){var e=this.uniforms.strength;e.value!=t&&(e.value=t,e.dirty=!0)},r.setInner=function(t){var e=this.uniforms.inner;e.value!=t&&(e.value=t,e.dirty=!0)},r.setKnockout=function(t){var e=this.uniforms.knockout;e.value!=t&&(e.value=t,e.dirty=!0)},r.setHideObject=function(t){var e=this.uniforms.hideObject;e.value!=t&&(e.value=t,e.dirty=!0)},r.setTextureSize=function(t,e){var i=this.uniforms.uTextureSize;(t!=i.value.x||e!=i.value.y)&&(i.value.x=t,i.value.y=e,i.dirty=!0)},e}(e.TextureShader);e.GlowShader=i,t.registerClass(i,"egret.web.GlowShader")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function t(t){this.gl=null,this.maxAttibs=10,this.attribState=[],this.tempAttribState=[],this.currentShader=null,this.defaultShader=null,this.primitiveShader=null,this.colorTransformShader=null,this.blurShader=null,this.glowShader=null;for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.setContext(t)}var i=t,r=i.prototype;return r.setContext=function(t){this.gl=t,this.primitiveShader=new e.PrimitiveShader(t),this.defaultShader=new e.TextureShader(t),this.colorTransformShader=new e.ColorTransformShader(t),this.glowShader=new e.GlowShader(t),this.blurShader=new e.BlurShader(t),this.primitiveShader.init(),this.defaultShader.init(),this.colorTransformShader.init(),this.blurShader.init(),this.glowShader.init()},r.activateShader=function(t,e){this.currentShader!=t&&(this.gl.useProgram(t.program),this.setAttribs(t.attributes),t.setAttribPointer(e),this.currentShader=t)},r.setAttribs=function(t){var e,i;for(i=this.tempAttribState.length,e=0;i>e;e++)this.tempAttribState[e]=!1;for(i=t.length,e=0;i>e;e++){var r=t[e];this.tempAttribState[r]=!0}var n=this.gl;for(i=this.attribState.length,e=0;i>e;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?n.enableVertexAttribArray(e):n.disableVertexAttribArray(e))},t}();e.WebGLShaderManager=i,t.registerClass(i,"egret.web.WebGLShaderManager")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function t(){this.drawData=[],this.drawDataLen=0}var e=t,i=e.prototype;return i.pushDrawRect=function(){if(0==this.drawDataLen||1!=this.drawData[this.drawDataLen-1].type){var t=this.drawData[this.drawDataLen]||{};t.type=1,t.count=0,this.drawData[this.drawDataLen]=t,this.drawDataLen++}this.drawData[this.drawDataLen-1].count+=2},i.pushDrawTexture=function(t,e,i,r,n){if(void 0===e&&(e=2),i){var s=this.drawData[this.drawDataLen]||{};s.type=0,s.texture=t,s.filter=i,s.count=e,s.textureWidth=r,s.textureHeight=n,this.drawData[this.drawDataLen]=s,this.drawDataLen++}else{if(0==this.drawDataLen||0!=this.drawData[this.drawDataLen-1].type||t!=this.drawData[this.drawDataLen-1].texture||this.drawData[this.drawDataLen-1].filter){var s=this.drawData[this.drawDataLen]||{};s.type=0,s.texture=t,s.count=0,this.drawData[this.drawDataLen]=s,this.drawDataLen++}this.drawData[this.drawDataLen-1].count+=e}},i.pushPushMask=function(t){void 0===t&&(t=1);var e=this.drawData[this.drawDataLen]||{};e.type=2,e.count=2*t,this.drawData[this.drawDataLen]=e,this.drawDataLen++},i.pushPopMask=function(t){void 0===t&&(t=1);var e=this.drawData[this.drawDataLen]||{};e.type=3,e.count=2*t,this.drawData[this.drawDataLen]=e,this.drawDataLen++},i.pushSetBlend=function(t){for(var e=this.drawDataLen,i=!1,r=e-1;r>=0;r--){var n=this.drawData[r];if(n){if((0==n.type||1==n.type)&&(i=!0),!i&&4==n.type){this.drawData.splice(r,1),this.drawDataLen--;continue}if(4==n.type){if(n.value==t)return;break}}}var s=this.drawData[this.drawDataLen]||{};s.type=4,s.value=t,this.drawData[this.drawDataLen]=s,this.drawDataLen++},i.pushResize=function(t,e,i){var r=this.drawData[this.drawDataLen]||{};r.type=5,r.buffer=t,r.width=e,r.height=i,this.drawData[this.drawDataLen]=r,this.drawDataLen++},i.pushClearColor=function(){var t=this.drawData[this.drawDataLen]||{};t.type=6,this.drawData[this.drawDataLen]=t,this.drawDataLen++},i.pushActivateBuffer=function(t){for(var e=this.drawDataLen,i=!1,r=e-1;r>=0;r--){var n=this.drawData[r];!n||(4!=n.type&&7!=n.type&&(i=!0),i||7!=n.type)||(this.drawData.splice(r,1),this.drawDataLen--)}var s=this.drawData[this.drawDataLen]||{};s.type=7,s.buffer=t,s.width=t.rootRenderTarget.width,s.height=t.rootRenderTarget.height,this.drawData[this.drawDataLen]=s,this.drawDataLen++},i.clear=function(){for(var t=0;t<this.drawDataLen;t++){var e=this.drawData[t];e.type=0,e.count=0,e.texture=null,e.filter=null,e.uv=null,e.value="",e.buffer=null,e.width=0,e.height=0}this.drawDataLen=0},t}();e.WebGLDrawCmdManager=i,t.registerClass(i,"egret.web.WebGLDrawCmdManager")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function t(){this.size=2e3,this.vertexMaxSize=4*this.size,this.indicesMaxSize=6*this.size,this.vertSize=5,this.vertices=null,this.indices=null,this.indicesForMesh=null,this.vertexIndex=0,this.indexIndex=0,this.hasMesh=!1;var t=this.vertexMaxSize*this.vertSize,e=this.indicesMaxSize;this.vertices=new Float32Array(t),this.indices=new Uint16Array(e),this.indicesForMesh=new Uint16Array(e);for(var i=0,r=0;e>i;i+=6,r+=4)this.indices[i+0]=r+0,this.indices[i+1]=r+1,this.indices[i+2]=r+2,this.indices[i+3]=r+0,this.indices[i+4]=r+2,this.indices[i+5]=r+3}var e=t,i=e.prototype;return i.reachMaxSize=function(t,e){return void 0===t&&(t=4),void 0===e&&(e=6),this.vertexIndex>this.vertexMaxSize-t||this.indexIndex>this.indicesMaxSize-e},i.getVertices=function(){var t=this.vertices.subarray(0,this.vertexIndex*this.vertSize);return t},i.getIndices=function(){return this.indices},i.getMeshIndices=function(){return this.indicesForMesh},i.changeToMeshIndices=function(){if(!this.hasMesh){for(var t=0,e=this.indexIndex;e>t;++t)this.indicesForMesh[t]=this.indices[t];this.hasMesh=!0}},i.isMesh=function(){return this.hasMesh},i.cacheArrays=function(t,e,i,r,n,s,a,o,h,l,u,c,d,f,g){var p=t,v=p.a,m=p.b,y=p.c,T=p.d,x=p.tx,_=p.ty;(0!=a||0!=o)&&p.append(1,0,0,1,a,o),(n/h!=1||s/l!=1)&&p.append(h/n,0,0,l/s,0,0);var $=p.a,E=p.b,b=p.c,w=p.d,S=p.tx,C=p.ty;if(p.a=v,p.b=m,p.c=y,p.d=T,p.tx=x,p.ty=_,f){var R=this.vertices,L=this.vertexIndex*this.vertSize,D=0,O=0,F=0,P=0,I=0,M=0,A=0;for(D=0,F=d.length;F>D;D+=2)O=5*D/2,M=f[D],A=f[D+1],P=d[D],I=d[D+1],R[L+O+0]=$*M+b*A+S,R[L+O+1]=E*M+w*A+C,R[L+O+2]=(i+P*n)/u,R[L+O+3]=(r+I*s)/c,R[L+O+4]=e;if(this.hasMesh)for(var D=0,F=g.length;F>D;++D)this.indicesForMesh[this.indexIndex+D]=g[D]+this.vertexIndex;this.vertexIndex+=d.length/2,this.indexIndex+=g.length}else{var B=u,N=c,k=n,U=s;i/=B,r/=N,n/=B,s/=N;var R=this.vertices,L=this.vertexIndex*this.vertSize;if(R[L++]=S,R[L++]=C,R[L++]=i,R[L++]=r,R[L++]=e,R[L++]=$*k+S,R[L++]=E*k+C,R[L++]=n+i,R[L++]=r,R[L++]=e,R[L++]=$*k+b*U+S,R[L++]=w*U+E*k+C,R[L++]=n+i,R[L++]=s+r,R[L++]=e,R[L++]=b*U+S,R[L++]=w*U+C,R[L++]=i,R[L++]=s+r,R[L++]=e,this.hasMesh){var H=this.indicesForMesh;H[this.indexIndex+0]=0+this.vertexIndex,H[this.indexIndex+1]=1+this.vertexIndex,H[this.indexIndex+2]=2+this.vertexIndex,H[this.indexIndex+3]=0+this.vertexIndex,H[this.indexIndex+4]=2+this.vertexIndex,H[this.indexIndex+5]=3+this.vertexIndex}this.vertexIndex+=4,this.indexIndex+=6}},i.clear=function(){this.hasMesh=!1,this.vertexIndex=0,this.indexIndex=0},t}();e.WebGLVertexArrayObject=i,t.registerClass(i,"egret.web.WebGLVertexArrayObject")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function t(t,e,i){this.clearColor=[0,0,0,0],this.useFrameBuffer=!0,this.gl=t,this.width=e||1,this.height=i||1,this.texture=this.createTexture(),this.frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer)}var e=t,i=e.prototype;return i.resize=function(t,e){var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindFramebuffer(i.FRAMEBUFFER,this.frameBuffer),i.bindRenderbuffer(i.RENDERBUFFER,this.stencilBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e),this.width=t,this.height=e},i.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer())},i.getFrameBuffer=function(){return this.useFrameBuffer?this.frameBuffer:null},i.createTexture=function(){var t=this.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e},i.clear=function(t){var e=this.gl;t&&this.activate(),e.colorMask(!0,!0,!0,!0),e.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),e.clear(e.COLOR_BUFFER_BIT)},t}();e.WebGLRenderTarget=i,t.registerClass(i,"egret.web.WebGLRenderTarget")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(e,i){var r=document.createElement("canvas");return isNaN(e)||isNaN(i)||(r.width=e,r.height=i),t.$toBitmapData(r),r}var r=function(){function r(t,r){this.glID=null,this.projectionX=NaN,this.projectionY=NaN,this.shaderManager=null,this.contextLost=!1,this.vertSize=5,this.blurFilter=null,this.surface=i(t,r),this.initWebGL(),this.$bufferStack=[];var n=this.context;this.vertexBuffer=n.createBuffer(),this.indexBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.drawCmdManager=new e.WebGLDrawCmdManager,this.vao=new e.WebGLVertexArrayObject,this.setGlobalCompositeOperation("source-over")}var n=r,s=n.prototype;return r.getInstance=function(t,e){return this.instance?this.instance:(this.instance=new r(t,e),this.instance)},s.pushBuffer=function(t){this.$bufferStack.push(t),t!=this.currentBuffer&&(this.currentBuffer,this.drawCmdManager.pushActivateBuffer(t)),this.currentBuffer=t},s.popBuffer=function(){if(!(this.$bufferStack.length<=1)){var t=this.$bufferStack.pop(),e=this.$bufferStack[this.$bufferStack.length-1];t!=e&&this.drawCmdManager.pushActivateBuffer(e),this.currentBuffer=e}},s.activateBuffer=function(t){t.rootRenderTarget.activate(),this.bindIndices||(this.uploadIndicesArray(this.vao.getIndices()),this.bindIndices=!0),t.restoreStencil(),this.onResize(t.width,t.height)},s.uploadVerticesArray=function(t){var e=this.context;e.bufferData(e.ARRAY_BUFFER,t,e.STREAM_DRAW)},s.uploadIndicesArray=function(t){var e=this.context;e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)},s.destroy=function(){this.surface.width=this.surface.height=0},s.onResize=function(t,e){var t=t||this.surface.width,e=e||this.surface.height;this.projectionX=t/2,this.projectionY=-e/2,this.context&&this.context.viewport(0,0,t,e)},s.resize=function(t,e,i){var r=this.surface;i?(r.width<t&&(r.width=t),r.height<e&&(r.height=e)):(r.width!=t&&(r.width=t),r.height!=e&&(r.height=e)),this.onResize()},s.initWebGL=function(){this.onResize(),this.surface.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),this.surface.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1),this.getWebGLContext(),this.shaderManager=new e.WebGLShaderManager(this.context)},s.handleContextLost=function(){this.contextLost=!0},s.handleContextRestored=function(){this.initWebGL(),this.contextLost=!1},s.getWebGLContext=function(){for(var e,i={stencil:!0},r=["webgl","experimental-webgl"],n=0;n<r.length;n++){try{e=this.surface.getContext(r[n],i)}catch(t){}if(e)break}e||t.$error(1021),this.setContext(e)},s.setContext=function(t){this.context=t,t.id=r.glContextId++,this.glID=t.id,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.colorMask(!0,!0,!0,!0),t.activeTexture(t.TEXTURE0)},s.enableStencilTest=function(){var t=this.context;t.enable(t.STENCIL_TEST)},s.disableStencilTest=function(){var t=this.context;t.disable(t.STENCIL_TEST)},s.getPixels=function(t,e,i,r,n){var s=this.context;s.readPixels(t,e,i,r,s.RGBA,s.UNSIGNED_BYTE,n)},s.createTexture=function(t){var e=this.context,i=e.createTexture();return i?(i.glContext=e,e.bindTexture(e.TEXTURE_2D,i),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i):void(this.contextLost=!0)},s.updateTexture=function(t,e){var i=this.context;i.bindTexture(i.TEXTURE_2D,t),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e)},s.getWebGLTexture=function(t){var e=t;if(e.webGLTexture||(e.webGLTexture={}),!e.webGLTexture[this.glID]){var i=this.createTexture(e);e.webGLTexture[this.glID]=i}return e.webGLTexture[this.glID]},s.clearRect=function(t,e,i,r){0!=t||0!=e||i!=this.surface.width||r!=this.surface.height?(this.setGlobalCompositeOperation("destination-out"),this.drawRect(t,e,i,r),this.setGlobalCompositeOperation("source-over")):this.clear()},s.setGlobalCompositeOperation=function(t){this.drawCmdManager.pushSetBlend(t)},s.drawImage=function(t,e,i,r,n,s,a,o,h,l,u){var c=this.currentBuffer;if(!this.contextLost&&t&&c){var d;t.texture?(d=t.texture,c.saveTransform(),c.transform(1,0,0,-1,0,h+2*a)):d=this.getWebGLTexture(t),d&&(this.drawTexture(d,e,i,r,n,s,a,o,h,l,u),t.texture&&c.restoreTransform())}},s.drawMesh=function(t,e,i,r,n,s,a,o,h,l,u,c,d,f,g){if(!this.contextLost&&t){var p=this.getWebGLTexture(t);p&&this.drawTexture(p,e,i,r,n,s,a,o,h,l,u,c,d,f,g)}},s.drawTexture=function(t,e,i,r,n,s,a,o,h,l,u,c,d,f,g){var p=this.currentBuffer;if(!this.contextLost&&t&&p){d&&f?this.vao.reachMaxSize(d.length/2,f.length)&&this.$drawWebGL():this.vao.reachMaxSize()&&this.$drawWebGL(),c&&this.vao.changeToMeshIndices();var v=p.globalMatrix,m=p.globalAlpha,y=f?f.length/3:2;this.drawCmdManager.pushDrawTexture(t,y,this.$filter),this.vao.cacheArrays(v,m,e,i,r,n,s,a,o,h,l,u,c,d,f)}},s.drawRect=function(t,e,i,r){var n=this.currentBuffer;!this.contextLost&&n&&(this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushDrawRect(),this.vao.cacheArrays(n.globalMatrix,n.globalAlpha,0,0,i,r,t,e,i,r,i,r))},s.pushMask=function(t){var e=this.currentBuffer;if(!this.contextLost&&e){e.$stencilList.push(t),this.vao.reachMaxSize()&&this.$drawWebGL();var i=t.length;if(i){this.drawCmdManager.pushPushMask(i);for(var r=0;i>r;r++){var n=t[r];this.vao.cacheArrays(e.globalMatrix,e.globalAlpha,0,0,n.width,n.height,n.minX,n.minY,n.width,n.height,n.width,n.height)}}else this.drawCmdManager.pushPushMask(),this.vao.cacheArrays(e.globalMatrix,e.globalAlpha,0,0,t.width,t.height,t.x,t.y,t.width,t.height,t.width,t.height)}},s.popMask=function(){var t=this.currentBuffer;if(!this.contextLost&&t){var e=t.$stencilList.pop();this.vao.reachMaxSize()&&this.$drawWebGL();var i=e.length;if(i){this.drawCmdManager.pushPopMask(i);for(var r=0;i>r;r++){var n=e[r];this.vao.cacheArrays(t.globalMatrix,t.globalAlpha,0,0,n.width,n.height,n.minX,n.minY,n.width,n.height,n.width,n.height)}}else this.drawCmdManager.pushPopMask(),this.vao.cacheArrays(t.globalMatrix,t.globalAlpha,0,0,e.width,e.height,e.x,e.y,e.width,e.height,e.width,e.height)}},s.clear=function(){this.drawCmdManager.pushClearColor()},s.$drawWebGL=function(){if(0!=this.drawCmdManager.drawDataLen&&!this.contextLost){this.uploadVerticesArray(this.vao.getVertices()),this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getMeshIndices());for(var t=this.drawCmdManager.drawDataLen,e=0,i=0;t>i;i++){var r=this.drawCmdManager.drawData[i];e=this.drawData(r,e),7==r.type&&(this.activatedBuffer=r.buffer),(0==r.type||1==r.type||2==r.type||3==r.type)&&this.activatedBuffer&&this.activatedBuffer.$computeDrawCall&&this.activatedBuffer.$drawCalls++}this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getIndices()),this.drawCmdManager.clear(),this.vao.clear()}},s.drawData=function(t,e){if(t){switch(t.type){case 0:var i,r=t.filter;r?"colorTransform"==r.type?(i=this.shaderManager.colorTransformShader,i.setMatrix(r.$matrix)):"blur"==r.type?(i=this.shaderManager.blurShader,i.setBlur(r.$blurX,r.$blurY),i.setTextureSize(t.textureWidth,t.textureHeight)):"glow"==r.type&&(i=this.shaderManager.glowShader,i.setDistance(r.$distance||0),i.setAngle(r.$angle?r.$angle/180*Math.PI:0),i.setColor(r.$red/255,r.$green/255,r.$blue/255),i.setAlpha(r.$alpha),i.setBlurX(r.$blurX),i.setBlurY(r.$blurY),i.setStrength(r.$strength),i.setInner(r.$inner?1:0),i.setKnockout(r.$knockout?0:1),i.setHideObject(r.$hideObject?1:0),i.setTextureSize(t.textureWidth,t.textureHeight)):i=this.shaderManager.defaultShader,i.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(i,4*this.vertSize),i.syncUniforms(),e+=this.drawTextureElements(t,e);break;case 1:var i=this.shaderManager.primitiveShader;i.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(i,4*this.vertSize),i.syncUniforms(),e+=this.drawRectElements(t,e);break;case 2:var i=this.shaderManager.primitiveShader;i.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(i,4*this.vertSize),i.syncUniforms(),e+=this.drawPushMaskElements(t,e);break;case 3:var i=this.shaderManager.primitiveShader;i.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(i,4*this.vertSize),i.syncUniforms(),e+=this.drawPopMaskElements(t,e);break;case 4:this.setBlendMode(t.value);break;case 5:t.buffer.rootRenderTarget.resize(t.width,t.height),this.onResize(t.width,t.height);break;case 6:if(this.activatedBuffer){var n=this.activatedBuffer.rootRenderTarget;(0!=n.width||0!=n.height)&&n.clear()}break;case 7:this.activateBuffer(t.buffer)}return e}},s.drawTextureElements=function(t,e){var i=this.context;i.bindTexture(i.TEXTURE_2D,t.texture);var r=3*t.count;return i.drawElements(i.TRIANGLES,r,i.UNSIGNED_SHORT,2*e),r},s.drawRectElements=function(t,e){var i=this.context,r=3*t.count;return i.drawElements(i.TRIANGLES,r,i.UNSIGNED_SHORT,2*e),r},s.drawPushMaskElements=function(t,e){var i=this.context,r=3*t.count,n=this.activatedBuffer;if(n){0==n.stencilHandleCount&&(n.enableStencil(),i.clear(i.STENCIL_BUFFER_BIT));var s=n.stencilHandleCount;n.stencilHandleCount++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,s,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR),i.drawElements(i.TRIANGLES,r,i.UNSIGNED_SHORT,2*e),i.stencilFunc(i.EQUAL,s+1,255),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}return r},s.drawPopMaskElements=function(t,e){var i=this.context,r=3*t.count,n=this.activatedBuffer;if(n)if(n.stencilHandleCount--,0==n.stencilHandleCount)n.disableStencil();else{var s=n.stencilHandleCount;i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,s+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR),i.drawElements(i.TRIANGLES,r,i.UNSIGNED_SHORT,2*e),i.stencilFunc(i.EQUAL,s,255),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}return r},s.setBlendMode=function(t){var e=this.context,i=r.blendModesForGL[t];i&&e.blendFunc(i[0],i[1])},s.drawTargetWidthFilters=function(t,i){var r,n=i,s=t.length;if(s>1)for(var a=0;s-1>a;a++){var o=t[a],h=i.rootRenderTarget.width,l=i.rootRenderTarget.height;r=e.WebGLRenderBuffer.create(h,l),r.setTransform(1,0,0,1,0,0),r.globalAlpha=1,this.drawToRenderTarget(o,i,r),i!=n&&e.WebGLRenderBuffer.release(i),i=r}var o=t[s-1];this.drawToRenderTarget(o,i,this.currentBuffer),i!=n&&e.WebGLRenderBuffer.release(i)},s.drawToRenderTarget=function(i,r,n){if(!this.contextLost){this.vao.reachMaxSize()&&this.$drawWebGL(),this.pushBuffer(n);var s,a=r,o=r.rootRenderTarget.width,h=r.rootRenderTarget.height;"blur"==i.type&&(this.blurFilter||(this.blurFilter=new t.BlurFilter(2,2)),0!=i.blurX&&0!=i.blurY?(this.blurFilter.blurX=i.blurX,this.blurFilter.blurY=0,s=e.WebGLRenderBuffer.create(o,h),s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,this.drawToRenderTarget(this.blurFilter,r,s),r!=a&&e.WebGLRenderBuffer.release(r),r=s,this.blurFilter.blurX=0,this.blurFilter.blurY=i.blurY):(this.blurFilter.blurX=i.blurX,this.blurFilter.blurY=i.blurY),i=this.blurFilter),n.saveTransform(),n.transform(1,0,0,-1,0,h),this.vao.cacheArrays(n.globalMatrix,n.globalAlpha,0,0,o,h,0,0,o,h,o,h),n.restoreTransform();var l;l="blur"==i.type?{type:"blur",$blurX:i.$blurX,$blurY:i.$blurY}:i,this.drawCmdManager.pushDrawTexture(r.rootRenderTarget.texture,2,l,o,h),r!=a&&e.WebGLRenderBuffer.release(r),this.popBuffer()}},r.initBlendMode=function(){r.blendModesForGL={},r.blendModesForGL["source-over"]=[1,771],r.blendModesForGL.lighter=[770,1],r.blendModesForGL["lighter-in"]=[770,771],r.blendModesForGL["destination-out"]=[0,771],r.blendModesForGL["destination-in"]=[0,770]},r.glContextId=0,r.blendModesForGL=null,r}();e.WebGLRenderContext=r,t.registerClass(r,"egret.web.WebGLRenderContext"),r.initBlendMode()}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function i(i,r){if(this.globalAlpha=1,this.stencilState=!1,this.$stencilList=[],this.stencilHandleCount=0,this.dirtyRegionPolicy=!0,this._dirtyRegionPolicy=!0,this.$drawCalls=0,this.$computeDrawCall=!1,this.globalMatrix=new t.Matrix,this.savedGlobalMatrix=new t.Matrix,this.context=e.WebGLRenderContext.getInstance(i,r),this.rootRenderTarget=new e.WebGLRenderTarget(this.context.context,3,3),i&&r&&this.resize(i,r),this.root=0==this.context.$bufferStack.length,this.root)this.context.pushBuffer(this),this.surface=this.context.surface;else{var n=this.context.activatedBuffer;n&&n.rootRenderTarget.activate(),this.surface=this.rootRenderTarget}}var n=__define,s=i,a=s.prototype;return a.enableStencil=function(){this.stencilState||(this.context.enableStencilTest(),this.stencilState=!0)},a.disableStencil=function(){this.stencilState&&(this.context.disableStencilTest(),this.stencilState=!1)},a.restoreStencil=function(){this.stencilState?this.context.enableStencilTest():this.context.disableStencilTest()},n(a,"width",function(){return this.rootRenderTarget.width}),n(a,"height",function(){return this.rootRenderTarget.height}),a.resize=function(t,e,i){this.context.pushBuffer(this),t=t||1,e=e||1,(t!=this.rootRenderTarget.width||e!=this.rootRenderTarget.height)&&(this.context.drawCmdManager.pushResize(this,t,e),this.rootRenderTarget.width=t,this.rootRenderTarget.height=e),this.root&&this.context.resize(t,e,i),this.context.clear(),this.context.popBuffer()},a.resizeTo=function(t,e,r,n){this.context.pushBuffer(this);var s=this.rootRenderTarget.width,a=this.rootRenderTarget.height,o=i.create(s,a);this.context.pushBuffer(o),this.context.drawImage(this.rootRenderTarget,0,0,s,a,0,0,s,a,s,a),this.context.popBuffer(),this.resize(t,e),this.setTransform(1,0,0,1,0,0),this.context.drawImage(o.rootRenderTarget,0,0,s,a,r,n,s,a,s,a),i.release(o),this.context.popBuffer()},a.setDirtyRegionPolicy=function(t){this.dirtyRegionPolicy="on"==t},a.beginClip=function(t,e,i){this.context.pushBuffer(this),this.root&&(this._dirtyRegionPolicy?(this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate()):(this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.context.clear())),e=+e||0,i=+i||0,this.setTransform(1,0,0,1,e,i);var r=t.length;if(1==r&&0==t[0].minX&&0==t[0].minY&&t[0].width==this.rootRenderTarget.width&&t[0].height==this.rootRenderTarget.height)return this.maskPushed=!1,this.rootRenderTarget.useFrameBuffer&&this.context.clear(),void this.context.popBuffer();for(var n=0;r>n;n++){var s=t[n];this.context.clearRect(s.minX,s.minY,s.width,s.height)}r>0?(this.context.pushMask(t),this.maskPushed=!0,this.offsetX=e,this.offsetY=i):this.maskPushed=!1,this.context.popBuffer()},a.endClip=function(){this.maskPushed&&(this.context.pushBuffer(this),this.setTransform(1,0,0,1,this.offsetX,this.offsetY),this.context.popMask(),this.context.popBuffer())},a.getPixel=function(t,e){var i=new Uint8Array(4),r=this.rootRenderTarget.useFrameBuffer;return this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.getPixels(t,e,1,1,i),this.rootRenderTarget.useFrameBuffer=r,this.rootRenderTarget.activate(),i},a.toDataURL=function(t,e){return this.context.surface.toDataURL(t,e)},a.destroy=function(){this.context.destroy()},a.onRenderFinish=function(){this.$drawCalls=0,this.root&&(!this._dirtyRegionPolicy&&this.dirtyRegionPolicy&&this.drawSurfaceToFrameBuffer(0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,!0),
this._dirtyRegionPolicy&&this.drawFrameBufferToSurface(0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,0,0,this.rootRenderTarget.width,this.rootRenderTarget.height),this._dirtyRegionPolicy=this.dirtyRegionPolicy)},a.drawFrameBufferToSurface=function(t,e,i,r,n,s,a,o,h){void 0===h&&(h=!1),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),h&&this.context.clear(),this.context.drawImage(this.rootRenderTarget,t,e,i,r,n,s,a,o,i,r),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.restoreStencil()},a.drawSurfaceToFrameBuffer=function(t,e,i,r,n,s,a,o,h){void 0===h&&(h=!1),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),h&&this.context.clear(),this.context.drawImage(this.context.surface,t,e,i,r,n,s,a,o,i,r),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.restoreStencil()},a.clear=function(){this.context.clear()},a.setTransform=function(t,e,i,r,n,s){var a=this.globalMatrix;a.a=t,a.b=e,a.c=i,a.d=r,a.tx=n,a.ty=s},a.transform=function(t,e,i,r,n,s){var a=this.globalMatrix,o=a.a,h=a.b,l=a.c,u=a.d;(1!=t||0!=e||0!=i||1!=r)&&(a.a=t*o+e*l,a.b=t*h+e*u,a.c=i*o+r*l,a.d=i*h+r*u),a.tx=n*o+s*l+a.tx,a.ty=n*h+s*u+a.ty},a.translate=function(t,e){var i=this.globalMatrix;i.tx+=t,i.ty+=e},a.saveTransform=function(){var t=this.globalMatrix,e=this.savedGlobalMatrix;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},a.restoreTransform=function(){var t=this.globalMatrix,e=this.savedGlobalMatrix;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.tx=e.tx,t.ty=e.ty},i.create=function(t,e){var n=r.pop();return n?n.resize(t,e):(n=new i(t,e),n.$computeDrawCall=!1),n},i.release=function(t){r.push(t)},i}();e.WebGLRenderBuffer=i,t.registerClass(i,"egret.web.WebGLRenderBuffer",["egret.sys.RenderBuffer"]);var r=[]}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=["source-over","lighter","destination-out"],r="source-over",n=[],s=function(){function s(){this.nestLevel=0}var a=s,o=a.prototype;return o.render=function(t,e,i,r,s){this.nestLevel++;var a=e,o=a.context,h=s?t:null;o.pushBuffer(a),this.drawDisplayObject(t,a,r,i,null,null,h),o.$drawWebGL();var l=a.$drawCalls;if(a.onRenderFinish(),o.popBuffer(),this.nestLevel--,0===this.nestLevel){n.length>6&&(n.length=6);for(var u=n.length,c=0;u>c;c++)n[c].resize(0,0)}return l},o.drawDisplayObject=function(e,i,r,n,s,a,o){var h,l=0;if(s&&!o?(s.isDirty&&(l+=s.drawToSurface()),h=s.$renderNode):h=e.$getRenderNode(),h){if(r){var u=h.renderRegion;if(a&&!a.intersects(u))h.needRedraw=!1;else if(!h.needRedraw)for(var c=r.length,d=0;c>d;d++)if(u.intersects(r[d])){h.needRedraw=!0;break}}else h.needRedraw=!0;if(h.needRedraw){l++;var f,g;o?(f=e.$getConcatenatedAlphaAt(o,e.$getConcatenatedAlpha()),g=t.Matrix.create().copyFrom(e.$getConcatenatedMatrix()),e.$getConcatenatedMatrixAt(o,g),n.$preMultiplyInto(g,g),i.setTransform(g.a,g.b,g.c,g.d,g.tx,g.ty),t.Matrix.release(g)):(f=h.renderAlpha,g=h.renderMatrix,i.setTransform(g.a,g.b,g.c,g.d,g.tx+n.tx,g.ty+n.ty)),i.globalAlpha=f,this.renderNode(h,i),h.needRedraw=!1}}if(s&&!o)return l;var p=e.$children;if(p)for(var v=p.length,m=0;v>m;m++){var y=p[m];if(!(!y.$visible||y.$alpha<=0||y.$maskedObject)){var T=y.$getFilters();T&&T.length>0?l+=this.drawWithFilter(y,i,r,n,a,o):0!==y.$blendMode||y.$mask&&(y.$mask.$parentDisplayList||o)?l+=this.drawWithClip(y,i,r,n,a,o):y.$scrollRect||y.$maskRect?l+=this.drawWithScrollRect(y,i,r,n,a,o):y.isFPS?(i.context.$drawWebGL(),i.$computeDrawCall=!1,this.drawDisplayObject(y,i,r,n,y.$displayList,a,o),i.context.$drawWebGL(),i.$computeDrawCall=!0):l+=this.drawDisplayObject(y,i,r,n,y.$displayList,a,o)}}return l},o.drawWithFilter=function(e,s,a,o,h,l){var u=0,c=e.$getFilters(),d=0!==e.$blendMode;if(d){var f=i[e.$blendMode];f||(f=r)}if(1==c.length&&"colorTransform"==c[0].type&&!e.$children)return d&&s.context.setGlobalCompositeOperation(f),s.context.$filter=c[0],u+=this.drawDisplayObject(e,s,a,o,e.$displayList,h,l),s.context.$filter=null,d&&s.context.setGlobalCompositeOperation(r),u;var g=t.Matrix.create();g.copyFrom(e.$getConcatenatedMatrix());var p;p=t.sys.Region.create();var v=e.$getOriginalBounds();p.updateRegion(v,g);var m=this.createRenderBuffer(p.width,p.height);m.context.pushBuffer(m),m.setTransform(1,0,0,1,-p.minX,-p.minY);var y=t.Matrix.create().setTo(1,0,0,1,-p.minX,-p.minY);return u+=this.drawDisplayObject(e,m,a,y,e.$displayList,p,l),t.Matrix.release(y),m.context.popBuffer(),u>0&&(d&&s.context.setGlobalCompositeOperation(f),u++,s.globalAlpha=1,s.setTransform(1,0,0,1,p.minX+o.tx,p.minY+o.ty),s.context.drawTargetWidthFilters(c,m),d&&s.context.setGlobalCompositeOperation(r)),n.push(m),t.sys.Region.release(p),t.Matrix.release(g),u},o.drawWithClip=function(e,s,a,o,h,l){var u=0,c=0!==e.$blendMode;if(c){var d=i[e.$blendMode];d||(d=r)}var f=e.$scrollRect?e.$scrollRect:e.$maskRect,g=e.$mask,g=e.$mask;if(g){var p=g.$getRenderNode();if(p){var v=p.renderMatrix;if(0==v.a&&0==v.b||0==v.c&&0==v.d)return u}}var m,y=t.Matrix.create();if(y.copyFrom(e.$getConcatenatedMatrix()),e.$parentDisplayList){var T,x=e.$parentDisplayList.root;x!==e.$stage&&e.$getConcatenatedMatrixAt(x,y)}if(g){var _=g.$getOriginalBounds();m=t.sys.Region.create();var $=t.Matrix.create();$.copyFrom(g.$getConcatenatedMatrix()),T&&T.$preMultiplyInto($,$),m.updateRegion(_,$),t.Matrix.release($)}var E;if(f&&(E=t.sys.Region.create(),E.updateRegion(f,y)),E&&m?(E.intersect(m),t.sys.Region.release(m)):!E&&m&&(E=m),E){if(E.isEmpty()||h&&!h.intersects(E))return t.sys.Region.release(E),t.Matrix.release(y),u}else E=t.sys.Region.create(),_=e.$getOriginalBounds(),E.updateRegion(_,y);var b=!1;if(a){for(var w=a.length,S=0;w>S;S++)if(E.intersects(a[S])){b=!0;break}}else b=!0;if(!b)return t.sys.Region.release(E),t.Matrix.release(y),u;if(g||e.$children&&0!=e.$children.length){var C=this.createRenderBuffer(E.width,E.height);C.context.pushBuffer(C),C.setTransform(1,0,0,1,-E.minX,-E.minY);var R=t.Matrix.create().setTo(1,0,0,1,-E.minX,-E.minY);if(u+=this.drawDisplayObject(e,C,a,R,e.$displayList,E,l),g){var L=this.createRenderBuffer(E.width,E.height);L.context.pushBuffer(L),L.setTransform(1,0,0,1,-E.minX,-E.minY),R=t.Matrix.create().setTo(1,0,0,1,-E.minX,-E.minY);var D=this.drawDisplayObject(g,L,a,R,g.$displayList,E,l);if(L.context.popBuffer(),D>0){u+=D,C.context.setGlobalCompositeOperation("destination-in"),C.setTransform(1,0,0,-1,0,L.height),C.globalAlpha=1;var O=L.rootRenderTarget.width,F=L.rootRenderTarget.height;C.context.drawTexture(L.rootRenderTarget.texture,0,0,O,F,0,0,O,F,O,F),C.context.setGlobalCompositeOperation("source-over")}n.push(L)}if(t.Matrix.release(R),C.context.setGlobalCompositeOperation(r),C.context.popBuffer(),u>0){if(u++,c&&s.context.setGlobalCompositeOperation(d),f){var $=y;C.setTransform($.a,$.b,$.c,$.d,$.tx-E.minX,$.ty-E.minY),C.context.pushMask(f)}s.globalAlpha=1,s.setTransform(1,0,0,-1,E.minX+o.tx,E.minY+o.ty+C.height);var P=C.rootRenderTarget.width,I=C.rootRenderTarget.height;s.context.drawTexture(C.rootRenderTarget.texture,0,0,P,I,0,0,P,I,P,I),f&&C.context.popMask(),c&&s.context.setGlobalCompositeOperation(r)}return n.push(C),t.sys.Region.release(E),t.Matrix.release(y),u}if(f){var $=y;s.setTransform($.a,$.b,$.c,$.d,$.tx-E.minX,$.ty-E.minY),s.context.pushMask(f)}var R=t.Matrix.create().setTo(1,0,0,1,0,0);if(c&&s.context.setGlobalCompositeOperation(d),f){var $=y;s.setTransform($.a,$.b,$.c,$.d,$.tx-E.minX,$.ty-E.minY),s.context.pushMask(f)}return u+=this.drawDisplayObject(e,s,a,R,e.$displayList,E,null),t.Matrix.release(R),f&&s.context.popMask(),c&&s.context.setGlobalCompositeOperation(r),f&&s.context.popMask(),t.sys.Region.release(E),t.Matrix.release(y),u},o.drawWithScrollRect=function(e,i,r,n,s,a){var o=0,h=e.$scrollRect?e.$scrollRect:e.$maskRect;if(0==h.width||0==h.height)return o;var l=t.Matrix.create();if(l.copyFrom(e.$getConcatenatedMatrix()),a)e.$getConcatenatedMatrixAt(a,l);else if(e.$parentDisplayList){var u=e.$parentDisplayList.root;u!==e.$stage&&e.$getConcatenatedMatrixAt(u,l)}var c=t.sys.Region.create();if(h.isEmpty()||c.updateRegion(h,l),c.isEmpty()||s&&!s.intersects(c))return t.sys.Region.release(c),t.Matrix.release(l),o;var d=!1;if(r){for(var f=r.length,g=0;f>g;g++)if(c.intersects(r[g])){d=!0;break}}else d=!0;return d?(i.setTransform(l.a,l.b,l.c,l.d,l.tx+n.tx,l.ty+n.ty),i.context.pushMask(h),o+=this.drawDisplayObject(e,i,r,n,e.$displayList,c,a),i.setTransform(l.a,l.b,l.c,l.d,l.tx+n.tx,l.ty+n.ty),i.context.popMask(),t.sys.Region.release(c),t.Matrix.release(l),o):(t.sys.Region.release(c),t.Matrix.release(l),o)},o.drawNodeToBuffer=function(t,e,i,r){var n=e;n.context.pushBuffer(n),n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(t,e,r),n.context.$drawWebGL(),n.onRenderFinish(),n.context.popBuffer()},o.renderNode=function(t,e,i){switch(t.type){case 1:this.renderBitmap(t,e);break;case 2:this.renderText(t,e);break;case 3:this.renderGraphics(t,e,i);break;case 4:this.renderGroup(t,e);break;case 5:e.setTransform(t.drawData[0],t.drawData[1],t.drawData[2],t.drawData[3],t.drawData[4],t.drawData[5]);break;case 6:e.globalAlpha=t.drawData[0];break;case 7:this.renderMesh(t,e)}},o.renderBitmap=function(t,e){var n=t.image,s=t.drawData,a=s.length,o=0,h=t.matrix,l=t.blendMode;for(h&&(e.saveTransform(),e.transform(h.a,h.b,h.c,h.d,h.tx,h.ty)),l&&e.context.setGlobalCompositeOperation(i[l]);a>o;)e.context.drawImage(n,s[o++],s[o++],s[o++],s[o++],s[o++],s[o++],s[o++],s[o++],t.imageWidth,t.imageHeight);l&&e.context.setGlobalCompositeOperation(r),h&&e.restoreTransform()},o.renderMesh=function(t,e){var i=t.image,r=t.drawData,n=r.length,s=0,a=t.matrix;for(a&&(e.saveTransform(),e.transform(a.a,a.b,a.c,a.d,a.tx,a.ty));n>s;)e.context.drawMesh(i,r[s++],r[s++],r[s++],r[s++],r[s++],r[s++],r[s++],r[s++],t.imageWidth,t.imageHeight,t.uvs,t.vertices,t.indices,t.bounds);a&&e.restoreTransform()},o.renderText=function(i,r){var n=i.width-i.x,s=i.height-i.y;if(0!=i.drawData.length&&(this.canvasRenderBuffer&&this.canvasRenderBuffer.context?i.dirtyRender&&this.canvasRenderBuffer.resize(n,s):(this.canvasRenderer=new t.CanvasRenderer,this.canvasRenderBuffer=new e.CanvasRenderBuffer(n,s)),this.canvasRenderBuffer.context)){if((i.x||i.y)&&(i.dirtyRender&&this.canvasRenderBuffer.context.translate(-i.x,-i.y),r.transform(1,0,0,1,i.x,i.y)),i.dirtyRender){var a=this.canvasRenderBuffer.surface;this.canvasRenderer.renderText(i,this.canvasRenderBuffer.context);var o=i.$texture;o?r.context.updateTexture(o,a):(o=r.context.createTexture(a),i.$texture=o),i.$textureWidth=a.width,i.$textureHeight=a.height}var h=i.$textureWidth,l=i.$textureHeight;r.context.drawTexture(i.$texture,0,0,h,l,0,0,h,l,h,l),(i.x||i.y)&&(i.dirtyRender&&this.canvasRenderBuffer.context.translate(i.x,i.y),r.transform(1,0,0,1,-i.x,-i.y)),i.dirtyRender=!1}},o.renderGraphics=function(i,r,n){var s=i.width,a=i.height;if(!(0>=s||0>=a)&&s&&a&&0!=i.drawData.length&&(this.canvasRenderBuffer&&this.canvasRenderBuffer.context?(i.dirtyRender||n)&&this.canvasRenderBuffer.resize(s,a):(this.canvasRenderer=new t.CanvasRenderer,this.canvasRenderBuffer=new e.CanvasRenderBuffer(s,a)),this.canvasRenderBuffer.context)){(i.x||i.y)&&((i.dirtyRender||n)&&this.canvasRenderBuffer.context.translate(-i.x,-i.y),r.transform(1,0,0,1,i.x,i.y));var o=this.canvasRenderBuffer.surface;if(n){this.canvasRenderer.renderGraphics(i,this.canvasRenderBuffer.context,!0),t.WebGLUtils.deleteWebGLTexture(o);var h=r.context.getWebGLTexture(o);r.context.drawTexture(h,0,0,s,a,0,0,s,a,o.width,o.height)}else{if(i.dirtyRender){this.canvasRenderer.renderGraphics(i,this.canvasRenderBuffer.context);var h=i.$texture;h?r.context.updateTexture(h,o):(h=r.context.createTexture(o),i.$texture=h),i.$textureWidth=o.width,i.$textureHeight=o.height}var l=i.$textureWidth,u=i.$textureHeight;r.context.drawTexture(i.$texture,0,0,l,u,0,0,l,u,l,u)}(i.x||i.y)&&((i.dirtyRender||n)&&this.canvasRenderBuffer.context.translate(i.x,i.y),r.transform(1,0,0,1,-i.x,-i.y)),n||(i.dirtyRender=!1)}},o.renderGroup=function(t,e){for(var i=t.drawData,r=i.length,n=0;r>n;n++){var s=i[n];this.renderNode(s,e)}},o.createRenderBuffer=function(t,i){var r=n.pop();return r?r.resize(t,i):(r=new e.WebGLRenderBuffer(t,i),r.$computeDrawCall=!1),r},s}();e.WebGLRenderer=s,t.registerClass(s,"egret.web.WebGLRenderer",["egret.sys.SystemRenderer"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r){t.call(this),this._name=e,this._frame=0|i,r&&(this._end=0|r)}__extends(e,t);var i=__define,r=e,n=r.prototype;return i(n,"name",function(){return this._name}),i(n,"frame",function(){return this._frame}),i(n,"end",function(){return this._end}),n.clone=function(){return new e(this._name,this._frame,this._end)},e}(t.EventDispatcher);t.FrameLabel=e,t.registerClass(e,"egret.FrameLabel")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){e.call(this),this.$bitmapData=null,this.offsetPoint=t.Point.create(0,0),this.$movieClipData=null,this.frames=null,this.$totalFrames=0,this.frameLabels=null,this.$frameLabelStart=0,this.$frameLabelEnd=0,this.frameEvents=null,this.frameIntervalTime=0,this.$eventPool=null,this.$isPlaying=!1,this.isStopped=!0,this.playTimes=0,this.$currentFrameNum=0,this.$nextFrameNum=0,this.displayedKeyFrameNum=0,this.passedTime=0,this.lastTime=0,this.$smoothing=t.Bitmap.defaultSmoothing,this.$renderNode=new t.sys.BitmapNode,this.setMovieClipData(i)}__extends(i,e);var r=__define,n=i,s=n.prototype;return r(s,"smoothing",function(){return this.$smoothing},function(t){t=!!t,t!=this.$smoothing&&(this.$smoothing=t,this.$invalidate())}),s.$init=function(){this.$reset();var t=this.$movieClipData;t&&t.$isDataValid()&&(this.frames=t.frames,this.$totalFrames=t.numFrames,this.frameLabels=t.labels,this.frameEvents=t.events,this.frameIntervalTime=1e3/t.frameRate,this._initFrame())},s.$reset=function(){this.frames=null,this.playTimes=0,this.$isPlaying=!1,this.setIsStopped(!0),this.$currentFrameNum=0,this.$nextFrameNum=1,this.displayedKeyFrameNum=0,this.passedTime=0,this.$eventPool=[]},s._initFrame=function(){this.$movieClipData.$isTextureValid()&&(this.advanceFrame(),this.constructFrame())},s.$render=function(){var e=this.$bitmapData;if(e){var i=Math.round(this.offsetPoint.x),r=Math.round(this.offsetPoint.y),n=e._bitmapWidth,s=e._bitmapHeight,a=e.$getTextureWidth(),o=e.$getTextureHeight(),h=Math.round(e.$getScaleBitmapWidth()),l=Math.round(e.$getScaleBitmapHeight()),u=e._sourceWidth,c=e._sourceHeight;t.Bitmap.$drawImage(this.$renderNode,e._bitmapData,e._bitmapX,e._bitmapY,n,s,i,r,a,o,h,l,u,c,null,t.BitmapFillMode.SCALE,this.$smoothing)}},s.$measureContentBounds=function(t){var e=this.$bitmapData;if(e){var i=this.offsetPoint.x,r=this.offsetPoint.y,n=e.$getTextureWidth(),s=e.$getTextureHeight();t.setTo(i,r,n,s)}else t.setEmpty()},s.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.$isPlaying&&this.$totalFrames>1&&this.setIsStopped(!1)},s.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.setIsStopped(!0)},s.getFrameLabelByName=function(t,e){void 0===e&&(e=!1),e&&(t=t.toLowerCase());var i=this.frameLabels;if(i)for(var r=null,n=0;n<i.length;n++)if(r=i[n],e?r.name.toLowerCase()==t:r.name==t)return r;return null},s.getFrameStartEnd=function(t){var e=this.frameLabels;if(e)for(var i=null,r=0;r<e.length;r++)if(i=e[r],t==i.name){this.$frameLabelStart=i.frame,this.$frameLabelEnd=i.end;break}},s.getFrameLabelByFrame=function(t){var e=this.frameLabels;if(e)for(var i=null,r=0;r<e.length;r++)if(i=e[r],i.frame==t)return i;return null},s.getFrameLabelForFrame=function(t){var e=null,i=null,r=this.frameLabels;if(r)for(var n=0;n<r.length;n++){if(i=r[n],i.frame>t)return e;e=i}return e},s.play=function(t){void 0===t&&(t=0),this.$isPlaying=!0,this.setPlayTimes(t),this.$totalFrames>1&&this.$stage&&this.setIsStopped(!1)},s.stop=function(){this.$isPlaying=!1,this.setIsStopped(!0)},s.prevFrame=function(){this.gotoAndStop(this.$currentFrameNum-1)},s.nextFrame=function(){this.gotoAndStop(this.$currentFrameNum+1)},s.gotoAndPlay=function(e,i){void 0===i&&(i=0),(0==arguments.length||arguments.length>2)&&t.$error(1022,"MovieClip.gotoAndPlay()"),"string"==typeof e?this.getFrameStartEnd(e):(this.$frameLabelStart=0,this.$frameLabelEnd=0),this.play(i),this.gotoFrame(e)},s.gotoAndStop=function(e){1!=arguments.length&&t.$error(1022,"MovieClip.gotoAndStop()"),this.stop(),this.gotoFrame(e)},s.gotoFrame=function(e){var i;"string"==typeof e?i=this.getFrameLabelByName(e).frame:(i=parseInt(e+"",10),i!=e&&t.$error(1022,"Frame Label Not Found")),1>i?i=1:i>this.$totalFrames&&(i=this.$totalFrames),i!=this.$nextFrameNum&&(this.$nextFrameNum=i,this.advanceFrame(),this.constructFrame(),this.handlePendingEvent())},s.advanceTime=function(e){var i=this,r=e-i.lastTime;i.lastTime=e;var n=i.frameIntervalTime,s=i.passedTime+r;i.passedTime=s%n;var a=s/n;if(1>a)return!1;for(var o;a>=1;){if(a--,i.$nextFrameNum++,o=this.frameEvents[i.$nextFrameNum],o&&""!=o&&t.MovieClipEvent.dispatchMovieClipEvent(i,t.MovieClipEvent.FRAME_LABEL,o),i.$nextFrameNum>i.$totalFrames||i.$frameLabelStart>0&&i.$nextFrameNum>i.$frameLabelEnd)if(-1==i.playTimes)i.$eventPool.push(t.Event.LOOP_COMPLETE),i.$nextFrameNum=1;else{if(i.playTimes--,!(i.playTimes>0)){i.$nextFrameNum=i.$totalFrames,i.$eventPool.push(t.Event.COMPLETE),i.stop();break}i.$eventPool.push(t.Event.LOOP_COMPLETE),i.$nextFrameNum=1}i.$currentFrameNum==i.$frameLabelEnd&&(i.$nextFrameNum=i.$frameLabelStart),i.advanceFrame()}return i.constructFrame(),i.handlePendingEvent(),!1},s.advanceFrame=function(){this.$currentFrameNum=this.$nextFrameNum},s.constructFrame=function(){var t=this.$currentFrameNum;this.displayedKeyFrameNum!=t&&(this.$bitmapData=this.$movieClipData.getTextureByFrame(t),this.$movieClipData.$getOffsetByFrame(t,this.offsetPoint),this.$invalidateContentBounds(),this.displayedKeyFrameNum=t)},s.handlePendingEvent=function(){if(0!=this.$eventPool.length){this.$eventPool.reverse();for(var e=this.$eventPool,i=e.length,r=!1,n=!1,s=0;i>s;s++){var a=e.pop();a==t.Event.LOOP_COMPLETE?n=!0:a==t.Event.COMPLETE?r=!0:this.dispatchEventWith(a)}n&&this.dispatchEventWith(t.Event.LOOP_COMPLETE),r&&this.dispatchEventWith(t.Event.COMPLETE)}},r(s,"totalFrames",function(){return this.$totalFrames}),r(s,"currentFrame",function(){return this.$currentFrameNum}),r(s,"currentFrameLabel",function(){var t=this.getFrameLabelByFrame(this.$currentFrameNum);return t&&t.name}),r(s,"currentLabel",function(){var t=this.getFrameLabelForFrame(this.$currentFrameNum);return t?t.name:null}),r(s,"frameRate",function(){return this.$movieClipData.frameRate},function(t){t!=this.$movieClipData.frameRate&&(this.$movieClipData.frameRate=t,this.frameIntervalTime=1e3/this.$movieClipData.frameRate)}),r(s,"isPlaying",function(){return this.$isPlaying}),r(s,"movieClipData",function(){return this.$movieClipData},function(t){this.setMovieClipData(t)}),s.setMovieClipData=function(t){this.$movieClipData!=t&&(this.$movieClipData=t,this.$init())},s.setPlayTimes=function(t){(0>t||t>=1)&&(this.playTimes=0>t?-1:Math.floor(t))},s.setIsStopped=function(e){this.isStopped!=e&&(this.isStopped=e,e?(this.playTimes=0,t.sys.$ticker.$stopTick(this.advanceTime,this)):(this.playTimes=0==this.playTimes?1:this.playTimes,this.lastTime=t.getTimer(),t.sys.$ticker.$startTick(this.advanceTime,this)))},i}(t.DisplayObject);t.MovieClip=e,t.registerClass(e,"egret.MovieClip")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$mcData=null,this.numFrames=1,this.frames=[],this.labels=null,this.events=[],this.frameRate=0,this.textureData=null,this.spriteSheet=null}__extends(i,e);var r=__define,n=i,s=n.prototype;return s.$init=function(t,e,i){this.textureData=e,this.spriteSheet=i,this.setMCData(t)},s.getKeyFrameData=function(t){var e=this.frames[t-1];return e.frame&&(e=this.frames[e.frame-1]),e},s.getTextureByFrame=function(t){var e=this.getKeyFrameData(t);if(e.res){var i=this.getTextureByResName(e.res);return i}return null},s.$getOffsetByFrame=function(t,e){var i=this.getKeyFrameData(t);i.res&&e.setTo(0|i.x,0|i.y)},s.getTextureByResName=function(t){var e=this.spriteSheet.getTexture(t);if(!e){var i=this.textureData[t];e=this.spriteSheet.createTexture(t,i.x,i.y,i.w,i.h)}return e},s.$isDataValid=function(){return this.frames.length>0},s.$isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet},s.$fillMCData=function(t){this.frameRate=t.frameRate||24,this.fillFramesData(t.frames),this.fillFrameLabelsData(t.labels),this.fillFrameEventsData(t.events)},s.fillFramesData=function(t){for(var e,i=this.frames,r=t?t.length:0,n=0;r>n;n++){var s=t[n];if(i.push(s),s.duration){var a=parseInt(s.duration);if(a>1){e=i.length;for(var o=1;a>o;o++)i.push({frame:e})}}}this.numFrames=i.length},s.fillFrameLabelsData=function(e){if(e){var i=e.length;if(i>0){this.labels=[];for(var r=0;i>r;r++){var n=e[r];this.labels.push(new t.FrameLabel(n.name,n.frame,n.end))}}}},s.fillFrameEventsData=function(t){if(t){var e=t.length;if(e>0){this.events=[];for(var i=0;e>i;i++){var r=t[i];this.events[r.frame]=r.name}}}},r(s,"mcData",function(){return this.$mcData},function(t){this.setMCData(t)}),s.setMCData=function(t){this.$mcData!=t&&(this.$mcData=t,t&&this.$fillMCData(t))},i}(t.HashObject);t.MovieClipData=e,t.registerClass(e,"egret.MovieClipData")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i){e.call(this),this.enableCache=!0,this.$mcDataCache={},this.$mcDataSet=t,this.setTexture(i)}__extends(i,e);var r=__define,n=i,s=n.prototype;return s.clearCache=function(){this.$mcDataCache={}},s.generateMovieClipData=function(e){if(void 0===e&&(e=""),""==e&&this.$mcDataSet)for(e in this.$mcDataSet.mc)break;if(""==e)return null;var i=this.findFromCache(e,this.$mcDataCache);return i||(i=new t.MovieClipData,this.fillData(e,i,this.$mcDataCache)),i},s.findFromCache=function(t,e){return this.enableCache&&e[t]?e[t]:null},s.fillData=function(t,e,i){if(this.$mcDataSet){var r=this.$mcDataSet.mc[t];r&&(e.$init(r,this.$mcDataSet.res,this.$spriteSheet),this.enableCache&&(i[t]=e))}},r(s,"mcDataSet",function(){return this.$mcDataSet},function(t){this.$mcDataSet=t}),r(s,"texture",void 0,function(t){this.setTexture(t)}),r(s,"spriteSheet",function(){return this.$spriteSheet}),s.setTexture=function(e){this.$spriteSheet=e?new t.SpriteSheet(e):null},i}(t.EventDispatcher);t.MovieClipDataFactory=e,t.registerClass(e,"egret.MovieClipDataFactory")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r,n){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===n&&(n=null),e.call(this,t,i,r),this.frameLabel=null,this.frameLabel=n}__extends(i,e);var r=i;return r.prototype,i.dispatchMovieClipEvent=function(e,r,n){void 0===n&&(n=null);var s=t.Event.create(i,r);s.frameLabel=n;var a=e.dispatchEvent(s);return t.Event.release(s),a},i.FRAME_LABEL="frame_label",i}(t.Event);t.MovieClipEvent=e,t.registerClass(e,"egret.MovieClipEvent")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){t.$error(1014)}var i=e;return i.prototype,e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.quintOut=e.getPowOut(5),e.quartOut=e.getPowOut(4),e}();t.ScrollEase=e,t.registerClass(e,"egret.ScrollEase");var i=function(e){function i(t,i,r){e.call(this),this._target=null,this._useTicks=!1,this.ignoreGlobalPause=!1,this.loop=!1,this.pluginData=null,this._steps=null,this._actions=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._prevPosition=0,this._stepPosition=0,this.passive=!1,this.initialize(t,i,r)}__extends(i,e);var r=i,n=r.prototype;return i.get=function(t,e,r,n){return void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=!1),n&&i.removeTweens(t),new i(t,e,r)},i.removeTweens=function(t){if(t.tween_count){for(var e=i._tweens,r=e.length-1;r>=0;r--)e[r]._target==t&&(e[r].paused=!0,e.splice(r,1));t.tween_count=0}},i.tick=function(t,e){void 0===e&&(e=!1);var r=t-i._lastTime;i._lastTime=t;for(var n=i._tweens.concat(),s=n.length-1;s>=0;s--){var a=n[s];e&&!a.ignoreGlobalPause||a.paused||a.tick(a._useTicks?1:r)}return!1},i._register=function(e,r){var n=e._target,s=i._tweens;if(r)n&&(n.tween_count=n.tween_count>0?n.tween_count+1:1),s.push(e),i._inited||(i._lastTime=t.getTimer(),t.sys.$ticker.$startTick(i.tick,null),i._inited=!0);else{n&&n.tween_count--;for(var a=s.length;a--;)if(s[a]==e)return void s.splice(a,1)}},n.initialize=function(t,e,r){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&i.removeTweens(t)),this.pluginData=r||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:i._register(this,!0),e&&null!=e.position&&this.setPosition(e.position)},n.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var i=t,r=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,r=!0)),i==this._prevPos)return r;var n=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(r)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var s=0,a=this._steps.length;a>s&&!(this._steps[s].t>i);s++);var o=this._steps[s-1];this._updateTargetProps(o,(this._stepPosition=i-o.t)/o.d)}return r&&this.setPaused(!0),0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&n>i?(n!=this.duration&&this._runActions(n,this.duration),this._runActions(0,i,!0)):this._runActions(n,i)),this.dispatchEventWith("change"),r},n._runActions=function(t,e,i){void 0===i&&(i=!1);var r=t,n=e,s=-1,a=this._actions.length,o=1;for(t>e&&(r=e,n=t,s=a,a=o=-1);(s+=o)!=a;){var h=this._actions[s],l=h.t;(l==n||l>r&&n>l||i&&l==t)&&h.f.apply(h.o,h.p)}},n._updateTargetProps=function(t,e){var r,n,s,a,o,h;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),r=t.p0,n=t.p1}else this.passive=!1,r=n=this._curQueueProps;for(var l in this._initQueueProps){null==(a=r[l])&&(r[l]=a=this._initQueueProps[l]),null==(o=n[l])&&(n[l]=o=a),s=a==o||0==e||1==e||"number"!=typeof a?1==e?o:a:a+(o-a)*e;var u=!1;if(h=i._plugins[l])for(var c=0,d=h.length;d>c;c++){var f=h[c].tween(this,l,s,r,n,e,!!t&&r==n,!t);f==i.IGNORE?u=!0:s=f}u||(this._target[l]=s)}},n.setPaused=function(t){return this.paused=t,i._register(this,!t),this},n._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},n._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},n._appendQueueProps=function(t){var e,r,n,s,a;for(var o in t)if(void 0===this._initQueueProps[o]){if(r=this._target[o],e=i._plugins[o])for(n=0,s=e.length;s>n;n++)r=e[n].init(this,o,r);this._initQueueProps[o]=this._curQueueProps[o]=void 0===r?null:r}else r=this._curQueueProps[o];for(var o in t){if(r=this._curQueueProps[o],e=i._plugins[o])for(a=a||{},n=0,s=e.length;s>n;n++)e[n].step&&e[n].step(this,o,r,t[o],a);this._curQueueProps[o]=t[o]}return a&&this._appendQueueProps(a),this._curQueueProps},n._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},n.to=function(t,e,i){return void 0===i&&(i=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},n.call=function(t,e,i){return void 0===e&&(e=void 0),void 0===i&&(i=void 0),this._addAction({f:t,p:i?i:[],o:e?e:this._target})},n.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},i._tweens=[],i.IGNORE={},i._plugins={},i._inited=!1,i._lastTime=0,i}(t.EventDispatcher);t.ScrollTween=i,t.registerClass(i,"egret.ScrollTween")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.scrollBeginThreshold=10,this.scrollSpeed=1,this._content=null,this.delayTouchBeginEvent=null,this.touchBeginTimer=null,this.touchEnabled=!0,this._ScrV_Props_=new t.ScrollViewProperties,i&&this.setContent(i)}__extends(i,e);var r=__define,n=i,s=n.prototype;return r(s,"bounces",function(){return this._ScrV_Props_._bounces},function(t){this._ScrV_Props_._bounces=!!t}),s.setContent=function(t){this._content!==t&&(this.removeContent(),t&&(this._content=t,e.prototype.addChild.call(this,t),this._addEvents()))},s.removeContent=function(){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0)),this._content=null},r(s,"verticalScrollPolicy",function(){return this._ScrV_Props_._verticalScrollPolicy},function(t){t!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=t)}),r(s,"horizontalScrollPolicy",function(){return this._ScrV_Props_._horizontalScrollPolicy},function(t){t!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=t)}),r(s,"scrollLeft",function(){return this._ScrV_Props_._scrollLeft},function(t){t!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=t,this._validatePosition(!1,!0),this._updateContentPosition())}),r(s,"scrollTop",function(){return this._ScrV_Props_._scrollTop},function(t){t!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=t,this._validatePosition(!0,!1),this._updateContentPosition())}),s.setScrollPosition=function(t,e,i){if(void 0===i&&(i=!1),(!i||0!=t||0!=e)&&(i||this._ScrV_Props_._scrollTop!=t||this._ScrV_Props_._scrollLeft!=e)){var r=this._ScrV_Props_._scrollTop,n=this._ScrV_Props_._scrollLeft;if(i){var s=this.getMaxScrollLeft(),a=this.getMaxScrollTop();(0>=r||r>=a)&&(t/=2),(0>=n||n>=s)&&(e/=2);var o=r+t,h=n+e,l=this._ScrV_Props_._bounces;l||((0>=o||o>=a)&&(o=Math.max(0,Math.min(o,a))),(0>=h||h>=s)&&(h=Math.max(0,Math.min(h,s)))),this._ScrV_Props_._scrollTop=o,this._ScrV_Props_._scrollLeft=h}else this._ScrV_Props_._scrollTop=t,this._ScrV_Props_._scrollLeft=e;this._validatePosition(!0,!0),this._updateContentPosition()}},s._validatePosition=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t){var i=this.height,r=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-i)/2),this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,r>i?r-i/2:i/2)}if(e){var n=this.width,s=this._getContentWidth();this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-n)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,s>n?s-n/2:n/2)}},s.$setWidth=function(t){if(this.$getExplicitWidth()==t)return!1;var i=e.prototype.$setWidth.call(this,t);return this._updateContentPosition(),i},s.$setHeight=function(t){return this.$getExplicitHeight()!=t&&(e.prototype.$setHeight.call(this,t),this._updateContentPosition(),!0)},s._updateContentPosition=function(){var e=this.height,i=this.width;this.scrollRect=new t.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),i,e),this.dispatchEvent(new t.Event(t.Event.CHANGE))},s._checkScrollPolicy=function(){var t=this._ScrV_Props_._horizontalScrollPolicy,e=this.__checkScrollPolicy(t,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=e;var i=this._ScrV_Props_._verticalScrollPolicy,r=this.__checkScrollPolicy(i,this._getContentHeight(),this.height);return this._ScrV_Props_._vCanScroll=r,e||r},s.__checkScrollPolicy=function(t,e,i){return"on"==t||"off"!=t&&e>i},s._addEvents=function(){this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},s._removeEvents=function(){this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),
this.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},s._onTouchBegin=function(e){if(!e.$isDefaultPrevented){var i=this._checkScrollPolicy();i&&(this._ScrV_Props_._touchStartPosition.x=e.stageX,this._ScrV_Props_._touchStartPosition.y=e.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this._tempStage=this.stage,this._tempStage.addEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.addEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(e),e.preventDefault())}},s._onTouchBeginCapture=function(e){var i=this._checkScrollPolicy();if(i){for(var r=e.target;r!=this;){if("_checkScrollPolicy"in r&&(i=r._checkScrollPolicy()))return;r=r.parent}e.stopPropagation();var n=this.cloneTouchEvent(e);this.delayTouchBeginEvent=n,this.touchBeginTimer||(this.touchBeginTimer=new t.Timer(100,1),this.touchBeginTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)),this.touchBeginTimer.start(),this._onTouchBegin(e)}},s._onTouchEndCapture=function(e){var i=this;if(this.delayTouchBeginEvent){this._onTouchBeginTimer(),e.stopPropagation();var r=this.cloneTouchEvent(e);t.callLater(function(){i.stage&&i.dispatchPropagationEvent(r)},this)}},s._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var t=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null,this.stage&&this.dispatchPropagationEvent(t)},s.dispatchPropagationEvent=function(e){for(var i=e.$target,r=this.$getPropagationList(i),n=r.length,s=.5*r.length,a=-1,o=0;n>o;o++)if(r[o]===this._content){a=o;break}r.splice(0,a+1),s-=a+1,this.$dispatchPropagationEvent(e,r,s),t.Event.release(e)},s._onTouchMove=function(t){if(this._ScrV_Props_._lastTouchPosition.x!=t.stageX||this._ScrV_Props_._lastTouchPosition.y!=t.stageY){if(!this._ScrV_Props_._scrollStarted){var e=t.stageX-this._ScrV_Props_._touchStartPosition.x,i=t.stageY-this._ScrV_Props_._touchStartPosition.y,r=Math.sqrt(e*e+i*i);if(r<this.scrollBeginThreshold)return void this._logTouchEvent(t)}this._ScrV_Props_._scrollStarted=!0,this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop()),this.touchChildren=!1;var n=this._getPointChange(t);this.setScrollPosition(n.y,n.x,!0),this._calcVelocitys(t),this._logTouchEvent(t)}},s._onTouchEnd=function(e){this.touchChildren=!0,this._ScrV_Props_._scrollStarted=!1,this._tempStage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.removeEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.removeEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._moveAfterTouchEnd()},s._onEnterFrame=function(e){var i=t.getTimer();i-this._ScrV_Props_._lastTouchTime>100&&i-this._ScrV_Props_._lastTouchTime<300&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)},s._logTouchEvent=function(e){this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY,this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(e),this._ScrV_Props_._lastTouchTime=t.getTimer()},s._getPointChange=function(t){return{x:this._ScrV_Props_._hCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.x-t.stageX,y:this._ScrV_Props_._vCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.y-t.stageY}},s._calcVelocitys=function(e){var i=t.getTimer();if(0==this._ScrV_Props_._lastTouchTime)return void(this._ScrV_Props_._lastTouchTime=i);var r=this._getPointChange(e),n=i-this._ScrV_Props_._lastTouchTime;r.x/=n,r.y/=n,this._ScrV_Props_._velocitys.push(r),this._ScrV_Props_._velocitys.length>5&&this._ScrV_Props_._velocitys.shift(),this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY},s._getContentWidth=function(){return this._content.$getExplicitWidth()||this._content.width},s._getContentHeight=function(){return this._content.$getExplicitHeight()||this._content.height},s.getMaxScrollLeft=function(){var t=this._getContentWidth()-this.width;return Math.max(0,t)},s.getMaxScrollTop=function(){var t=this._getContentHeight()-this.height;return Math.max(0,t)},s._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var t={x:0,y:0},e=0,r=0;r<this._ScrV_Props_._velocitys.length;r++){var n=this._ScrV_Props_._velocitys[r],s=i.weight[r];t.x+=n.x*s,t.y+=n.y*s,e+=s}this._ScrV_Props_._velocitys.length=0,this.scrollSpeed<=0&&(this.scrollSpeed=1);var a=t.x/e*this.scrollSpeed,o=t.y/e*this.scrollSpeed,h=Math.abs(a),l=Math.abs(o),u=this.getMaxScrollLeft(),c=this.getMaxScrollTop(),d=h>.02?this.getAnimationDatas(a,this._ScrV_Props_._scrollLeft,u):{position:this._ScrV_Props_._scrollLeft,duration:1},f=l>.02?this.getAnimationDatas(o,this._ScrV_Props_._scrollTop,c):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(d.position,d.duration),this.setScrollTop(f.position,f.duration)}},s.onTweenFinished=function(t){t==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1),t==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1),0==this._ScrV_Props_._isHTweenPlaying&&0==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()},s._onScrollStarted=function(){},s._onScrollFinished=function(){t.ScrollTween.removeTweens(this),this._ScrV_Props_._hScrollTween=null,this._ScrV_Props_._vScrollTween=null,this._ScrV_Props_._isHTweenPlaying=!1,this._ScrV_Props_._isVTweenPlaying=!1,this.dispatchEvent(new t.Event(t.Event.COMPLETE))},s.setScrollTop=function(e,i){void 0===i&&(i=0);var r=Math.min(this.getMaxScrollTop(),Math.max(e,0));if(0==i)return void(this.scrollTop=r);0==this._ScrV_Props_._bounces&&(e=r);var n=t.ScrollTween.get(this).to({scrollTop:e},i,t.ScrollEase.quartOut);r!=e&&n.to({scrollTop:r},300,t.ScrollEase.quintOut),this._ScrV_Props_._isVTweenPlaying=!0,this._ScrV_Props_._vScrollTween=n,n.call(this.onTweenFinished,this,[n]),this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted()},s.setScrollLeft=function(e,i){void 0===i&&(i=0);var r=Math.min(this.getMaxScrollLeft(),Math.max(e,0));if(0==i)return void(this.scrollLeft=r);0==this._ScrV_Props_._bounces&&(e=r);var n=t.ScrollTween.get(this).to({scrollLeft:e},i,t.ScrollEase.quartOut);r!=e&&n.to({scrollLeft:r},300,t.ScrollEase.quintOut),this._ScrV_Props_._isHTweenPlaying=!0,this._ScrV_Props_._hScrollTween=n,n.call(this.onTweenFinished,this,[n]),this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted()},s.getAnimationDatas=function(t,e,i){var r=Math.abs(t),n=.95,s=0,a=.998,o=.02,h=e+500*t;if(0>h||h>i)for(h=e;Math.abs(t)!=1/0&&Math.abs(t)>o;)h+=t,t*=0>h||h>i?a*n:a,s++;else s=500*-Math.log(o/r);var l={position:Math.min(i+50,Math.max(h,-50)),duration:s};return l},s.cloneTouchEvent=function(e){var i=new t.TouchEvent(e.type,e.bubbles,e.cancelable);return i.touchPointID=e.touchPointID,i.$stageX=e.stageX,i.$stageY=e.stageY,i.touchDown=e.touchDown,i.$isDefaultPrevented=!1,i.$target=e.target,i},s.throwNotSupportedError=function(){t.$error(1023)},s.addChild=function(t){return this.throwNotSupportedError(),null},s.addChildAt=function(t,e){return this.throwNotSupportedError(),null},s.removeChild=function(t){return this.throwNotSupportedError(),null},s.removeChildAt=function(t){return this.throwNotSupportedError(),null},s.setChildIndex=function(t,e){this.throwNotSupportedError()},s.swapChildren=function(t,e){this.throwNotSupportedError()},s.swapChildrenAt=function(t,e){this.throwNotSupportedError()},i.weight=[1,1.33,1.66,2,2.33],i}(t.DisplayObjectContainer);t.ScrollView=e,t.registerClass(e,"egret.ScrollView")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this._verticalScrollPolicy="auto",this._horizontalScrollPolicy="auto",this._scrollLeft=0,this._scrollTop=0,this._hCanScroll=!1,this._vCanScroll=!1,this._lastTouchPosition=new t.Point(0,0),this._touchStartPosition=new t.Point(0,0),this._scrollStarted=!1,this._lastTouchTime=0,this._lastTouchEvent=null,this._velocitys=[],this._isHTweenPlaying=!1,this._isVTweenPlaying=!1,this._hScrollTween=null,this._vScrollTween=null,this._bounces=!0}var i=e;return i.prototype,e}();t.ScrollViewProperties=e,t.registerClass(e,"egret.ScrollViewProperties")}(egret||(egret={}));var egret;!function(t){function e(e){var i=e.url;return-1==i.indexOf("?")&&e.method==t.URLRequestMethod.GET&&e.data&&e.data instanceof t.URLVariables&&(i=i+"?"+e.data.toString()),i}t.$getUrl=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.dataFormat=t.URLLoaderDataFormat.TEXT,this.data=null,this._request=null,this._status=-1,i&&this.load(i)}__extends(i,e);var r=i,n=r.prototype;return n.load=function(e){this._request=e,this.data=null,t.NetContext.getNetContext().proceed(this)},n.__recycle=function(){this._request=null,this.data=null},i}(t.EventDispatcher);t.URLLoader=e,t.registerClass(e,"egret.URLLoader")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.BINARY="binary",t.TEXT="text",t.VARIABLES="variables",t.TEXTURE="texture",t.SOUND="sound",t}();t.URLLoaderDataFormat=e,t.registerClass(e,"egret.URLLoaderDataFormat")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.data=null,this.method=t.URLRequestMethod.GET,this.url="",this.requestHeaders=[],this.url=i}__extends(i,e);var r=i;return r.prototype,i}(t.HashObject);t.URLRequest=e,t.registerClass(e,"egret.URLRequest")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(t,e){this.name="",this.value="",this.name=t,this.value=e}var e=t;return e.prototype,t}();t.URLRequestHeader=e,t.registerClass(e,"egret.URLRequestHeader")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return e.prototype,t.GET="get",t.POST="post",t}();t.URLRequestMethod=e,t.registerClass(e,"egret.URLRequestMethod")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.variables=null,null!==e&&this.decode(e)}__extends(e,t);var i=e,r=i.prototype;return r.decode=function(t){this.variables||(this.variables={}),t=t.split("+").join(" ");for(var e,i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);){var r=decodeURIComponent(e[1]),n=decodeURIComponent(e[2]);if(r in this.variables!=0){var s=this.variables[r];s instanceof Array?s.push(n):this.variables[r]=[s,n]}else this.variables[r]=n}},r.toString=function(){if(!this.variables)return"";var t=this.variables,e=[];for(var i in t)e.push(this.encodeValue(i,t[i]));return e.join("&")},r.encodeValue=function(t,e){return e instanceof Array?this.encodeArray(t,e):encodeURIComponent(t)+"="+encodeURIComponent(e)},r.encodeArray=function(t,e){return t?0==e.length?encodeURIComponent(t)+"=":e.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):""},e}(t.HashObject);t.URLVariables=e,t.registerClass(e,"egret.URLVariables")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this._timeScale=1,this._paused=!1,this._callIndex=-1,this._lastTime=0,this.callBackList=[],null!=i.instance,t.sys.$ticker.$startTick(this.update,this),this._lastTime=t.getTimer()}__extends(i,e);var r=i,n=r.prototype;return n.update=function(t){var e=t-this._lastTime;if(this._lastTime=t,this._paused)return!1;var i=e*this._timeScale;for(this._callList=this.callBackList.concat(),this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var r=this._callList[this._callIndex];r.listener.call(r.thisObject,i)}return this._callIndex=-1,this._callList=null,!1},n.register=function(t,e,i){void 0===i&&(i=0),this.$insertEventBin(this.callBackList,"",t,e,!1,i,!1)},n.unregister=function(t,e){this.$removeEventBin(this.callBackList,t,e)},n.setTimeScale=function(t){this._timeScale=t},n.getTimeScale=function(){return this._timeScale},n.pause=function(){this._paused=!0},n.resume=function(){this._paused=!1},i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i}(t.EventDispatcher);t.Ticker=e,t.registerClass(e,"egret.Ticker")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this)}__extends(i,e);var r=__define,n=i,s=n.prototype;return r(s,"stage",function(){return t.sys.$TempStage}),r(i,"runtimeType",function(){return t.$warn(1041),i._runtimeType}),s.run=function(){},r(i,"instance",function(){return null==i._instance&&(i._instance=new i),i._instance}),i.deviceType=null,i.DEVICE_PC="web",i.DEVICE_MOBILE="native",i.RUNTIME_HTML5="runtimeHtml5",i.RUNTIME_NATIVE="runtimeNative",i}(t.EventDispatcher);t.MainContext=e,t.registerClass(e,"egret.MainContext")}(egret||(egret={}));var testDeviceType1=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},testRuntimeType1=function(){return!!this.navigator};egret.MainContext.deviceType=testDeviceType1()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC,egret.MainContext._runtimeType=testRuntimeType1()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE,delete testDeviceType1,delete testRuntimeType1;var egret;!function(t){var e=function(e){function i(t){void 0===t&&(t=300),e.call(this),this.objectPool=[],this._length=0,1>t&&(t=1),this.autoDisposeTime=t,this.frameCount=0}__extends(i,e);var r=__define,n=i,s=n.prototype;return i.$init=function(){t.sys.$ticker.$startTick(i.onUpdate,i)},i.onUpdate=function(t){for(var e=i._callBackList,r=e.length-1;r>=0;r--)e[r].$checkFrame();return!1},s.$checkFrame=function(){this.frameCount--,this.frameCount<=0&&this.dispose()},r(s,"length",function(){return this._length}),s.push=function(t){var e=this.objectPool;-1==e.indexOf(t)&&(e.push(t),t.__recycle&&t.__recycle(),this._length++,0==this.frameCount&&(this.frameCount=this.autoDisposeTime,i._callBackList.push(this)))},s.pop=function(){return 0==this._length?null:(this._length--,this.objectPool.pop())},s.dispose=function(){this._length>0&&(this.objectPool=[],this._length=0),this.frameCount=0;var t=i._callBackList,e=t.indexOf(this);-1!=e&&t.splice(e,1)},i._callBackList=[],i}(t.HashObject);t.Recycler=e,t.registerClass(e,"egret.Recycler"),e.$init()}(egret||(egret={}));var egret;!function(t){function e(e,i,h){for(var l=[],u=3;u<arguments.length;u++)l[u-3]=arguments[u];var c={listener:e,thisObject:i,delay:h,originDelay:h,params:l};return a++,1==a&&(o=t.getTimer(),t.sys.$ticker.$startTick(r,null)),s++,n[s]=c,s}function i(e){n[e]&&(a--,delete n[e],0==a&&t.sys.$ticker.$stopTick(r,null))}function r(t){var e=t-o;o=t;for(var i in n){var r=n[i];r.delay-=e,r.delay<=0&&(r.delay=r.originDelay,r.listener.apply(r.thisObject,r.params))}return!1}var n={},s=0,a=0,o=0;t.setInterval=e,t.clearInterval=i}(egret||(egret={}));var egret;!function(t){function e(e,i,h){for(var l=[],u=3;u<arguments.length;u++)l[u-3]=arguments[u];var c={listener:e,thisObject:i,delay:h,params:l};return a++,1==a&&t.sys.$ticker&&(o=t.getTimer(),t.sys.$ticker.$startTick(r,null)),s++,n[s]=c,s}function i(e){n[e]&&(a--,delete n[e],0==a&&t.sys.$ticker&&t.sys.$ticker.$stopTick(r,null))}function r(t){var e=t-o;o=t;for(var r in n){var s=r,a=n[s];a.delay-=e,a.delay<=0&&(a.listener.apply(a.thisObject,a.params),i(s))}return!1}var n={},s=0,a=0,o=0;t.setTimeout=e,t.clearTimeout=i}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){e.call(this)}__extends(i,e);var r=i,n=r.prototype;return n.proceed=function(e){function i(t){e.dispatchEvent(t)}function r(t){s(),e.dispatchEvent(t)}function n(){switch(s(),e.dataFormat){case t.URLLoaderDataFormat.VARIABLES:e.data=new t.URLVariables(l.response);break;default:e.data=l.response}window.setTimeout(function(){t.Event.dispatchEvent(e,t.Event.COMPLETE)},0)}function s(){l.removeEventListener(t.Event.COMPLETE,n,a),l.removeEventListener(t.IOErrorEvent.IO_ERROR,r,a),l.removeEventListener(t.ProgressEvent.PROGRESS,i,a)}var a=this;if(e.dataFormat==t.URLLoaderDataFormat.TEXTURE)return void this.loadTexture(e);if(e.dataFormat==t.URLLoaderDataFormat.SOUND)return void this.loadSound(e);var o=e._request,h=a.getVirtualUrl(t.$getUrl(o)),l=new t.HttpRequest;if(l.addEventListener(t.Event.COMPLETE,n,this),l.addEventListener(t.IOErrorEvent.IO_ERROR,r,this),l.addEventListener(t.ProgressEvent.PROGRESS,i,this),l.open(h,o.method),l.responseType=this.getResponseType(e.dataFormat),o.method!=t.URLRequestMethod.GET&&o.data)if(o.data instanceof t.URLVariables){l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var u=o.data;l.send(u.toString())}else l.setRequestHeader("Content-Type","multipart/form-data"),l.send(o.data);else l.send()},n.getResponseType=function(e){switch(e){case t.URLLoaderDataFormat.TEXT:case t.URLLoaderDataFormat.VARIABLES:return t.URLLoaderDataFormat.TEXT;case t.URLLoaderDataFormat.BINARY:return"arraybuffer";default:return e}},n.loadSound=function(e){function i(t){e.dispatchEvent(t)}function r(t){s(),e.dispatchEvent(t)}function n(i){s(),e.data=h,window.setTimeout(function(){e.dispatchEventWith(t.Event.COMPLETE)},0)}function s(){h.removeEventListener(t.Event.COMPLETE,n,a),h.removeEventListener(t.IOErrorEvent.IO_ERROR,r,a),h.removeEventListener(t.ProgressEvent.PROGRESS,i,a)}var a=this,o=this.getVirtualUrl(e._request.url),h=new t.Sound;h.addEventListener(t.Event.COMPLETE,n,a),h.addEventListener(t.IOErrorEvent.IO_ERROR,r,a),h.addEventListener(t.ProgressEvent.PROGRESS,i,a),h.load(o)},n.loadTexture=function(e){function i(t){e.dispatchEvent(t)}function r(t){s(),e.dispatchEvent(t)}function n(i){s();var r=h.data;r.setAttribute("bitmapSrc",o);var n=new t.Texture;n._setBitmapData(r),e.data=n,window.setTimeout(function(){e.dispatchEventWith(t.Event.COMPLETE)},a)}function s(){h.removeEventListener(t.Event.COMPLETE,n,a),h.removeEventListener(t.IOErrorEvent.IO_ERROR,r,a),h.removeEventListener(t.ProgressEvent.PROGRESS,i,a)}var a=this,o=this.getVirtualUrl(e._request.url),h=new t.ImageLoader;h.addEventListener(t.Event.COMPLETE,n,a),h.addEventListener(t.IOErrorEvent.IO_ERROR,r,a),h.addEventListener(t.ProgressEvent.PROGRESS,i,a),h.load(o)},n.getChangeList=function(){return[]},n.getVirtualUrl=function(t){return t},i.getNetContext=function(){return null==i._instance&&(i._instance=new i),i._instance},i}(t.HashObject);e.HTML5NetContext=i,t.registerClass(i,"egret.web.HTML5NetContext",["egret.NetContext"]),t.NetContext=i}(e=t.web||(t.web={}))}(egret||(egret={}));var RES;!function(t){var e=function(){function t(t,e,i){this.groupName="",this.data=null,this._loaded=!1,this.name=t,this.url=e,this.type=i}var e=__define,i=t,r=i.prototype;return e(r,"loaded",function(){return this.data?this.data.loaded:this._loaded},function(t){this.data&&(this.data.loaded=t),this._loaded=t}),r.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'},t.TYPE_XML="xml",t.TYPE_IMAGE="image",t.TYPE_BIN="bin",t.TYPE_TEXT="text",t.TYPE_JSON="json",t.TYPE_SHEET="sheet",t.TYPE_FONT="font",t.TYPE_SOUND="sound",t}();t.ResourceItem=e,egret.registerClass(e,"RES.ResourceItem")}(RES||(RES={}));var RES;!function(t){var e=function(){function e(){this.keyMap={},this.groupDic={},t.configInstance=this}var i=e,r=i.prototype;return r.getGroupByName=function(t){var e=new Array;if(!this.groupDic[t])return e;for(var i=this.groupDic[t],r=i.length,n=0;r>n;n++){var s=i[n];e.push(this.parseResourceItem(s))}return e},r.getRawGroupByName=function(t){return this.groupDic[t]?this.groupDic[t]:[]},r.createGroup=function(t,e,i){if(void 0===i&&(i=!1),!i&&this.groupDic[t]||!e||0==e.length)return!1;for(var r=this.groupDic,n=[],s=e.length,a=0;s>a;a++){var o=e[a],h=r[o];if(h)for(var l=h.length,u=0;l>u;u++){var c=h[u];-1==n.indexOf(c)&&n.push(c)}else c=this.keyMap[o],c?-1==n.indexOf(c)&&n.push(c):egret.$warn(3200,o)}return 0!=n.length&&(this.groupDic[t]=n,!0)},r.parseConfig=function(t,e){if(t){var i=t.resources;if(i)for(var r=i.length,n=0;r>n;n++){var s=i[n],a=s.url;a&&-1==a.indexOf("://")&&(s.url=e+a),this.addItemToKeyMap(s)}var o=t.groups;if(o)for(r=o.length,n=0;r>n;n++){for(var h=o[n],l=[],u=h.keys.split(","),c=u.length,d=0;c>d;d++){var f=u[d].trim();s=this.keyMap[f],s&&-1==l.indexOf(s)&&l.push(s)}this.groupDic[h.name]=l}}},r.addSubkey=function(t,e){var i=this.keyMap[e];i&&!this.keyMap[t]&&(this.keyMap[t]=i)},r.addItemToKeyMap=function(t){if(this.keyMap[t.name]||(this.keyMap[t.name]=t),t.hasOwnProperty("subkeys")){var e=t.subkeys.split(",");t.subkeys=e;for(var i=e.length,r=0;i>r;r++){var n=e[r];null==this.keyMap[n]&&(this.keyMap[n]=t)}}},r.getName=function(t){var e=this.keyMap[t];return e?e.name:""},r.getType=function(t){var e=this.keyMap[t];return e?e.type:""},r.getRawResourceItem=function(t){return this.keyMap[t]},r.getResourceItem=function(t){var e=this.keyMap[t];return e?this.parseResourceItem(e):null},r.parseResourceItem=function(e){var i=new t.ResourceItem(e.name,e.url,e.type);return i.data=e,i},e}();t.ResourceConfig=e,egret.registerClass(e,"RES.ResourceConfig")}(RES||(RES={}));var RES;!function(t){var e=function(e){function i(){e.call(this),this.thread=2,this.loadingCount=0,this.callBack=null,this.resInstance=null,this.groupTotalDic={},this.numLoadedDic={},this.itemListDic={},this.groupErrorDic={},this.retryTimesDic={},this.maxRetryTimes=3,this.failedList=new Array,this.priorityQueue={},this.lazyLoadList=new Array,this.analyzerDic={},this.queueIndex=0}__extends(i,e);var r=i,n=r.prototype;return n.isGroupInLoading=function(t){return void 0!==this.itemListDic[t]},n.loadGroup=function(e,i,r){if(void 0===r&&(r=0),!this.itemListDic[i]&&i){if(!e||0==e.length){egret.$warn(3201,i);var n=new t.ResourceEvent(t.ResourceEvent.GROUP_LOAD_ERROR);return n.groupName=i,void this.dispatchEvent(n)}this.priorityQueue[r]?this.priorityQueue[r].push(i):this.priorityQueue[r]=[i],this.itemListDic[i]=e;for(var s=e.length,a=0;s>a;a++){var o=e[a];o.groupName=i}this.groupTotalDic[i]=e.length,this.numLoadedDic[i]=0,this.next()}},n.loadItem=function(t){this.lazyLoadList.push(t),t.groupName="",this.next()},n.next=function(){for(;this.loadingCount<this.thread;){var t=this.getOneResourceItem();if(!t)break;if(this.loadingCount++,t.loaded)this.onItemComplete(t);else{var e=this.resInstance.$getAnalyzerByType(t.type);e.loadFile(t,this.onItemComplete,this)}}},n.getOneResourceItem=function(){if(this.failedList.length>0)return this.failedList.shift();var t=Number.NEGATIVE_INFINITY;for(var e in this.priorityQueue)t=Math.max(t,e);var i=this.priorityQueue[t];if(!i||0==i.length)return 0==this.lazyLoadList.length?null:this.lazyLoadList.pop();for(var r,n=i.length,s=0;n>s&&(this.queueIndex>=n&&(this.queueIndex=0),r=this.itemListDic[i[this.queueIndex]],!(r.length>0));s++)this.queueIndex++;return 0==r.length?null:r.shift()},n.onItemComplete=function(e){this.loadingCount--;var i=e.groupName;if(!e.loaded){var r=this.retryTimesDic[e.name]||1;if(!(r>this.maxRetryTimes))return this.retryTimesDic[e.name]=r+1,this.failedList.push(e),void this.next();delete this.retryTimesDic[e.name],t.ResourceEvent.dispatchResourceEvent(this.resInstance,t.ResourceEvent.ITEM_LOAD_ERROR,i,e)}if(i){this.numLoadedDic[i]++;var n=this.numLoadedDic[i],s=this.groupTotalDic[i];if(e.loaded||(this.groupErrorDic[i]=!0),t.ResourceEvent.dispatchResourceEvent(this.resInstance,t.ResourceEvent.GROUP_PROGRESS,i,e,n,s),n==s){var a=this.groupErrorDic[i];this.removeGroupName(i),delete this.groupTotalDic[i],delete this.numLoadedDic[i],delete this.itemListDic[i],delete this.groupErrorDic[i],a?t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.GROUP_LOAD_ERROR,i):t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.GROUP_COMPLETE,i)}}else this.callBack.call(this.resInstance,e);this.next()},n.removeGroupName=function(t){for(var e in this.priorityQueue){for(var i=this.priorityQueue[e],r=i.length,n=0,s=!1,r=i.length,a=0;r>a;a++){var o=i[a];if(o==t){i.splice(n,1),s=!0;break}n++}if(s){0==i.length&&delete this.priorityQueue[e];break}}},i}(egret.EventDispatcher);t.ResourceLoader=e,egret.registerClass(e,"RES.ResourceLoader")}(RES||(RES={}));var RES;!function(t){var e=function(t){function e(e,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1),t.call(this,e,i,r),this.itemsLoaded=0,this.itemsTotal=0,this.groupName="",this.resItem=null}__extends(e,t);var i=e;return i.prototype,e.dispatchResourceEvent=function(t,i,r,n,s,a){void 0===r&&(r=""),void 0===n&&(n=null),void 0===s&&(s=0),void 0===a&&(a=0);var o=egret.Event.create(e,i);o.groupName=r,o.resItem=n,o.itemsLoaded=s,o.itemsTotal=a;var h=t.dispatchEvent(o);return egret.Event.release(o),h},e.ITEM_LOAD_ERROR="itemLoadError",e.CONFIG_COMPLETE="configComplete",e.CONFIG_LOAD_ERROR="configLoadError",e.GROUP_PROGRESS="groupProgress",e.GROUP_COMPLETE="groupComplete",e.GROUP_LOAD_ERROR="groupLoadError",e}(egret.Event);t.ResourceEvent=e,egret.registerClass(e,"RES.ResourceEvent")}(RES||(RES={}));var RES;!function(t){var e=function(e){function i(){e.call(this),this.resourceConfig=null,this.resourceConfig=t.configInstance}__extends(i,e);var r=i,n=r.prototype;return n.addSubkey=function(t,e){this.resourceConfig.addSubkey(t,e)},n.loadFile=function(t,e,i){},n.getRes=function(t){},n.destroyRes=function(t){return!1},i.getStringPrefix=function(t){if(!t)return"";var e=t.indexOf(".");return-1!=e?t.substring(0,e):""},i.getStringTail=function(t){if(!t)return"";var e=t.indexOf(".");return-1!=e?t.substring(e+1):""},i}(egret.HashObject);t.AnalyzerBase=e,egret.registerClass(e,"RES.AnalyzerBase")}(RES||(RES={}));var RES;!function(t){var e=function(e){function i(){e.call(this),this.fileDic={},this.resItemDic=[],this._dataFormat=egret.HttpResponseType.ARRAY_BUFFER,this.recycler=[]}__extends(i,e);var r=i,n=r.prototype;return n.loadFile=function(e,i,r){if(this.fileDic[e.name])return void i.call(r,e);var n=this.getRequest();this.resItemDic[n.hashCode]={item:e,func:i,thisObject:r},n.open(t.$getVirtualUrl(e.url)),n.send()},n.getRequest=function(){var t=this.recycler.pop();return t||(t=new egret.HttpRequest,t.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),t.responseType=this._dataFormat,t},n.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.hashCode];delete this.resItemDic[e.hashCode];var r=i.item,n=i.func;r.loaded=t.type==egret.Event.COMPLETE,r.loaded&&this.analyzeData(r,e.response),this.recycler.push(e),n.call(i.thisObject,r)},n.analyzeData=function(t,e){var i=t.name;this.fileDic[i]||""!=e&&!e||(this.fileDic[i]=e)},n.getRes=function(t){return this.fileDic[t]},n.hasRes=function(t){var e=this.getRes(t);return null!=e},n.destroyRes=function(t){return!!this.fileDic[t]&&(this.onResourceDestroy(this.fileDic[t]),delete this.fileDic[t],!0)},n.onResourceDestroy=function(t){},i}(t.AnalyzerBase);t.BinAnalyzer=e,egret.registerClass(e,"RES.BinAnalyzer")}(RES||(RES={}));var RES;!function(t){var e=function(e){function i(){e.call(this),this.fileDic={},this.resItemDic=[],this.recycler=[]}__extends(i,e);var r=i,n=r.prototype;return n.loadFile=function(e,i,r){if(this.fileDic[e.name])return void i.call(r,e);var n=this.getLoader();this.resItemDic[n.$hashCode]={item:e,func:i,thisObject:r},n.load(t.$getVirtualUrl(e.url))},n.getLoader=function(){var t=this.recycler.pop();return t||(t=new egret.ImageLoader,t.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),t},n.onLoadFinish=function(t){var e=t.$target,i=this.resItemDic[e.$hashCode];delete this.resItemDic[e.$hashCode];var r=i.item,n=i.func;if(r.loaded=t.$type==egret.Event.COMPLETE,r.loaded){var s=new egret.Texture;s._setBitmapData(e.data),this.analyzeData(r,s)}this.recycler.push(e),n.call(i.thisObject,r)},n.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){this.fileDic[i]=e;var r=t.data;if(r&&r.scale9grid){var n=r.scale9grid,s=n.split(",");e.scale9Grid=new egret.Rectangle(parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3]))}}},n.getRes=function(t){return this.fileDic[t]},n.hasRes=function(t){var e=this.getRes(t);return null!=e},n.destroyRes=function(t){return!!this.fileDic[t]&&(this.onResourceDestroy(this.fileDic[t]),delete this.fileDic[t],!0)},n.onResourceDestroy=function(t){t.dispose()},i}(t.AnalyzerBase);t.ImageAnalyzer=e,egret.registerClass(e,"RES.ImageAnalyzer")}(RES||(RES={}));var RES;!function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.HttpResponseType.TEXT}__extends(e,t);var i=e;return i.prototype,e}(t.BinAnalyzer);t.TextAnalyzer=e,egret.registerClass(e,"RES.TextAnalyzer")}(RES||(RES={}));var RES;!function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.HttpResponseType.TEXT}__extends(e,t);var i=e,r=i.prototype;return r.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e)try{var r=e;this.fileDic[i]=JSON.parse(r)}catch(i){egret.$warn(1017,t.url,e)}},e}(t.BinAnalyzer);t.JsonAnalyzer=e,egret.registerClass(e,"RES.JsonAnalyzer")}(RES||(RES={}));var RES;!function(t){var e=function(e){function i(){e.call(this),this.sheetMap={},this.textureMap={},this.recyclerIamge=[],this._dataFormat=egret.HttpResponseType.TEXT}__extends(i,e);var r=i,n=r.prototype;return n.getRes=function(e){var i=this.fileDic[e];if(i||(i=this.textureMap[e]),!i){var r=t.AnalyzerBase.getStringPrefix(e);if(i=this.fileDic[r]){var n=t.AnalyzerBase.getStringTail(e);i=i.getTexture(n)}}return i},n.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.$hashCode];delete this.resItemDic[e.hashCode];var r=i.item,n=i.func;if(r.loaded=t.type==egret.Event.COMPLETE,r.loaded)if(e instanceof egret.HttpRequest){r.loaded=!1;var s=this.analyzeConfig(r,e.response);if(s)return this.loadImage(s,i),void this.recycler.push(e)}else{var a=new egret.Texture;a._setBitmapData(e.data),this.analyzeBitmap(r,a)}e instanceof egret.HttpRequest?this.recycler.push(e):this.recyclerIamge.push(e),n.call(i.thisObject,r)},n.analyzeConfig=function(t,e){var i,r=t.name,n="";try{var s=e;i=JSON.parse(s)}catch(i){egret.$warn(1017,t.url,e)}return i&&(this.sheetMap[r]=i,n=this.getRelativePath(t.url,i.file)),n},n.analyzeBitmap=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var r=this.sheetMap[i];delete this.sheetMap[i];var n=t.data&&t.data.subkeys?"":i,s=this.parseSpriteSheet(e,r,n);this.fileDic[i]=s}},n.getRelativePath=function(t,e){t=t.split("\\").join("/");var i=t.match(/#.*|\?.*/),r="";i&&(r=i[0]);var n=t.lastIndexOf("/");return t=-1!=n?t.substring(0,n+1)+e:e,t+r},n.parseSpriteSheet=function(t,e,i){var r=e.frames;if(!r)return null;var n=new egret.SpriteSheet(t),s=this.textureMap;for(var a in r){var o=r[a],t=n.createTexture(a,o.x,o.y,o.w,o.h,o.offX,o.offY,o.sourceW,o.sourceH);if(o.scale9grid){var h=o.scale9grid,l=h.split(",");t.scale9Grid=new egret.Rectangle(parseInt(l[0]),parseInt(l[1]),parseInt(l[2]),parseInt(l[3]))}null==s[a]&&(s[a]=t,i&&this.addSubkey(a,i))}return n},n.destroyRes=function(t){var e=this.fileDic[t];if(e){delete this.fileDic[t];var i;for(var r in e._textureMap)null==i&&(i=e._textureMap[r],this.onResourceDestroy(i),i=null),delete this.textureMap[r];return!0}return!1},n.loadImage=function(e,i){var r=this.getImageLoader();this.resItemDic[r.hashCode]=i,r.load(t.$getVirtualUrl(e))},n.getImageLoader=function(){var t=this.recyclerIamge.pop();return t||(t=new egret.ImageLoader,t.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),t},n.onResourceDestroy=function(t){t&&t.dispose()},i}(t.BinAnalyzer);t.SheetAnalyzer=e,egret.registerClass(e,"RES.SheetAnalyzer")}(RES||(RES={}));var RES;!function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=e,r=i.prototype;return r.analyzeConfig=function(t,e){var i,r=t.name,n="";try{var s=e;i=JSON.parse(s)}catch(t){}return i?n=this.getRelativePath(t.url,i.file):(i=e,n=this.getTexturePath(t.url,i)),this.sheetMap[r]=i,n},r.analyzeBitmap=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var r=this.sheetMap[i];
delete this.sheetMap[i];var n=new egret.BitmapFont(e,r);this.fileDic[i]=n}},r.getTexturePath=function(t,e){var i="",r=e.split("\n"),n=r[2],s=n.indexOf('file="');-1!=s&&(n=n.substring(s+6),s=n.indexOf('"'),i=n.substring(0,s)),t=t.split("\\").join("/");var s=t.lastIndexOf("/");return t=-1!=s?t.substring(0,s+1)+i:i},r.onResourceDestroy=function(t){t&&t.dispose()},e}(t.SheetAnalyzer);t.FontAnalyzer=e,egret.registerClass(e,"RES.FontAnalyzer")}(RES||(RES={}));var RES;!function(t){var e=function(e){function i(){e.call(this),this.soundDic={},this.resItemDic=[]}__extends(i,e);var r=i,n=r.prototype;return n.loadFile=function(e,i,r){if(this.soundDic[e.name])return void i.call(r,e);var n=new egret.Sound;n.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),this.resItemDic[n.$hashCode]={item:e,func:i,thisObject:r},n.load(t.$getVirtualUrl(e.url)),e.data&&(n.type=e.data.soundType)},n.onLoadFinish=function(t){var e=t.$target;e.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);var i=this.resItemDic[e.$hashCode];delete this.resItemDic[e.$hashCode];var r=i.item,n=i.func;r.loaded=t.$type==egret.Event.COMPLETE,r.loaded&&this.analyzeData(r,e),n.call(i.thisObject,r)},n.analyzeData=function(t,e){var i=t.name;!this.soundDic[i]&&e&&(this.soundDic[i]=e)},n.getRes=function(t){return this.soundDic[t]},n.hasRes=function(t){return!!this.getRes(t)},n.destroyRes=function(t){return!!this.soundDic[t]&&(delete this.soundDic[t],!0)},i}(t.AnalyzerBase);t.SoundAnalyzer=e,egret.registerClass(e,"RES.SoundAnalyzer")}(RES||(RES={}));var RES;!function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.HttpResponseType.TEXT}__extends(e,t);var i=e,r=i.prototype;return r.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e)try{var r=e,n=egret.XML.parse(r);this.fileDic[i]=n}catch(t){}},e}(t.BinAnalyzer);t.XMLAnalyzer=e,egret.registerClass(e,"RES.XMLAnalyzer")}(RES||(RES={}));var RES;!function(t){}(RES||(RES={}));var RES;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this._versionInfo={}}__extends(e,t);var i=e,r=i.prototype;return r.fetchVersion=function(t){t.onSuccess(null)},r.getChangeList=function(){return[]},r.getVirtualUrl=function(t){return t},e}(egret.EventDispatcher);e.Html5VersionController=i,egret.registerClass(i,"RES.web.Html5VersionController",["RES.VersionController","RES.IVersionController"]),egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&(t.VersionController=i)}(e=t.web||(t.web={}))}(RES||(RES={}));var RES;!function(t){var e;!function(e){var i=function(){function t(){this._versionInfo={},this._versionPath="",this._localFileArr=[]}var e=t,i=e.prototype;return i.fetchVersion=function(t){var e=this;if(e._versionPath="all.manifest",e._versionInfo=e.getLocalData(e._versionPath),null==e._versionInfo)return void egret.callLater(function(){t.onFail(1,null)},e);var i=0,r=function(r){if(r)for(var n=0;n<r.length;n++)r[n]&&""!=r[n]&&e._localFileArr.push("resource/"+r[n]);i++,2==i&&t.onSuccess(null)};e.getList(r,"assets","resource"),e.getList(r,"update","resource")},i.getList=function(t,e,i){void 0===i&&(i="");var r=egret.PromiseObject.create();r.onSuccessFunc=function(e){t(e)},r.onErrorFunc=function(){console.error("list files error")},"assets"==e?egret_native.Game.listResource(i,r):egret_native.Game.listUpdate(i,r)},i.getChangeList=function(){var t=[],e=this._localFileArr;for(var i in this._versionInfo)e.indexOf(this.getVirtualUrl(i))<0&&t.push({url:this.getVirtualUrl(i),size:this._versionInfo[i].s});return t},i.getVirtualUrl=function(t){return this._versionInfo&&this._versionInfo[t]?"resource/"+this._versionInfo[t].v.substring(0,2)+"/"+this._versionInfo[t].v+"_"+this._versionInfo[t].s+"."+t.substring(t.lastIndexOf(".")+1):t},i.getLocalData=function(t){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var e=egret_native.readUpdateFileSync(t);if(null!=e)return JSON.parse(e);if(e=egret_native.readResourceFileSync(t),null!=e)return JSON.parse(e)}return null},t}();e.NativeVersionController=i,egret.registerClass(i,"RES.native.NativeVersionController",["RES.VersionController","RES.IVersionController"]),egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE&&(t.VersionController=i)}(e=t.native||(t.native={}))}(RES||(RES={}));var RES;!function(t){function e(t,e){_.registerAnalyzer(t,e)}function i(t){_.$registerVersionController(t)}function r(){return _.vcs}function n(t,e,i){void 0===e&&(e=""),void 0===i&&(i="json"),_.loadConfig(t,e,i)}function s(t,e){void 0===e&&(e=0),_.loadGroup(t,e)}function a(t){return _.isGroupLoaded(t)}function o(t){return _.getGroupByName(t)}function h(t,e,i){return void 0===i&&(i=!1),_.createGroup(t,e,i)}function l(t){return _.hasRes(t)}function u(t,e){void 0===e&&(e=""),_.parseConfig(t,e)}function c(t){return _.getRes(t)}function d(t,e,i){_.getResAsync(t,e,i)}function f(t,e,i,r){void 0===r&&(r=""),_.getResByUrl(t,e,i,r)}function g(t,e){return _.destroyRes(t,e)}function p(t){_.setMaxLoadingThread(t)}function v(t){_.setMaxRetryTimes(t)}function m(t,e,i,r,n){void 0===r&&(r=!1),void 0===n&&(n=0),_.addEventListener(t,e,i,r,n)}function y(t,e,i,r){void 0===r&&(r=!1),_.removeEventListener(t,e,i,r)}function T(t){return _.vcs?_.vcs.getVirtualUrl(t):t}t.registerAnalyzer=e,t.registerVersionController=i,t.getVersionController=r,t.loadConfig=n,t.loadGroup=s,t.isGroupLoaded=a,t.getGroupByName=o,t.createGroup=h,t.hasRes=l,t.parseConfig=u,t.getRes=c,t.getResAsync=d,t.getResByUrl=f,t.destroyRes=g,t.setMaxLoadingThread=p,t.setMaxRetryTimes=v,t.addEventListener=m,t.removeEventListener=y,t.$getVirtualUrl=T;var x=function(e){function i(){e.call(this),this.analyzerDic={},this.analyzerClassMap={},this.configItemList=[],this.callLaterFlag=!1,this.configComplete=!1,this.loadedGroups=[],this.groupNameList=[],this.asyncDic={},this._loadedUrlTypes={},this.init()}__extends(i,e);var r=i,n=r.prototype;return n.$getAnalyzerByType=function(t){var e=this.analyzerDic[t];if(!e){var i=this.analyzerClassMap[t];if(!i)return null;e=this.analyzerDic[t]=new i}return e},n.registerAnalyzer=function(t,e){this.analyzerClassMap[t]=e},n.$registerVersionController=function(t){this.vcs=t},n.init=function(){this.vcs=new t.VersionController;var e=this.analyzerClassMap;e[t.ResourceItem.TYPE_BIN]=t.BinAnalyzer,e[t.ResourceItem.TYPE_IMAGE]=t.ImageAnalyzer,e[t.ResourceItem.TYPE_TEXT]=t.TextAnalyzer,e[t.ResourceItem.TYPE_JSON]=t.JsonAnalyzer,e[t.ResourceItem.TYPE_SHEET]=t.SheetAnalyzer,e[t.ResourceItem.TYPE_FONT]=t.FontAnalyzer,e[t.ResourceItem.TYPE_SOUND]=t.SoundAnalyzer,e[t.ResourceItem.TYPE_XML]=t.XMLAnalyzer,this.resConfig=new t.ResourceConfig,this.resLoader=new t.ResourceLoader,this.resLoader.callBack=this.onResourceItemComp,this.resLoader.resInstance=this,this.resLoader.addEventListener(t.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this),this.resLoader.addEventListener(t.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)},n.loadConfig=function(t,e,i){void 0===i&&(i="json");var r={url:t,resourceRoot:e,type:i};this.configItemList.push(r),this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=!0)},n.startLoadConfig=function(){var e=this;this.callLaterFlag=!1;var r=this.configItemList;this.configItemList=[],this.loadingConfigList=r;for(var n=r.length,s=[],a=0;n>a;a++){var o=r[a],h=new t.ResourceItem(o.url,o.url,o.type);s.push(h)}var l={onSuccess:function(t){e.resLoader.loadGroup(s,i.GROUP_CONFIG,Number.MAX_VALUE)},onFail:function(i,r){t.ResourceEvent.dispatchResourceEvent(e,t.ResourceEvent.CONFIG_LOAD_ERROR)}};this.vcs?this.vcs.fetchVersion(l):this.resLoader.loadGroup(s,i.GROUP_CONFIG,Number.MAX_VALUE)},n.isGroupLoaded=function(t){return-1!=this.loadedGroups.indexOf(t)},n.getGroupByName=function(t){return this.resConfig.getGroupByName(t)},n.loadGroup=function(e,i){if(void 0===i&&(i=0),-1!=this.loadedGroups.indexOf(e))return void t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.GROUP_COMPLETE,e);if(!this.resLoader.isGroupInLoading(e))if(this.configComplete){var r=this.resConfig.getGroupByName(e);this.resLoader.loadGroup(r,e,i)}else this.groupNameList.push({name:e,priority:i})},n.createGroup=function(t,e,i){if(void 0===i&&(i=!1),i){var r=this.loadedGroups.indexOf(t);-1!=r&&this.loadedGroups.splice(r,1)}return this.resConfig.createGroup(t,e,i)},n.onGroupComp=function(e){if(e.groupName==i.GROUP_CONFIG){for(var r=this.loadingConfigList.length,n=0;r>n;n++){var s=this.loadingConfigList[n],a=this.$getAnalyzerByType(s.type),o=a.getRes(s.url);a.destroyRes(s.url),this.resConfig.parseConfig(o,s.resourceRoot)}this.configComplete=!0,this.loadingConfigList=null,t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.CONFIG_COMPLETE),this.loadDelayGroups()}else this.loadedGroups.push(e.groupName),this.dispatchEvent(e)},n.loadDelayGroups=function(){var t=this.groupNameList;this.groupNameList=[];for(var e=t.length,i=0;e>i;i++){var r=t[i];this.loadGroup(r.name,r.priority)}},n.onGroupError=function(e){e.groupName==i.GROUP_CONFIG?(this.loadingConfigList=null,t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(e)},n.hasRes=function(e){var i=this.resConfig.getType(e);if(""==i){var r=t.AnalyzerBase.getStringPrefix(e);if(i=this.resConfig.getType(r),""==i)return!1}return!0},n.parseConfig=function(t,e){this.resConfig.parseConfig(t,e),this.configComplete||this.loadingConfigList||(this.configComplete=!0,this.loadDelayGroups())},n.getRes=function(e){var i=this.resConfig.getType(e);if(""==i){var r=t.AnalyzerBase.getStringPrefix(e);if(i=this.resConfig.getType(r),""==i)return null}var n=this.$getAnalyzerByType(i);return n.getRes(e)},n.getResAsync=function(e,i,r){var n=this.resConfig.getType(e),s=this.resConfig.getName(e);if(""==n&&(s=t.AnalyzerBase.getStringPrefix(e),n=this.resConfig.getType(s),""==n))return void egret.$callAsync(i,r);var a=this.$getAnalyzerByType(n),o=a.getRes(e);if(o)return void egret.$callAsync(i,r,o,e);var h={key:e,compFunc:i,thisObject:r};if(this.asyncDic[s])this.asyncDic[s].push(h);else{this.asyncDic[s]=[h];var l=this.resConfig.getResourceItem(s);this.resLoader.loadItem(l)}},n.getResByUrl=function(e,i,r,n){if(void 0===n&&(n=""),!e)return void egret.$callAsync(i,r);n||(n=this.getTypeByUrl(e)),null!=this._loadedUrlTypes[e]&&this._loadedUrlTypes[e]!=n&&egret.$warn(3202),this._loadedUrlTypes[e]=n;var s=this.$getAnalyzerByType(n),a=e,o=s.getRes(a);if(o)return void egret.$callAsync(i,r,o,e);var h={key:a,compFunc:i,thisObject:r};if(this.asyncDic[a])this.asyncDic[a].push(h);else{this.asyncDic[a]=[h];var l=new t.ResourceItem(a,e,n);this.resLoader.loadItem(l)}},n.getTypeByUrl=function(e){var i=e.substr(e.lastIndexOf(".")+1);i&&(i=i.toLowerCase());var r;switch(i){case t.ResourceItem.TYPE_XML:case t.ResourceItem.TYPE_JSON:case t.ResourceItem.TYPE_SHEET:r=i;break;case"png":case"jpg":case"gif":case"jpeg":case"bmp":r=t.ResourceItem.TYPE_IMAGE;break;case"fnt":r=t.ResourceItem.TYPE_FONT;break;case"txt":r=t.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":r=t.ResourceItem.TYPE_SOUND;break;default:r=t.ResourceItem.TYPE_BIN}return r},n.onResourceItemComp=function(t){var e=this.asyncDic[t.name];delete this.asyncDic[t.name];for(var i=this.$getAnalyzerByType(t.type),r=e.length,n=0;r>n;n++){var s=e[n],a=i.getRes(s.key);s.compFunc.call(s.thisObject,a,s.key)}},n.destroyRes=function(t,e){void 0===e&&(e=!0);var i=this.resConfig.getRawGroupByName(t);if(i&&i.length>0){var r=this.loadedGroups.indexOf(t);-1!=r&&this.loadedGroups.splice(r,1);for(var n=i.length,s=0;n>s;s++){var a=i[s];if(!e&&this.isResInLoadedGroup(a.name));else{a.loaded=!1;var o=this.$getAnalyzerByType(a.type);o.destroyRes(a.name),this.removeLoadedGroupsByItemName(a.name)}}return!0}var h=this.resConfig.getType(t);if(""==h){if(h=this._loadedUrlTypes[t],null==h||""==h)return!1;delete this._loadedUrlTypes[t];var o=this.$getAnalyzerByType(h);return o.destroyRes(t),!0}a=this.resConfig.getRawResourceItem(t),a.loaded=!1,o=this.$getAnalyzerByType(h);var l=o.destroyRes(t);return this.removeLoadedGroupsByItemName(a.name),l},n.removeLoadedGroupsByItemName=function(t){for(var e=this.loadedGroups,i=e.length,r=0;i>r;r++)for(var n=this.resConfig.getRawGroupByName(e[r]),s=n.length,a=0;s>a;a++){var o=n[a];if(o.name==t){e.splice(r,1),r--,i=e.length;break}}},n.isResInLoadedGroup=function(t){for(var e=this.loadedGroups,i=e.length,r=0;i>r;r++)for(var n=this.resConfig.getRawGroupByName(e[r]),s=n.length,a=0;s>a;a++){var o=n[a];if(o.name==t)return!0}return!1},n.setMaxLoadingThread=function(t){1>t&&(t=1),this.resLoader.thread=t},n.setMaxRetryTimes=function(t){t=Math.max(t,0),this.resLoader.maxRetryTimes=t},i.GROUP_CONFIG="RES__CONFIG",i}(egret.EventDispatcher);egret.registerClass(x,"Resource");var _=new x}(RES||(RES={}));var RES;!function(t){var e=function(e){function i(){e.call(this),this.sheetMap={},this.recyclerIamge=[],this._dataFormat=egret.HttpResponseType.TEXT}__extends(i,e);var r=i,n=r.prototype;return n.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.$hashCode];delete this.resItemDic[e.hashCode];var r=i.item,n=i.func;if(r.loaded=t.type==egret.Event.COMPLETE,r.loaded)if(e instanceof egret.HttpRequest){r.loaded=!1;var s=this.analyzeConfig(r,e.response);if(s)return this.loadImage(s,i),void this.recycler.push(e)}else this.analyzeBitmap(r,e.data);e instanceof egret.HttpRequest?this.recycler.push(e):this.recyclerIamge.push(e),n.call(i.thisObject,r)},n.analyzeConfig=function(t,e){var i,r=t.name,n="";try{var s=e;i=JSON.parse(s)}catch(i){egret.$warn(1017,t.url,e)}if(i)if(this.sheetMap[r]=i,i.file)n=this.getRelativePath(t.url,i.file);else{var a=t.url.split("?"),o=a[0].split("/");o[o.length-1]=o[o.length-1].split(".")[0]+".png",n="";for(var h=0;h<o.length;h++)n+=o[h]+(h<o.length-1?"/":"");2==a.length&&(n+=a[2])}return n},n.analyzeBitmap=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var r=this.sheetMap[i];delete this.sheetMap[i];var n=t.data&&t.data.subkeys?"":i,s=this.parseAnimation(e,r,n);this.fileDic[i]=s}},n.getRelativePath=function(t,e){t=t.split("\\").join("/");var i=t.lastIndexOf("/");return t=-1!=i?t.substring(0,i+1)+e:e},n.parseAnimation=function(t,e,i){for(var r,n=Object.keys(e.mc),s=e.mc[n[0]].frames,a=s.length,o=[],h=0;a>h;h++){r=e.res[s[h].res];var l=new egret.Texture;l._bitmapData=t,l.$initData(r.x,r.y,r.w,r.h,s[h].x,s[h].y,s[h].sourceW,s[h].sourceH,t.width,t.height)}return o},n.destroyRes=function(t){var e=this.fileDic[t];return!!e&&(delete this.fileDic[t],!0)},n.loadImage=function(e,i){var r=this.getImageLoader();this.resItemDic[r.hashCode]=i,r.load(t.$getVirtualUrl(e))},n.getImageLoader=function(){var t=this.recyclerIamge.pop();return t||(t=new egret.ImageLoader,t.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),t},i}(t.BinAnalyzer);t.AnimationAnalyzer=e,egret.registerClass(e,"RES.AnimationAnalyzer")}(RES||(RES={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[3200]="RES.createGroup() passed in non-existed key value in configuration: {0}",e[3201]='RES loaded non-existed or empty resource group:"{0}"',e[3202]="Do not use the different types of ways to load the same material!",e[3203]="Can't find the analyzer of the specified file type:{0} Please register the specified analyzer in the initialization of the project first,then start the resource loading process"}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[3200]="RES.createGroup(): {0}",e[3201]='RES:"{0}"',e[3202]="",e[3203]=":{0} "}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){t.$error(1014)}var i=e;return i.prototype,e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowIn=function(t){return function(e){return Math.pow(e,t)}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},e.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},e.sineOut=function(t){return Math.sin(t*Math.PI/2)},e.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},e.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},e.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},e.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},e.circOut=function(t){return Math.sqrt(1- --t*t)},e.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(t,e){var i=2*Math.PI;return function(r){if(0==r||1==r)return r;var n=e/i*Math.asin(1/t);return-(t*Math.pow(2,10*(r-=1))*Math.sin((r-n)*i/e))}},e.getElasticOut=function(t,e){var i=2*Math.PI;return function(r){if(0==r||1==r)return r;var n=e/i*Math.asin(1/t);return t*Math.pow(2,-10*r)*Math.sin((r-n)*i/e)+1}},e.getElasticInOut=function(t,e){var i=2*Math.PI;return function(r){var n=e/i*Math.asin(1/t);return(r*=2)<1?-.5*(t*Math.pow(2,10*(r-=1))*Math.sin((r-n)*i/e)):t*Math.pow(2,-10*(r-=1))*Math.sin((r-n)*i/e)*.5+1}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.backIn=e.getBackIn(1.7),e.backOut=e.getBackOut(1.7),e.backInOut=e.getBackInOut(1.7),e.elasticIn=e.getElasticIn(1,.3),e.elasticOut=e.getElasticOut(1,.3),e.elasticInOut=e.getElasticInOut(1,.3*1.5),e}();t.Ease=e,t.registerClass(e,"egret.Ease")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){e.call(this),this._target=null,this._useTicks=!1,this.ignoreGlobalPause=!1,this.loop=!1,this.pluginData=null,this._steps=null,this._actions=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._prevPosition=0,this._stepPosition=0,this.passive=!1,this.initialize(t,i,r)}__extends(i,e);var r=i,n=r.prototype;return i.get=function(t,e,r,n){return void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=!1),n&&i.removeTweens(t),new i(t,e,r)},i.removeTweens=function(t){if(t.tween_count){for(var e=i._tweens,r=e.length-1;r>=0;r--)e[r]._target==t&&(e[r].paused=!0,e.splice(r,1));t.tween_count=0}},i.pauseTweens=function(e){if(e.tween_count)for(var i=t.Tween._tweens,r=i.length-1;r>=0;r--)i[r]._target==e&&(i[r].paused=!0)},i.resumeTweens=function(e){if(e.tween_count)for(var i=t.Tween._tweens,r=i.length-1;r>=0;r--)i[r]._target==e&&(i[r].paused=!1)},i.tick=function(t,e){void 0===e&&(e=!1);var r=t-i._lastTime;i._lastTime=t;for(var n=i._tweens.concat(),s=n.length-1;s>=0;s--){var a=n[s];e&&!a.ignoreGlobalPause||a.paused||a.tick(a._useTicks?1:r)}return!1},i._register=function(e,r){var n=e._target,s=i._tweens;if(r)n&&(n.tween_count=n.tween_count>0?n.tween_count+1:1),s.push(e),i._inited||(i._lastTime=t.getTimer(),t.sys.$ticker.$startTick(i.tick,null),i._inited=!0);else{n&&n.tween_count--;for(var a=s.length;a--;)if(s[a]==e)return void s.splice(a,1)}},i.removeAllTweens=function(){for(var t=i._tweens,e=0,r=t.length;r>e;e++){var n=t[e];n.paused=!0,n._target.tweenjs_count=0}t.length=0},n.initialize=function(t,e,r){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&i.removeTweens(t)),this.pluginData=r||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:i._register(this,!0),e&&null!=e.position&&this.setPosition(e.position,i.NONE)},n.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var i=t,r=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,r=!0)),i==this._prevPos)return r;var n=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(r)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var s=0,a=this._steps.length;a>s&&!(this._steps[s].t>i);s++);var o=this._steps[s-1];this._updateTargetProps(o,(this._stepPosition=i-o.t)/o.d)}return r&&this.setPaused(!0),0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&n>i?(n!=this.duration&&this._runActions(n,this.duration),this._runActions(0,i,!0)):this._runActions(n,i)),this.dispatchEventWith("change"),r},n._runActions=function(t,e,i){void 0===i&&(i=!1);var r=t,n=e,s=-1,a=this._actions.length,o=1;for(t>e&&(r=e,n=t,s=a,a=o=-1);(s+=o)!=a;){var h=this._actions[s],l=h.t;(l==n||l>r&&n>l||i&&l==t)&&h.f.apply(h.o,h.p)}},n._updateTargetProps=function(t,e){var r,n,s,a,o,h;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),r=t.p0,n=t.p1}else this.passive=!1,r=n=this._curQueueProps;for(var l in this._initQueueProps){null==(a=r[l])&&(r[l]=a=this._initQueueProps[l]),null==(o=n[l])&&(n[l]=o=a),s=a==o||0==e||1==e||"number"!=typeof a?1==e?o:a:a+(o-a)*e;var u=!1;if(h=i._plugins[l])for(var c=0,d=h.length;d>c;c++){var f=h[c].tween(this,l,s,r,n,e,!!t&&r==n,!t);f==i.IGNORE?u=!0:s=f}u||(this._target[l]=s)}},n.setPaused=function(t){return this.paused=t,i._register(this,!t),this},n._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},n._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},n._appendQueueProps=function(t){var e,r,n,s,a;for(var o in t)if(void 0===this._initQueueProps[o]){if(r=this._target[o],e=i._plugins[o])for(n=0,s=e.length;s>n;n++)r=e[n].init(this,o,r);this._initQueueProps[o]=this._curQueueProps[o]=void 0===r?null:r}else r=this._curQueueProps[o];for(var o in t){if(r=this._curQueueProps[o],e=i._plugins[o])for(a=a||{},n=0,s=e.length;s>n;n++)e[n].step&&e[n].step(this,o,r,t[o],a);this._curQueueProps[o]=t[o]}return a&&this._appendQueueProps(a),this._curQueueProps},n._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},n._set=function(t,e){for(var i in t)e[i]=t[i]},n.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,p1:i,v:e})},n.to=function(t,e,i){return void 0===i&&(i=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},n.call=function(t,e,i){return void 0===e&&(e=void 0),void 0===i&&(i=void 0),this._addAction({f:t,p:i?i:[],o:e?e:this._target})},n.set=function(t,e){return void 0===e&&(e=null),this._appendQueueProps(t),this._addAction({f:this._set,o:this,p:[t,e?e:this._target]})},n.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},n.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},n.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},i.NONE=0,i.LOOP=1,i.REVERSE=2,i._tweens=[],i.IGNORE={},i._plugins={},i._inited=!1,i._lastTime=0,i}(t.EventDispatcher);t.Tween=e,t.registerClass(e,"egret.Tween")}(egret||(egret={}));